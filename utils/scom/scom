Scom -- file comparison                                 92077-17307 Rev.5020
  
Scom file1 file2 [[+|~]listfl] [options] [rematchlns] [maxchars] [difflimit]
  
file, file2
   The files to compare.  Type 1 or 6 files force a binary block compare (see
   the "bb" option); type 2 or 5 files assume a binary record compare (but see
   the "tc" option).
  
listfl
   The listing file (default is terminal).  +listfl appends to an existing
   file,  ~listfl overlays an existing file.
  
rematchlns
   The number of consecutive lines which must match before a mismatch is
   ended, that is, the files are considered to be "rematched".  The default
   is 3 lines.
  
maxchars
   The maximum number of characters per record in both file1 and file2.  For
   hierarchical files this is automatically set to the greater of the two
   maximum record lengths as given in the directory.  For FMGR file system
   files it is defaulted to 256; for binary block (bb) compares it is forced
   to 256.  The maximum value is 1024.
  
difflimit
   The maximum number of differences to report.  If reached, the message:
  
      * Mismatch limit reached
  
   appears and the comparison terminates as if complete.  If difflimit is
   not specified all the differences found will be reported.
  
options are:
  
   f1   Report lines unique to file1 (default).
   f2   Report lines unique to file2 (default).
   bo   Report lines common to both files.
   nn   Suppress line numbers on report.
   nh   No heading on listing (parameter info).
   nt   No trailer on listing (number of mismatches).
  
   tb   Trailing blanks are significant.  Default for the et, er, bb, and br
        options.
  
   ib   Trailing blanks are insignificant, ignore when matching.  Default
        for the normal report (et/er/bb/br not given).
  
   d<x> Wildcard: character <x> matches any character in the other file.
        Example: "d~" causes all tildes (~) in one file to always match
        the corresponding character in the other file, even if past the
        end of the other line.
  
   c<x> Ignore lines with character <x> in column 1 and blanks in all other
        columns when rematching. <x> is typically "C" or "*" for Fortran or
        Macro source files.
        Example: "c*" causes lines with a "*" in column 1 but otherwise blank
        to be ignored when rematching after a mismatch.
 
   it   Ignore Edit/1000 timestamps.  If both files contain the corresponding
        pattern <nnnnnn.nnnn> where n = 0..9, then different times do not
        cause a mismatch, that is, the n values can differ and still "match".
  
   ic   Ignore compile times in relocatable records for binary record
        compares.  XNAM checksums, compile times, producer rev codes, and
        comment strings and XEND checksums are forced to be equal under
        this option.
  
   et   Create an Edit/1000 transfer file to convert file1 to file2.
  
   er   Same as "et", but add an Edit "ER" command to the end of the transfer
        file.
  
   br   Binary record-by-record compare: compare each record of file1 against
        the corresponding numbered record in file2, reporting differences in
        octal format.  Assumed if either file is type 2 or 5.
  
   bb   Binary block-by-block compare: compare each block of file1 against
        the corresponding numbered block in file2, reporting differences in
        octal format.  Forced if either file is type 1 or 6.
  
   tc   Text compare, used to force a normal source compare on a type 2 or
        5 file.
  
If none of f1, f2, nor bo are specified then options f1 and f2 will be used
by default for the standard differences report.
  
 
When the "et" or "er" options are given the listing file is an Edit/1000
transfer file that contains the necessary insert, replace, and kill commands
to make file1 identical to file2.  For example:
  
      scom ver2 ver1 ver2_1.edit er
      edit -b ver2|tr ver2_1.edit
  
will modify file ver2 to the same text as ver1.  The f1, f2, bo, nn, d<x>,
br, and bb options are not meaningful for this mode.
  
  
For both the "br" (binary record) and "bb" (binary block) comparisons,
mismatching blocks or records are dumped in 12-byte groups side-by-side in
both octal and ASCII (if standard printing character) format.  The octal
representation for file2 bytes appear as "..." if this byte is the same as
the byte for file1 listed directly above.  If only blanks appear in that
field then the byte position is past the end of the record for that file.
The last byte in each file is suffixed with a backslash (\).
Example:
  
   Record 12
      1    1: 377 377 000 000 000 000 000 000 000 000 000 000  |
     13     :&dJ 000 132 004 320 000 000 000 000 000\             &d@| Z
          13:&dJ ... 143 ... 000 ... ...\                         &d@| c
  
This says that in record 12 of both files bytes 1-13, 15, and 17-18 match;
bytes 14 and 16 mismatch; and bytes 19-21 in file1 are past the end of the
file2 record.  Byte 14 is octal 132, ASCII "Z" in file1; that byte is octal
143, ASCII "c" in file2.
  
  
Numeric parameters returned on exit:
  
   $return1 >= 0  if comparison complete, this is the number of differences
                  found.  0 means the files are identical.
  
                  $return2 = 1 if records were truncated, 0 if not
  
   $return1 = -1  if Fmp error occurred.
  
                  $return2 = Fmp error code
                  $return3 = 1 for file1, 2 for file2, 3 for list file
  
   $return1 = -2  if Scom error occurred.
  
                  $return2 =      1 for runstring errors
                             others for internal errors
  
Responses to the "More..." prompt can be preceded by a number from 1 to
32767, called <n> below:
  
   <space>     list another page, or <n> lines if <n> given
   <return>    list the rest of the info without pausing
   A or Q      abort the listing
   +           list 1 line, or skip <n> lines and list 1 line if <n> given
   P           set # lines per page to <n> and list a page
   Z           suspend Scom, restart with the RTE GO command
  

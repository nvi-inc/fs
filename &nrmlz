FTN4,X
C@NRMLZ 
C 
      SUBROUTINE NRMLZ(KFIELD,KSPLIT,RSINB,RCOSB,RNBITB,RSINA,RCOSA,
     . RNBITA,IVC,IVC2,ITRK,KCOREL,NZERO, 
     .R1BIT),NORMALIZE AND LOG MESSAGE C#870115:05:15#
C 
      INCLUDE #FSCOM::FS
C 
      DOUBLE PRECISION RNBITA,RNBITB,RSINA,RCOSA,RSINB,RCOSB,FNBIT
C 
      LOGICAL KSPLIT,KFIELD,KCOREL
C 
C  Normalize
C 
C 
      IF (.NOT.KCOREL) GOTO 110 
      CORREL = NZERO*100./R1BIT 
C 
110   FNBIT = 0.5*RNBITB
      RSIN = (RSINB-FNBIT)/FNBIT
      RCOS = (RCOSB-FNBIT)/FNBIT
      BRSIN = SIN(RSIN*PI/2)
      BRCOS = SIN(RCOS*PI/2)
      AMPB = 100.*SQRT(BRSIN*BRSIN+BRCOS*BRCOS) 
      PHASEB = -ATAN2(RSIN,RCOS)*180./PI
C 
      IF (.NOT.KSPLIT) GOTO 990 
      FNBIT = 0.5*RNBITA
      RSIN = (RSINA-FNBIT)/FNBIT
      RCOS = (RCOSA-FNBIT)/FNBIT
      ARSIN = SIN(RSIN*PI/2)
      ARCOS = SIN(RCOS*PI/2)
      AMPA = 100.*SQRT(ARSIN*ARSIN+ARCOS*ARCOS) 
      PHASEA = -ATAN2(RSIN,RCOS)*180./3.14159 
C 
C      - Calculate delay
C 
      IF (.NOT.KFIELD) GOTO 990 
      DLYAB = PHASEA-PHASEB 
      IF (DLYAB.LT.-180.) DLYAB = 360.+DLYAB
      IF (DLYAB.GT.180.) DLYAB = 360.-DLYAB 
      DLYAB = ABS(DLYAB/(FREQVC(IVC)-FREQVC(IVC2))) 
990   CONTINUE
C 
C     Call MESSG to log the calculated values 
C 
      CALL MESSG(KFIELD,KSPLIT,AMPA,PHASEA,AMPB,PHASEB,DLYAB,ITRK,
     . IVC,IVC2,KCOREL,CORREL)
      END 

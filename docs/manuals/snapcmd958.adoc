“VLBI Software DocumentationField SystemSNAP CommandsW. E. Himwich and
N. R. VandenbergNVI, Inc./GSFCOperations ManualNASA/Goddard Space Flight
Center Version 9.5

Space Geodesy Program December 1, 2001

*Table of Contents*

1.0 SNAP Command Syntax 1

____
1.1 Command Descriptions 1

1.2 Dual Recorder Support 4

1.3 MAT Module Functions 4

1.4 MCB Module Functions 5

1.5 Module and Detector Mnemonics 5
____

2.0 On-Line Help 8

3.0 SNAP Command Descriptions 9

____
antenna - direct line to the antenna 10

azeloff - az-el source position offset 11

bbcnn - baseband converter (VLBA, VLBA4 racks) 12

beam - set beamsize for flux command 14

bit_density - recording bit density (VLBA, VLBA4 drives) 16

break - stop the current procedure 17

cable - get the cable cal reading 18

cablediff - calculate cable change and sign 19

cablelong - get the cable cal long reading 20

cal - turn cal signal on or off 21

caltemp - set noise cal temperatures 22

check - modules to be checked by chekr 23

cont - continue schedule execution after a halt 24

data_valid - data valid flag control 25

date - display year and day-of-year 26

decode - Mark III decoder control and monitor 27

decode4 - Mark IV decoder low-level control 28

dqa - data quality analyzer (VLBA racks) 29

echo - echo communications 31

enable - enable recording heads (Mark III drives) 33

enable - enable recording heads (VLBA, VLBA4 drives) 34

enable - enable recording heads (Mark IV drives) 36

et - end recording on tape drive (all drives) 37

ff - fast-forward the tape (all drives) 38

fivept - five or more point source scan 39

flush - flush operator command stream 43

flux - set flux parameters for a source 44

form - formatter control and monitor (K4K3 racks) 47

form - formatter setup (Mark IV, VLBA4, K4MK4 racks) 51

form - formatter setup (VLBA racks) 53

form4 - Mark IV formatter low-level control 56

fsversion - get field system version 57

halt - halt execution of a schedule 58

hdcalc - stack calibration calculation (longitudinal drives) 60

hecho - head communications echo (longitudinal drives) 61

help or ? - display on-line help information 62

hpib - general HP interface bus communications 64

ifadjust - adjust IF attenuators (Mark IV racks) 65

if3 - IF3 distributor (Mark III, Mark IV racks) 68

ifdab - IF distributors, A & B (VLBA, VLBA4 racks) 70

ifdcd - IF distributors, C & D (VLBA, VLBA4 racks) 71

k4ib - K4 IB Communications 72

k4pcalports - phase cal extraction ports 74

label - enter Volume Serial Number (K4 drives) 75

label - enter tape VSN, check-label (longitudinal drives) 76

label - enter tape VSN and type (S2 drives) 78

list - display portion of currently active schedule 79

lo - LO frequencies (all racks) 80

locate - locate head stack position (longitudinal drives) 82

log - start a new log file 84

logout - set log output units 85

lvdt - positioning by LVDT voltage (longitudinal drives) 86

mat - general communications with ASCII Transceivers 88

matload - download 8080 code to MAT 89

mount - pre-mount tape (longitudinal drives) 90

mcb - MCB Communications 92

newtape - halt schedule until tape is mounted (all drives) 93

oldtape - unload tape to DMS (K4 drives) 94

onoff - on-off radiometry 95

onsource - get antenna pointing status 98

op - operator identification 99

op_stream - place command in operator stream 100

parity - check parity errors (longitudinal drives) 102

pass - positioning by pass number (longitudinal drives) 104

patch - IF patching (Mark III, Mark IV, all K4 racks) 108

pcal - set up/activate pcalr (Mark III racks and drives) 109

pcald - pcal (Mark III, Mark IV, VLBA, VLBA4 racks) 110

pcalform - specify tones for pcal extraction 112

pcalports - pcal output (Mark IV, VLBA4, K4MK4 racks) 113

peak - peak up tape reproduce power (longitudinal drives) 114

perr - sample parity errors (Mark III drives) 116

proc - open new schedule procedure library 117

radecoff - ra/dec source position offsets 118

rcl - RCL communications 119

rec - tape recorder control (S2 drives) 122

rec - tape recorder control (Mark III, Mark IV drives) 123

rec - tape recorder control (VLBA, VLBA4 drives) 124

rec - tape recorder control (K4 drives) 126

rec_mode - recording mode (S2 drives) 127

rec_mode - recording mode (K4 drives) 128

recpatch - recorder input patching (K4 drives) 129

repro - set up reproduce tracks (Mark III drives) 130

repro - set up reproduce tracks (VLBA, VLBA4 drives) 131

repro - set up reproduce tracks (Mark IV drives) 133

reset - reset the MAT bus 135

rvac - recorder vacuum (VLBA, VLBA4 drives) 136

rw - rewind tape (all drives) 137

rx - receiver monitor and control 138

save_file - save/retrieve string from a file 140

savev - save voltage position of stack (longitudinal drives) 141

scan_name - set scan name 143

schedule - start a new schedule file 144

select - select recorder 145

sff - super fast-forward (longitudinal drives) 146

source - source name and position 147

srw - super fast-rewind (longitudinal drives) 149

st - start tape recording (all drives) 150

stack - stack positioning by microns (longitudinal drives) 153

status - display current schedule status information 155

sy - send a system command 156

systracks - system track set-up (VLBA, VLBA4 drives) 157

tacd - Totally Accurate Clock (TAC) data 158

tape - tape recorder monitor and control (K4 drives) 160

tape - tape recorder (Mark III, Mark IV drives) 161

tape - tape positions (S2 drives) 162

tape - tape recorder parameters (VLBA, VLBA4 drives) 163

tapeform - specify tape format (longitudinal drives) 164

tapepos - position tape (Mark III, Mark IV drives) 165

terminate - end field system operation 166

ti - list time-scheduled commands 167

tnx - thanks for the error report 168

tpi - read back total power integrators, cal off 170

tpical - read total power integrators, cal on 171

tpzero - measure zero levels 172

track - display antenna tracking information 173

trackform - (Mark IV, VLBA, VLBA4, K4MK4 racks) 175

tracks - enables (Mark IV, VLBA, VLBA4, K4MK4 racks) 177

tsys - compute and display system temps 178

user_info - user info set and monitor (S2 drives) 180

vx - video converter set-up (all K4 racks) 181

vcbw - video converter bandwidth (all K4 racks) 183

vcif - video converter IF attenuators (all K4 racks) 184

vcnn - video converter (Mark III, Mark IV racks) 185

vxlo - video converter LO frequency (all K4 racks) 187

wakeup - ring bells to alert operator 188

worm - estimate inchworm velocities (longitudinal drives) 189

wvolt - head write voltage (VLBA, VLBA4 drives) 190

wx - get current weather parameters 191

xdisp - extended display 192

xlog - extended logging 193

xyoff - x-y source position offset 194
____

* +
*

*1.0 SNAP Command Syntax*

This manual contains detailed descriptions of the SNAP commands
available in the Field System. Each command is described on a separate
page. Commands are ordered alphabetically.

Please refer to the *SNAP Language* manual for the specifications of the
language itself, including a description of control commands and general
syntax.

The subsections of this first section contain reference information that
applies to many commands.

*1.1 Command Descriptions*

In this manual, each command is described on a separate page. For each
command, the information is provided:

command - function (equipment)

____
The command name and a few words that describe its function are given at
the top of each page. If the command is restricted to certain types of
equipment, that information is given in parentheses. For example, the
**bbc**__nn__ command is applicable only to *VLBA* and *VLBA4* racks,
and the title will include the words *(VLBA, VLBA4 racks)*. Many
commands don’t have restrictions because they are general FS commands,
such as *schedule* or *echo*. Commands that interact with the equipment
may be general as well. This may be because the command is in fact
implemented for all types of equipment. In fact some commands that have
no restrictions have very limited functionality beyond some specific
equipment configurations. Except for one command: *pcal*, all commands
are restricted by either the rack or the recorder that is used, but not
by both (this will be corrected for *pcal* at a later date). All of the
currently existing rack restrictions are listed below:
____

*K4K3 racks*

*Mark III racks*

*Mark III, Mark IV racks*

*Mark III, Mark IV, VLBA, VLBA4 racks*

*Mark III, Mark IV, all K4 racks*

*Mark IV, VLBA4, K4MK4 racks*

*Mark IV, VLBA, VLBA4, K4MK4 racks*

*VLBA racks*

*VLBA, VLBA4 racks*

*all K4 racks*

*all racks*

____
These restrictions all correspond to rack types that can be specified in
equip.ctl, except for the restrictions involving K4 racks: *all K4*,
*K4K3*, *K4MK4*, *VLBA*, and in addition: *all* racks. For the *all K4*
restriction, all K4 types are included irrespective of K4 VC sub-type
and including all K4K3 and K4MK4 types irrespective of K4 VC sub-types.
The *K4K3* restriction includes all K4 racks with a K3 formatter,
irrespective of K4 VC sub-type. The *K4MK4* restriction includes all K4
racks with a Mark IV formatter, irrespective of K4 VC sub-type . The
*VLBA* restriction includes both the vlba and vlbag rack types. The
*all* restriction indicates that this command works for all racks, i.e.,
the only rack for which it does not work is none.

All of the currently existing recorder restrictions are listed below:
____

*K4 drives*

*Mark III drives*

*Mark III, Mark IV drives*

*Mark IV drives*

*VLBA, VLBA4 drives*

*S2 drives*

*all drives*

*longitudinal drives*

____
These restrictions generally include more than one recorder sub-type
that can be specified in equip.ctl. The *K4* restriction includes all K4
drive types with and without the DMS. The *Mark IV* restriction includes
both the mk4 and mk4b sub-types. The *VLBA* restriction include vlba,
vlba2, and vlbab sub-types. The *all* restriction indicates that this
command works for all recorders, i.e., the only recorder type for which
it does not work is none. The *longitudinal* restriction indicates that
it includes all of Mark III, Mark IV, VLBA (including VLBA2), and VLBA4
recorders. All other restrictions: *Mark III*, *VLBA4*, and *S2* all
apply to just those simple types.
____

Syntax: **command=**__list of parameters__

____
The command syntax is shown first. The command name and the list of
parameters are shown. The various forms of the command are described in
the Comments section. Any combination of upper case and lower case
letters may be used in typing a command. All commands are converted to
lower case before they are processed.
____

Response: command/_list of response parameters_

____
The response (if any) to the command is given with the list of
parameters appearing in the response. Normally the response to a command
has an identical list of parameters to the command itself, followed by
any monitor parameters. All responses to commands are displayed in lower
case letters only.
____

Settable parameters:

____
This part of the page describes each parameter in the “Syntax” line that
can be specified by the operator. The allowable range of values for each
parameter is given. The default value, if any, is given. A default value
is obtained by entering a null for a particular parameter. The parameter
value specified in the previous issuing of this command may be obtained
by entering *** instead of a value. Entering *?* as the first parameter
results in a response containing the parameters specified in the most
recent issuance of this command. If any parameter value is found to be
invalid, command interpretation stops at that point and an error message
is generated.
____

Monitor-only parameters:

____
Each parameter in the “Response” that does not appear in the “Syntax” is
described in this section. These are parameters that cannot be specified
by the operator, but are monitored or calculated by the Field System.
____

Comments:

____
The final section of the page provides further descriptions of the way
in which the command works. These comments often describe the algorithm
that was used in implementing the command, and outline specific
conditions under which the command should be used.
____

*1.2 Dual Recorder Support*

The FS supports sequential recording on two recorders (or drives).With
the exception that K4 and S2 recorders are only supported as recorder
number 1, any and all recorders (including none) can be used either as
recorder 1 or recorder 2. When the FS operates in dual recorder mode,
all commands that refer to recorders come in two forms. They either have
a numeral *1* or a numeral *2* appended to the normal single recorder
version of the command depending on whether they refer to recorder 1 or
recorder 2. The single recorder version of the commands are the ones
documented in the SNAP command manual pages. As an example, if recorder
1 is a VLBA drive and recorder 2 is Mark III drive, the tape command
that refers to recorder 1 would be the VLBA drive tape command with a
*1* appended: *tape1*. Likewise for recorder 2, the tape command would
be the Mark III drive tape command with a *2* appended: *tape2*. For all
tape recorder commands (those that have some drive restriction specified
in their command -function title line of the SNAP command description
page) a numeral at the end distinguishes which drive they refer to.

There are also some rack oriented commands that need to know which
recorder is in use. In addition the monit and chekr programs need to
know which recorder is in use. The *select* command allows the drive
being used for data recording to be specified. drudg does this
automatically for schedules that use two drives. Please note that the
recorder that is not being used for recording can be manipulated by the
operator using the appropriate commands to complete tasks such as
prepassing and mounting the next tape. The *mount1* command is not
available for K4 and or S2 recorders. All other aspects of two recorder
operation with a K4 or S2 recorder as recorder 1 are implemented.

If only one tape drive is used, the drive type of either recorder 1 or
recorder 2 in equip.ctl must be none. In this case all of the recorder
specific commands are used without a numeral suffix and they refer to
the recorder that is not specified as none. This appears as normal one
tape drive operation as used in older versions of the FS, except that it
is possible to select which of two drives will be used by just changing
the equip.ctl file and restarting the FS. Please note that the *mount*
command is only available for dual recorder configurations, i.e., the
version without a numeral appended is never available.

*1.3 MAT Module Functions*

The phrase “MAT module functions available” in the comments section
means that the following additional types of parameters may be used.
This is available for those Mark III modules that have MAT
communications.

__module__**=test/reset** Issues an MAT reset to this module only.

__module__**=alarm** Resets the alarm on this module.

*1.4 MCB Module Functions*

The following syntax is valid for those commands which state that “MCB
module functions are available” in the Comments section of the command
description.

__module__**=addr** Sends the module its base address and length. This
sets the module's MCB address space.

__module__**=test** Checks the module’s address. An error message in
response to this command indicates that the module needs to be sent its
address space.

*1.5 Module and Detector Mnemonics*

The Field System makes use of mnemonics for Mark III, Mark IV, S2, VLBA,
and VLBA4 equipment in SNAP commands. No mnemonics are defined for K4
modules or detectors at this time. Displays of mnemonics are always two
characters, but many forms of module names are allowed when entering
commands. This is a convenience for the operator who does not have to
remember the exact two-character mnemonic.

The SNAP commands that pertain to total power radiometry allow the
operator to specify different detectors in the equipment. Detectors are
specified by using a mnemonic. When the Field System displays mnemonics
they are always two characters, but different forms of the detector
names are allowed when entering commands. This is a convenience for the
operator who does not have to remember the exact two-character mnemonic.

Valid mnemonics for modules and detectors are listed in the tables on
the following pages.

The *u5* and *u6* detector mnemonics are used for station specific
detectors that implemented via the antcn program. Currently they are not
completely supported. They may be used in the *fivept* and *onoff*
commands for all rack types (including none). They may also be use in
the *tpi*, *tpical*, *tpzero*, and **tsys**__X__ commands for +++rack
types other than+++ Mark III, Mark IV, VLBA, and VLBA4 .

[width="100%",cols="45%,14%,41%",options="header",]
|===
|Field System Module Mnemonics | |
|Module |Standard mnemonic a|
Other allowed mnemonics

(* indicates mnemonics available only when only one drive is defined)

|Mark III modules | |

|video converters |**v**__n__, __n__=*1-f* |**vc**__n__, __n__=*1-15,
1-f*

|IF distributor |*if* |*ifd*

|formatter |*fm* |*form*

|tape transport 1 |*r1* |*rec1*, *tape1*, *rc**, *tp**

|tape transport 2 |*r2* |*rec2*, *tape2*, *rc**, *tp**

|high density heads transport 1 |*h1* |*hd**

|high density heads transport 2 |*h2* |*hd**

|S/X receiver |*rx* |

|IF3 distributor |*i3* |*if3,ifd3*

|S2 modules | |

|tape recorder 1 |*r1* |*rec1*, *tape1*, *rc**, *tp**

|VLBA modules | |

|baseband converters |**b**__n__, __n__=*1-f* |**bc**__n__,
**bbc**__n__, __n__=*1-15, 1-f*

|IF distributor 1, channels A&B |*ia* |*ifa*, *ifb*, *ib*, *ifab*

|IF distributor 2, channels C&D |*ic* |*ifc*, *ifd*, *ic*, *ifcd*

|formatter |*fm* |*form*

|tape recorder 1 (except heads) |*r1* |*rec1*, *tape1*, *rc**, *tp**

|tape recorder 1 (except heads) |*r2* |*rec2*, *tape2*, *rc**, *tp**

|high density heads recorder 1 |*h1* |*hd**

|high density heads recorder 2 |*h2* |*hd**

|Groups of modules | |

|all modules which have been set up | |*all*

|odd video or baseband converters | |*odd*

|even video or baseband converters | |*even*
|===

[width="100%",cols="43%,15%,42%",options="header",]
|===
|Field System Detector Mnemonics | |
|Detector |Standard mnemonic |Other allowed mnemonics

|Mark III detectors | |

|formatter selected VCs |*formvc* |

|IFs feeding formatter selected VCs |*formif* |

|video converters |**v**__n__, __n__=*1-f* |**vc**__n__,
__n__=*1-15,1-f*

|IF distributor channel 1 |*i1* |*if1*

|IF distributor channel 2 |*i2* |*if2*

|IF3 distributor |*i3* |*if3*

|S2 detectors | |

|none | |

|VLBA detectors | |

|formatter selected BBCs |*formbbc* |

|IFs feeding formatter selected BBCs |*formif* |

|baseband converters, USB |__n__**u**, __n__=*1-f* a|
**b**__n__*u*, **bc**__n__*u*, **bbc**__n__*u*,

__n__=*1-15,1-f*

|baseband converters, LSB |__n__**l**, __n__=*1-f* a|
**b**__n__*l*, **bc**__n__*l*, **bbc**__n__*l*,

__n__=*1-15,1-f*

|IF distributor 1, channel A |*ia* |*ifa*

|IF distributor 1, channel B |*ib* |*ifb*

|IF distributor 2, channel C |*ic* |*ifc*

|IF distributor 2, channel D |*id* |*ifd*

|Station Dependent Detectors | |

|Detector 1 (IF “chain” 5) |*u5* |

|Detector 2 (IF “chain” 6) |*u6* |

|Groups of detectors | |

|all non-station dependent detectors | |*all*

|all odd video converters | |*odd*

|all even video converters | |*even*

|all odd baseband converters USB | |*oddu*

|all odd baseband converters LSB | |*oddl*

|all even baseband converters USB | |*evenu*

|all even baseband converters LSB | |*evenl*
|===

*2.0 On-Line Help*

The entire documentation for each command is available as on-line help
in the Field System. The *help* command will display the information for
a specified command on the screen during Field System operations. The
information that is listed is identical to that found on the pages of
this manual.

Refer to the page with the *help* command description.

*3.0 SNAP Command Descriptions*

*antenna - direct line to the antenna*

**Syntax: antenna=**__message,message, ...__

Response:antenna/_response,response, ..._

Settable parameters:

_message_ message to be sent to the antenna in the exact form required
by the pointing software. Each message between commas will be sent
separately.

Monitor-only parameters:

_response_ response of the antenna to the message. This response is
either ack or an error message sent by the antenna.

*azeloff - az-el source position offset*

Syntax:**azeloff=**__az,el__

Response:azeloff/_az,el_

Settable parameters:

_az_ Offset in azimuth, in numeric angle/degrees format. Response is in
decimal degrees.

_el_ Offset in elevation, in numeric angle/degrees format. Response is
in decimal degrees.

Monitor-only parameters: none

Comments:

The antenna will move to the offset position when this command is
issued. To return to the on-source position, issue this command with
zero offsets.

*bbcnn - baseband converter (VLBA, VLBA4 racks)*

Syntax:**bbc**__nn__**=**__freq,ifsource,bwu,bwl,avper,gainmode,gainu,gainl__

Response:bbc__nn__/_freq,ifsource,bwu,bwl,avper,gainmode,gainu,gainl,_

_lock,USBpwr,LSBpwr,serno,err_

_nn_ is the BBC index number corresponding to its position in the rack,
*01* to *14*. Not all racks have all BBCs.

Settable Parameters:

_freq_ L.O. frequency in MHz, between *450.00* and *1050.00*, inclusive.
No default. This frequency range is greater than the normal range over
which the BBC is specified to lock (500 to 1000 MHz) to allow for
testing.

_ifsource_ I.F. input source, one of *A, B, C, D*. No default.

_bwu_ Bandwidth for USB in MHz. One of *0.0625*, *0.125*, *0.25*, *0.5*,
*1*, *2*, *4*, *8*, *16*. Default *2*.

_bwl_ Bandwidth for LSB in MHz. One of *0.0625*, *0.125*, *0.25*, *0.5*,
*1*, *2*, *4*, *8*, *16*. Default _bwu_.

_avper_ Averaging period in seconds for TPI. May be *0*, *1*, *2*, *4*,
*10*, *20*, *40*, or *60* seconds. A value of *0* results in 1/80 sec
averaging time. Default *1*. The averaging period is common to both
upper and lower sideband. The averaging period is synchronous with the 1
pps.

_gainmode_ Gain control mode, either *agc* or *man*. Use *agc* (default)
for automatic gain control, *man* to set a gain value. The gain mode is
common to both sidebands.

_gainu_ Gain value for USB in dB. This is a valid parameter only if
_gainmode_ is *man*. May be any value between *-18.0* dB and *12.0* dB.
Step size is linear in voltage. The actual gain setting is reported as a
monitor value and may go as low -99.99 dB. Default is the current USB
gain level. This parameter is currently only available as a monitor-only
parameter.

_gainl_ Gain value for LSB in dB. This is a valid parameter only if
_gainmode_ is *man*. May be any value between *-18.0* dB and *12.0* dB.
Step size is linear in voltage. The actual gain setting is reported as a
monitor value and may go as low as -99.99 dB. Default is the current LSB
gain level. This parameter is currently only available as a monitor-only
parameter.

Monitor-only Parameters:

_lock_ L.O. lock status, lock or unlock.

_USBpwr_ Power in upper sideband in counts. Range 0 to 65535, nominal
operating level is 16000.

_LSBpwr_ Power in lower sideband in counts. Range 0 to 65535, nominal
operating level is 16000.

_serno_ Module serial number, decimal.

_err_ Module timing error indication, 1pps or no_1pps.

Comments:

This command sets up the baseband converters in the VLBA rack. This
command is analogous to the Mark III vc__nn__ commands.

Unlike the output of most other commands which have no embedded blanks,
the output for this command is organized in columns for easy reading of
gains and power levels.

MCB module functions are available. See section 1.0 of this manual.

The power-up setting for the gain control is manual control with a value
of +6 dB. If the IF level is nominal coming in to the BBC then the
operating level for the AGC is +6 dB. Normal setting during an
experiment is *agc*.

To hold the gain at a given value, switch to *man* gain control. The
gain value will stay at the value it had when the AGC was changed to
*man*. Then use *agc* to return to AGC control. This method is used for
radiometry by onoff and fivpt.

On terminals wired like the geodetic (VLBAG) racks, the following table
shows which BBCs have which IF inputs available. Essentially all VLBA
racks controlled by the FS are wired in this way.

[width="100%",cols="50%,50%",options="header",]
|===
|Geodetic (VLBAG) Rack BBC-to-IF input availability |
|BBC numbers |IF input channels
|1, 2 |A, B, C, D
|3, 4, 5, 6, 7, 8 |A, C
|9, 10, 11, 12, 13, 14 |B, D
|===

CAUTION: This command does not check whether you have specified a valid
IF source for the BBC.

*beam - set beamsize for flux command*

Syntax:**beam1=**__angle__

**beam2=**__angle__

**beam3=**__angle__

**beama=**__angle__

**beamb=**__angle__

**beamc=**__angle__

**beamd=**__angle__

**beam5=**__angle__

**beam6=**__angle__

Response:beam1/_angle_

beam2/_angle_

beam3/_angle_

beama/_angle_

beamb/_angle_

beamc/_angle_

beamd/_angle_

beam5/_angle_

beam6/_angle_

Settable parameters:

_angle_ full-width half maximum beam size, displayed in decimal degrees
of arc.

Monitor-only parameters: none

Comments:

The *beam1*/*2*/*3* and *beama*/*b*/*c*/*d* commands are applicable for
Mark III (and Mark IV) and VLBA (and VLBA4) systems, respectively. The
command pairs *beam1/a*, *beam2*/*b*, and *beam3*/*c* are synonymous.

The beam size for the sky frequency for each IF channel may be specified
with these commands. The commands *flux1*/*2*/*3* and
*fluxa*/*b*/*c*/*d* use the sizes specified as *beam1*/*2*/*3* and
*beama*/*b*/*c*/*d*, respectively, to calculate the apparent flux.

There is no default for the beam size unless the appropriate IF
distributor command (*ifd* or *if3* for Mark III (and Mark IV) systems,
*ifab* or *ifcd* for VLBA (and VLBA4) systems) and the *lo* commands
have been issued. There is no default for *beam5*/*6*, see below for
more detail. If these commands have been issued, then the beam size will
default to the beam size calculated from the appropriate LO frequencies
and the antenna diameter found in the antenna.ctl control file. The
formula is:

beam size (radians) = 1.05*c/(freq*diaman)

Issuing a **beam**__x__*=...* command will change the calculated values
of the **flux**__x__ command to invalid quantities. Reissue a correct
**flux**__x__*=...* command to recalculate fluxes.

The *beam5*/*6* commands are used for station specific detectors *u5*
and *u6*. They do not correspond to a standard IF channel, but instead
to whatever IF is being supplied to the corresponding station detector.

*bit_density - recording bit density (VLBA, VLBA4 drives)*

Syntax:**bit_density=**__bpi__

Response:bit_density/_bpi_

Settable parameters:

_bpi_ Bit density in bits per inch.

Monitor-only parameters: none

Comments:

This command specifies the total bit density including all header and
parity bits. The specified bit density and the formatter set-up
determine the default speed for the *st* command.

The bit density can be set to any positive value less than 2^32^. Useful
values for standard density are *33333* for Mark III/IV data-replacement
format and *34020* for the VLBA non-data-replacement format; for high
density, *56250* Mark III/IV data-replacement format and *56700* for the
VLBA non-data-replacement format.

When calculating speeds from bit densities it is useful to remember that
for a nominal per track bit data rate of 4 MBit/sec, the Mark III
data-replacement format actually generates 4.5 MBit/sec and the VLBA
non-data-replacement format generates 4.536 MBit/sec.

*break - stop the current procedure*

Syntax:*break*

Response:none

Comments: The currently-executing procedure is stopped after the current
command is finished. The procedure stack is popped to the next higher
level. This is an immediate execution command.

*NOTE: This command is not implemented.*

* +
*

*cable - get the cable cal reading*

Syntax:**cable=**__message__

Response:cable/_value_

Settable parameters:

_message_ ASCII character to be sent to counter.

Monitor-only parameters:

_value_ cable cal reading

Comments:

When issued with no parameters this command sends a request for a
reading to the HPIB counter which is connected to the phase cal cable
measurement system.

The ibad.ctl control file must contain an entry with mnemonic CA and the
device name.

If your counter returns a non-standard response, you can control the
parsing of the response by placing the uncommented line below in your
stcmd.ctl file:

*command seg sbpa bo eq

cable qkr 13xx 01 FFFFFF

where xx is the number of the character position to begin decoding at.
The first character position is counted as position 1. If the value of
xx is 00 decoding will begin at the first character from the left that
could be part of a number in scientific notation (“0123456789.+-Ee”).
The FS uses a value of 04 for xx by default.

Please see also the *cablediff* and *cablelong* commands.

*cablediff - calculate cable change and sign*

Syntax:*cablediff*

Response:cablediff/_change,sign_

Settable parameters: None

Monitor-only parameters:

_change_ The absolute value of the difference between the last cable and
cablelong measurements, in seconds. The value is printed in scaled
scientific notation so that the digit before the decimal point is
microseconds. If the value is greater than 1.0 seconds the scaling is
different.

_sign_ The sign of the difference between the last cable and cablelong
measurements absolute value of the difference between the last cable and
cablelong measurements, corresponding to _change_. Values are *+*, *-*,
or the value *0* if change is less than 0.05 microseconds.

Comments:

This command is used to automatically calculate the change in the cable
counter reading when a short cable extension is added to check the
performance of the system and sign of the change. This command provides
a standard format for recording the results in the log.

Please see also the *cablediff* and *cablelong* commands.

*cablelong - get the cable cal long reading*

Syntax:**cablelong=**__message__

Response:cablelong/_value_

Settable parameters:

_message_ ASCII character to be sent to counter.

Monitor-only parameters:

_value_ cable cal long reading

Comments:

When issued with no parameters this command sends a request for a
reading to the HPIB counter which is connected to the phase cal cable
measurement system.

The *cablelong* command is identical to the *cable* command. It is
intended to be used for the “long” cable measurement when checking the
sign of the cable counter before and after an experiment. If *cablelong*
is used for the measurements, auto-scaled plots of the cable/ output
will have reasonable resolution. It also provides a “long” cable
measurement for *cablediff* to use to calculate the change and sign.

The ibad.ctl control file must contain an entry with mnemonic CA and the
device name.

If your counter returns a non-standard response, you can control the
parsing of the response by placing the uncommented line below in your
stcmd.ctl file:

*command seg sbpa bo eq

cablelong qkr 76xx 01 FFFFFF

where xx is the number of the character position to begin decoding at.
The first character position is counted as position 1. If the value of
xx is 00 decoding will begin at the first character from the left that
could be part of a number in scientific notation (“0123456789.+-Ee”).
The FS uses a value of 04 for xx by default.

Please see also the *cable* and *cablediff* commands.

*cal - turn cal signal on or off*

Syntax:**cal=**__on/off__

Response:none

Settable parameters:

_on/off_ *on* to turn cal on, *off* to turn off. No default.

Monitor-only parameters: none

Comments: This command sets a VHF switch on the HPIB. The ASCII message
is A1 to turn cal on, A2 to turn cal off. The ibad.ctl control file must
contain an entry with the mnemonic CL and the device name.

*caltemp - set noise cal temperatures*

Syntax:**caltemp1=**__temp__

____
**caltemp2=**__temp__
____

**caltemp3=**__temp__

____
**caltempa=**__temp__

**caltempb=**__temp__
____

**caltempc=**__temp__

**caltempd=**__temp__

**caltemp5=**__temp__

**caltemp6=**__temp__

Response:caltemp1/_temp_

____
caltemp2/_temp_
____

caltemp3/_temp_

____
caltempa/_temp_

caltempb/_temp_
____

caltempc/_temp_

caltempd/_temp_

caltemp5/_temp_

caltemp6/_temp_

Settable parameters:

_temp_ temperature of cal signal, in degrees K.

Monitor-only parameters: none

Comments:

Calibration temperatures, for either Mark III (and Mark IV) or VLBA (and
VLBA4) systems, may be specified with the *caltemp1*/*2*/*3* and
*caltempa*/*b*/*c*/*d* commands, respectively. The commands
*tsys1*/*2*/*3* and *tsysa*/*b*/*c*/*d* use the temperatures specified
as *caltemp1*/*2*/*3* and *caltempa*/*b*/*c*/*d* respectively. The
command pairs *caltemp1*/*a*, *caltemp2*/*b*, and *caltemp3*/*c* are
synonymous.

The *caltemp5/6* commands are used for defining the calibration
temperatures used with station dependent detectors *u5* and *u6*.

*check - modules to be checked by* chekr

Syntax:**check=**__list__

Response:check/_list_

Settable parameters:

_list_ The list of mnemonics for modules to be checked. Only mnemonics
for the equipment identified in the equip.ctl control file are valid in
this command. Standard module mnemonics are allowed. If the list of
modules to be checked is empty, then chekr will not check any modules.

Monitor-only parameters: none

Comments:

As modules are set up by SNAP commands, they are automatically added to
the list of modules being checked by chekr. This command can be used to
remove and reinstate modules on the list.

The entire list of modules to be checked may always be specified by
listing the appropriate modules. However, the list of modules already
being checked may also be modified by entering *** as the first
parameter, followed by the list of modules to be added or deleted from
the existing list. Deletion is indicated by a leading minus sign. For
example,

*check=*,ifd,-rc*

will cause the IF distributor to be added to the list of modules being
checked and the tape transport to be removed from the list, while the
check status of all other modules remain unchanged.

If no modules are currently being checked then the word disabled is
displayed.

The displayed list of modules always consists of the standard
2-character mnemonic, i.e. the ones listed on the reference page at the
front of this manual. Station-specific mnemonics may be used for
station-specific modules.

Note: In the current Field System version, for VLBA systems, the head
position is checked but only some of the DAR module and REC functions
are checked.

*cont - continue schedule execution after a halt*

Syntax:cont

Response:none

Parameters: none

Comments:

This command must be issued after a *halt* to get the schedule going
again. It has no effect if no *halt* was actually issued. This is an
immediate execution operator command.

*data_valid - data valid flag control*

Syntax:**data_valid=**__record__,_playback_

Response:data_valid/_record,playback_

Settable parameters:

_record_ Flag is *on* (default) or *off*.

_playback_ Playback enable is *use* (default) or *ignore*. S2 recorders
only.

Monitor-only parameters: None.

Comments:

For S2 recorders, this command can be used to set and monitor the value
of the data valid and playback enable flags written to the tape.

For non-S2 recorders, this command just sets an internal software flag
in the FS indicating that data is valid. Depending on how the pcald has
been set-up this may turn automatic phase-cal extraction on or off.

For all equipment types, this command is used to indicate in the log
when the data is expected to valid based on the slewing algorithms of
the scheduling program.

*date - display year and day-of-year*

Syntax:*date*

Response:date/_year_,_doy_

Settable Parmeters: None

Monitor-only Parameters:

_year_ 4 digit year

_doy_ Day of year, 1-366

Comments:

This command is implemented by a special logging function assure that
the year and day-of-year are consistent, i.e., that they both come from
the same year.

*decode - Mark III decoder control and monitor*

Syntax:**decode=**__channel,mode,counter__

Response:decode/_channel,mode,data_

Settable parameters:

_channel_ Channel *a* (default) or *b* to be decoded.

_mode_ Type of data to be read. Choices are **aux**illiary data,
**syn**ch, *crc* word, *time*, *data* bits, or **err**or counts
(default).

_counter_ Error counter control: *byte* (default), *frame*, *reset*.

Monitor-only parameters:

_data_ Data returned according to mode specified in control command.

____
err sspppppp (s=synch errors, p=parity errors) Note that monitored error
values are error counts, not rates.
____

syn 8 - character synch word

____
time two words: ydddhhmm and sssssccc, where ccc = checksum

data three sets of 32 data bits

aux two sets of 8 characters of auxiliary data

crc pass/fail for CRC check
____

Comments:

MAT module functions available. See section 1.0 of this manual.

CRC check is reliable only in bypass reproduce mode.

This command is for the old style Mark III decoder which may be
installed in any of the Mark III, Mark IV, or VLBA4 rack types, but this
command will work decoder if it is installed with other rack types as
well.

Most Mark III drives cannot decode in double speed, so this command will
probably fail in this mode. Old VLBA drives that use the Mark III bit
synchronizer may have this problem also.

*decode4 - Mark IV decoder low-level control*

Syntax:**decode4=**__command__

Response:decode/_response_

Settable parameters:

_command_ any legal command for Mark IV decoder. The terminating “$”
character is appended before sending the command.

Monitor-only parameters:

_data_ response to _command_.

Comments:

This command is a simple feed-through to the Mark IV decoder. No
checking is done on the command, no action is taken for any response.
This form of the command is temporary while it is determined what
standard parameters are desired.

The _command_ is sent to the MAT bus just as if the operator had used
the *mat* command. No modifications are made before the command is sent
on the bus.

This command is for the new Mark IV decoder which may be installed in
any of the Mark III, Mark IV, or VLBA4 rack types, but this command will
work decoder if it is installed with other rack types as well.

*disc_check - check Mark V recorded data*

Syntax:*disc_check*

Response:disc+++_+++check/_format,tracks,time,pos,period,??,_

Settable parameters:

_command_ any legal command for Mark IV decoder. The terminating “$”
character is appended before sending the command.

Monitor-only parameters:

_format_ Data format: mark4, vlba, test, or ?

_tracks_ Track mode: 8, 16, 32, 64

_time_ Data time tag read from first encountered header

_pos_ Byte position of header

_period_ Track frame period (seconds)

?? unknown

Comments:

If _format_ is ?, the remaining fields are not valid.

This command sets the read pointer 1 mega-byte before the current write
pointer location and attempts to the use the low-level Mark 5 data_check
command. The displayed parameters are the output of is command. A future
version will allow the position of the read pointer to be set
explicitly, but this can be done with a *mk5* SNAP command. To check at
positon “_pos_”, use:

*mk5=play off* _pos_,data_check?

*disc_end - end Mark V recording*

Syntax:*disc_end*

Response:none

Comments:

Stops recording.

*disc_pos - Mark V byte position pointers*

Syntax:*disc_pos*

Response:disc_pos/_write_pointer, read_pointer_

Monitor-only parameters:

_write_pointer_ Current write pointer byte position

_read_pointer_ Current read pointer byte position

Comments:

This command reports the current position of the write and read
pointers.

This command sets the read pointer 1 mega-byte before the current write
pointer location and attempts to the use the low-level Mark 5 data_check
command. The displayed parameters are the output of is command. A future
version will allow the position of the read pointer to be set
explicitly, but this can be done with a *mk5* SNAP command. To check at
positon “_pos_”, use:

*mk5=play off* _pos_,data_check?

*disc_serial - Mark V byte position pointers*

Syntax:*disc_serial*

Response:disc_pos/_serial1,serial2,...,serial16,_

Monitor-only parameters:

__serialX__` Serial number of disc _X_, null if no disk is installed in
that slot

Comments:

This command reports the serial numbers of the installed disks.

*disc_start - Start Mark V recording*

Syntax:**disc_start=**__on,scan_name__

*disc_start*

Response:disc_start/_on/off_

Settable Parameters:

_on_ Turn recording on, only *on* is allowed

_scan_name_ String of up to 16 characters, default is current scan name
defined by the *scan_name* SNAP command

Monitor-only parameters:

__on/off__` on (recording) or off (nor recording)

Comments:

This command may be given only with either one parameter *on* to start
recording or with no parameter to monitor whether recording is on or
off. To stop recording use the *disc_end* SNAP command.

Normally *scan_name* is taken by default as the scan name defined by the
most recent scan_name=... command. The *scan_name* parameter allows the
value used for this recording to over-riddden. It does not change the
actual scan name. The scan is sent to the Mark 5 to identify the scan
being recorded.

*dqa - data quality analyzer (VLBA racks)*

Syntax:**dqa=**__duration__

**vdqa=**__duration__

Response:dqa/_duration,Asampler,Atrack,Aparity,Aresync,Anosync,Acalamp,_

_Acalphs,Bsampler,Btrack,Bparity,Bresync,Bnosync,Bcalamp,Bcalphs_

vdqa/_duration,Asampler,Atrack,Aparity,Aresync,Anosync,Acalamp,_

_Acalphs,Bsampler,Btrack,Bparity,Bresync,Bnosync,Bcalamp,Bcalphs_

Settable Parameters:

_duration_ The duration of the analysis in seconds. Default *1* sec, max
*5* seconds. Set up the command with **dqa=**__duration__. Subsequent
commands *dqa* will make a measurement. For each measurement, the DQA
module is started, allowed to run for _duration_ and then stopped. The
accumulated counters are then read out.

Monitor-only Parameters:

_Asampler_ Sampler for the A channel signal, 0 if unknown or in the form
_nnsd_, __nn__=baseband converter number, __s__=sideband u or l,
__d=__data sample bit _m_ or _s_.

_Atrack_ Track with the A channel signal on it, as set up in the *repro*
command.

_Aparity_ Measured parity error rate for A channel, per Mbyte.

_Aresync_ Measured resync rate for A channel, per Mbyte.

_Anosync_ Measured nosync rate for A channel, per Mbyte.

_Acalamp_ Measured phase calibrator amplitude for A channel, in units of
voltage percentage.

_Acalphs_ Measured phase calibrator phase for A channel, degrees.

_Bsampler_ Sampler of the B channel signal, 0 if unknown or in the form
_nnsd_, __nn__=baseband converter number, __s__=sideband u or l,
__d=__data sample bit _m_ or _s_.

_Btrack_ Track with the B channel signal on it, as set up in the *repro*
command.

_Bparity_ Measured parity error rate for B channel, per Mbyte.

_Bresync_ Measured resync rate for B channel, per Mbyte.

_Bnosync_ Measured nosync rate for B channel, per Mbyte.

_Bcalamp_ Measured phase calibrator amplitude for B channel, in units of
voltage percentage.

_Bcalphs_ Measured phase calibrator phase for B channel, degrees.

Comments:

The data quality analyzer (DQA) is a formatter sub-module. It measures
parity, re-synch, and no-synch errors and extracts phase cal (Mark
III/IV format only). The *dqa* command is comparable to the Mark III
decode command plus the capabilities of program pcalr. For readback
parity checks, you would normally use the
*check*(**80**|*135*)(**f**|*r*) procedures.

Channels A and B are the recorded tracks as specified in the *repro*
command. To measure parity errors, the tape should be moving (use the
*st* command) with record disabled. The phase cal can be measured in
bypass or reproduce mode. For bypass measurements, the group enables
must be turned on with the *enable* command, and the general record
enable must be turned on with the *st* command.

The formatter tape clock (a combination of the sample rate, fan-out or
fan-in, and format) must be specified with the **form=**__...__ and
agree with reproduce rate before the DQA command will work.

The sampler reported for a track is determined from the set-up of the
cross-point switch by the *form* command. If barrel-rolling and/or
fan-in or -out are enabled, the displayed source will be the nominal
source for that track, but may not actually correspond to the data
analyzed. If fan-out is being used in a system with an analog
cross-point switch, the reported source will be zero for tracks beyond
the first in a fan-out group.

Phase-cal results will be meaningless for the following cases: fan-out,
fan-in, barrel-rolling enabled, VLBA format, tracks that contain
magnitude bits.

Normally, this command is used only with VLBA racks. However if the DQA
module is connected it can be used as the *vdqa* command with any type
of rack, including VLBA and VLBA4. The **vform=**__...__ command must be
used to specify the formatter tape clock if the rack type is not VLBA4.
The *vdqa* and *vform* comands are particular useful for writting rack
independent procedures for stations that switch between VLBA and VLBA4
rack types.

The output from this command is organized in columns for easy reading
when there are no errors, i.e., in bypass mode.

*echo - echo communications*

Syntax:**echo=**__set__

Response:none

Settable parameters:

_set_ *on* to turn echo on, *off* to turn off (default). Any external
communications are echoed in the log display window.

Monitor-only parameters: none

Comments:

Immediate execution operator command for MAT and/or MCB and/or RCL
communications and, at some stations, antenna communications also.

For MCB communications, each byte is displayed as

bytes sent to the MCB [_nxx_]

bytes received from the MCB <__nxx__>

where _n_ is normally a blank. _n_ is + for the first byte of the
address when data is being written to the module. The address or data is
_xx_, represented as two hex characters. MCB control bytes are displayed
with special 3-letter mnemonics:

[SYN] hex 16 synchronization byte

<ACK> hex 06 acknowledge

<NAK> hex 15 not acknowledge

<DC1> hex 11 data control 1

<DC2> hex 12 data control 2

For MAT communications, most of the data bytes are printable ASCII
characters which are displayed simply as the character. The unprintable
ASCII characters are displayed as [_xxx_], where _xxx_ is shown in the
table below. The “del” character (127) is displayed as [del].

0 1 2 3 4 5 6 7 8 9

nul soh stx etx eot enq ack bel bs ht

1 lf vt ff cr so si dle dc1 dc2 dc3

2 dc4 nak syn etb can em sub esc fs gs

3 rs us

For RCL communications, each piece of information is displayed as

information sent to the RCL [_xxx_]

information received from the RCL <__xxx__>

where _xxx_ is a representation of the data in an appropriate format.
Information going to the RCL is always displayed in order of: the name
of the command being sent followed by the parameters for that command.
Information returned by the RCL is always displayed in the order of: the
error response code, and if there is no error, the parameter values
returned in the response. The names of the commands, and the order of
the parameters sent and received is the same as that in ISTS’s *S2-RT
User’s Manual, Appendix A*. In addition whenever possible menomonics are
substituted for numeric parameters. Error and parameter menonics
correspond closely to those in the appendix of ISTS’s manual. Remote
errors are displayed as numeric values until a successful ERROR_DECODE
command has been completed for that error code. Effectively this means
that the mnemomic is not used in the display of remote errors until the
second time the error is encountered after the most recent Field System
start. If the value of a parameter that is normally displayed as menomic
doesn’t correspond to the value of a known mnemonic for that parameter,
the hex value will be displayed.

For the TIME_READ command the Field System’s raw times immediately
before and after the call to rcl_time_read are displayed in curly braces
\{} immediately after the returned data. The Field System’s raw time is
the number of centiseconds since the last boot.

For GPIB and Mark V communications, commands sent to the device are
placed in square brackets “[]” and responses are displayed in angle
brackets “<>”.

*enable - enable recording heads (Mark III drives)*

Syntax:**enable=**__track1,track2, ... trackn__

Response:enable/_track1,track2, ... trackn_

Settable parameters:

_track1, ... n_ List of tracks to be enabled/disabled. Mark III track
numbers between *1* and *28*, and by group. Groups specified by
**g**__n__, __n__=*1* to *4*:

____
*g1* includes tracks 1,3,5,7,11,13.

*g2* includes tracks 2,4,6,8,10,12,14.

*g3* includes tracks 15,17,19,21,23,25,27.

*g4* includes tracks 16,18,20,22,24,26,28.

A null list (i.e. *enable=*) disables all tracks.
____

Monitor-only parameters: none

Comments:

MAT module functions available. See section 1.0 of this manual.

The use of *** as a parameter is not supported by this command.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus 3. Consequently, odd Mark III tracks are even VLBA or Mark
IV track numbers and vice-versa. See the Track Assignment Tables in the
*System Setup* manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses Mark III track and group numbers.

*enable - enable recording heads (VLBA, VLBA4 drives)*

Syntax:**enable=**__list-of-groups__

Response:enable/_list-of-groups_

Settable parameters:

_list-of-groups_ List of head groups to be enabled/disabled. Groups are
specified by **g**__n__, __n__=*0* to *3*. In addition, for VLBAB or
VLBA4 drives, groups in headstack two can specified by **g**__n__,
__n__=*4* to *7*. A null list (i.e. *enable=*) disables all heads. For
mode D, the group containing a single track to be recorded may be
indicated by setting _list-of-groups_ to **d**__n__, _n_ = *1* to *28*.
The group within which Mark III track _n_ occurs will be enabled. In
addition, for VLBAB and VLBA4 drives, the group in headstack two
containing a single track to be recorded may be indicated by setting
_list-of-groups_ to **d**__n__, _n_ = *101* to *128*.

Monitor-only parameters: none

Comments:

The use of *** as a parameter is not supported by this command.

This command enables groups of heads in the VLBA recorder. Heads may not
be individually enabled. The *form* command sets up which data goes to
which head with the cross-point switch.

In mode D, an entire group of heads is enabled. The VLBA rack *form*
(and *trackform* and *tracks*) command must be used to send data to a
specific head so that only it has data going to it. It is not possible
to record in mode D for a Mark III (or IV) rack/VLBA (or VLBAB or VLBA4)
drive combination.

____
*g0* includes Mark III heads 1,3,5,7,11,13.

*g1* includes Mark III heads 2,4,6,8,10,12,14.

*g2* includes Mark III heads 15,17,19,21,23,25,27.

*g3* includes Mark III heads 16,18,20,22,24,26,28.
____

Note that a VLBA or Mark IV track number equals the Mark III track
number plus 3. Consequently, odd Mark III tracks are even VLBA or Mark
IV track numbers and vice-versa. See the Track Assignment Tables in the
*System Setup* manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses VLBA track and group numbers.

The groups *g4*, *g5*, *g6*, and *g7* correspond to groups 0, 1, 2, and
3 on head 2. The parameters, **d**__n__, _n_ = *101* to *128*,
correspond to the Mark III heads in headstack two given by _n-100_. The
command accepts these parameters, but normally a VLBA4 drive is not
wired so that this has will have any practical effect. However for a
VLBAB these parameters may be useful.

*enable - enable recording heads (Mark IV drives)*

Syntax:**enable=**__stack1,stack2__

Response:enable/_stack1,stack2_

Settable parameters:

_stack1,stack2_ Stack to be enabled. May be *s1* (*stack1*), *s2*
(*stack2*), or null.

Monitor-only parameters: none

Comments:

MAT module functions available. See section 1.0 of this manual.

The use of *** as a parameter is not supported by this command.

*et - end recording on tape drive (all drives)*

Syntax:*et*

Response:et/_acknowledgement_

Parameters: none

Comments:

Tape motion is stopped when this command is issued.

For Mark III/IV drives the record bit is disabled. For VLBA and VLBA4
drives the groups are disabled. For Mark IV and VLBA4 racks the
formatter output is disabled.

For S2, the selected transports are stopped.

*ff - fast-forward the tape (all drives)*

Syntax:*ff*

Response:ff/_acknowledgement_

Parameters: none

Comments:

The tape is moved forward at high speed. For Mark III, the record bit is
disabled and the low tape sensor is turned on. For VLBA, all track
groups are disabled and the low tape sensor is turned on.

For S2 drives, the selected transports are moved forward at the
transport’s fast forward speed.

For drives other that the K4 and S2, the tape is moved at the “schedule”
speed value as specified in the appropriate drive control file. This is
the speed assumed in the SNAP schedule file for positioning the tape
with the *fastf* procedure.

Use the *sff* command and *sfastf* procedure for possibly faster tape
motion of non-K4, S2 drives.

*fivept - five or more point source scan*

Syntax:**fivept=**__axis,rep,pts,stp,intp,dev__

Response:fivept/_axis,rep,pts,stp,intp,dev,cal,beam,flux,chain_

Settable parameters:

_axis_ Axis system for scan.

____
*hadc* = Hour Angle/Declination *(default)*

*azel* = Azimuth/Elevation

*xyns* = X/Y, +X East

*xyew* = X/Y, +X South (unimplemented)
____

_rep_ Number of repetitions: *-10* to *-1* and *1* to *10* allowed.
Default is *-2*. Negative repetition counts are described in the fivpt
manual. The absolute value implies a maximum repetitions count, but once
the scans are well s\centered on bth axes, additional repetitions will
be skipped.

_pts_ Number of points on each axis, if even, it is increased by 1.
_pts_ must be between *-31* to *-3* or *3* to *31*, inclusive. Default
is *7*. Negative point counts cause the system temperature measurement
to be skipped. The absolute value is used as the number of points.

_stp_ Step size for distance between points, in multiples of a
beamwidth. Default is *0.5*.

_intp_ Integration period, *1* to *32* seconds.

_dev_ Mnemonic for the device to be used as the detector. Standard
devices are allowed. Note that for Mark III equipment, the whether the
video converter USB or LSB detector is used is determined by the *vc*
command. The module which has the specified detector must have been set
up. The IF distributor must be set up and, for Mark III, must be in
remote. Default detector is *i1* for Mark III/IV, *ia* for VLBA/4.
Station dependent detectors *u5* and *u6* may be available.

Display-only parameters:

_cal_ Calibration noise source temperature in degrees K. This is
determined from the last **caltemp**__x__ commands in conjunction with
the *patch* (Mark III/IV) or *bbc* (VLBA/4) command for the specified
device.

_beam_ The full width half maximum beam size degrees. This is determined
from the last **beam**__x__ commands in conjunction with the *patch*
(Mark III/IV) or *bbc* (VLBA/4) command.

_flux_ The apparent flux of the source. This is determined from the last
**flux**__x__ commands in conjunction with the *patch* (Mark III/IV) or
*bbc* (VLBA/4) command.

_chain_ The IF chain, *1*-*6*, that the detector is on. Chains *5* and
*6* are for station specific detectors *u5* and *u6*. Mark III/IV racks
use IFs *1*-*3*. IFs *1*-*4* correspond to IFs a-d for VLBA/4 racks.

Comments:

The parameters should be setup with a **fivept=**__…__ command. A scan
is started by issuing a simple *fivept* command (i.e. with no
parameters), this will determine the current values of the display only
parameters and then schedule an external program, fivpt, which then uses
the Field System to perform the necessary measurements. See the *fivept*
manual in Volume 2.

The scan is performed about the current commanded position. Any offsets
that are in use are included. If the scan is successful the total
offsets for the selected axis type are updated.

It is recommended that nothing else be done, e.g. running a schedule,
while this command is executing. Since this command may run for an
extended period of time, a mechanism has been supplied for aborting:
enter *sy=brk fivpt &* as a SNAP command. The program will return the
antenna to the last good offset for each axis. If there was no good
offset measurement on an axis, then the original offset is used.

In order for this command to work, the following conditions must be met:
(1) the detector device has been setup by the Field System, (2) the
appropriate **lo=**__…__ command has been issued, (3) the IF distributor
or IF3 module has been setup by the Field System and is in remote (Mark
III/IV only), (4) the appropriate **beam**__X__=__…__ and
**caltemp**__X=…__. must have been issued. If a Mark III/IV video
converter is used as the detector then the appropriate **patch=**__…__
command must have been issued as well. For a VLBA/4 rack with a BBC
selected as a detector the appropriate BBC IF input must be selected
with a **bbc**__XX__=__…__ command. If estimates of performance based on
the source flux are desired, then the appropriate **flux**__X__=__…__
command must have been issued as well.

If the noise diode temperature is less than zero, it is assumed that
there is no noise diode to use. All power measurements will be made
assuming the absolute value of the diode temperature is the system
temperature. Thus if the noise diode temperature is -100, the power
measurements will come out as a percentage of the system temperature.

If the noise diode temperature is greater than zero, then two procedures
must be available: *calonfp* and *calofffp*, which are used by fivpt to
turn the noise diode on and off respectively. The recommended form for
these procedures is:

*CALONFP: calon*

*!+1s*

*sy=go fivpt &*

*CALOFFFP: caloff*

*!+1s*

*sy=go fivpt &*

*calon* and *caloff* are local procedures that do whatever is necessary
to turn the noise source on and off, respectively.

If station dependent detectors *u5* or *u6* are used, then two
procedures must be available: *sigonfp* and *sigofffp*, which are used
by fivpt to turn the signal to the station dependent detectors on and
off, respectively. The recommended form for these procedures is:

*SIGONFP: sigon*

*!+1s*

*sy=go fivpt &*

*SIGOFFFP: sigoff*

*!+1s*

*sy=go fivpt &*

*sigon* and *sugoff* are local procedures that turn the signal to the
station dependent detectors on and off, respectively.

There is a known bug in the use of these procedures: *calonfp*,
*calofffp*, *sigonfp*, and *sigofffp*, that may require the last two
lines to be repeated in each procedure. In other words after the first
line each procedure should contain:

*!+1s*

*sy=go fivpt &*

*!+1s*

*sy=go fivpt &*

The indication that this is needed is if fivpt seems to hang after
executing one of these procedures. Please see the “Known Bugs” section
of the latest update notice for more details.

A negative value for the number of _pts_ will disable the initial system
temperature measuement. A nominal conversion factor of unit and offset
of zero is assumed in converting from detector counts to displayed
antenna temperature, i.e., measurements are reported in detector units
with an assumed zero offset.

* +
*

*flush - flush operator command stream*

Syntax:*flush*

Response:none

Parameters: none

Comments:

This command re-initializes the operator procedure stack, unblocks the
operator command stream, and terminates execution of the current
procedure in the operator stream. There is no effect on the schedule
command stream. This is an immediate execution operator command.

*flux - set flux parameters for a source*

Syntax:**flux1=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**flux2=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**flux3=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**fluxa=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**fluxb=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**fluxc=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**fluxd=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**flux5=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

**flux6=**__model,flux1,angle1,angle2,flux2,angle3,angle4__

Response:flux1/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

flux2/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

flux3/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

fluxa/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

fluxb/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

fluxc/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

fluxd/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

flux5/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

flux6/_model,flux1,angle1,angle2,flux2,angle3,angle4,corr,aflux_

Settable parameters:

_model_ source model, one of *gaussian*, *disk*, *twopoints*

_flux1_ flux density of the first source component, Janskys

_angle1_ first angular dimension of the first component

_angel2_ second angular dimension of the first component

_flux2_ flux density of the second source component, Janskys

_angle3_ first angular dimension of the second component

_angle4_ second angular dimension of the second component

Monitor-only parameters:

_corr_ correction divisor

_aflux_ apparent flux density

Comments:

Source models, for either Mark III (and Mark IV) or VLBA (and VLBA4)
systems, may be specified with the *flux1*/*2*/*3* and
*fluxa*/*b*/*c*/*d* commands, respectively. The pairs of commands
*flux1*/*a*, *flux2*/*b*, and *flux3*/*c* are synonymous.

The commands **flux**__x__ use the source model and the beam size
specified by the corresponding **beam**__x__ to calculate the apparent
flux density. The parameter _model_ determines which model is used and
which parameters have meaning. Parameters which have no meaning for a
given model will not be displayed before the _corr_ parameter.

The *flux5/6* commands are used to specify flux models for station
dependent detectors *u5* and *u6*.

If _model_ is *gaussian*, then the source is assumed to consist of up to
two, possibly elliptical, Gaussian brightness distributions. _flux1_
gives the flux density value for the first component. _angle1_ and
_angle2_ specify the diameters along the two principal axes. _angle2_
defaults to _angel1_. _flux2_ gives the flux density value for a second
concentric optional Gaussian distribution, default value *0*. _angle3_
and _angle4_ give the principal axes of the second component. _angle4_
defaults to _angle3_.

If _model_ is *twopoints*, then the source is assumed to consist of two
equally bright points. _flux1_ is the total flux density of the two
points. _angel1_ is their angular separation.

If _model_ is *disk*, then the source is assumed to consist of a uniform
circular disk brightness distribution. _flux1_ is the total flux
density. _angel1_ is the diameter of the disk.

Once the model is specified, the **flux**__x__ command will use the
appropriate beam size to calculate the apparent flux density of the
source when the beam is _centered_ on the brightness distribution. The
approximations given in Dave Shaffer's antenna check-out memo (see the
*Antenna Performance* manual) are used to compensate for the finite size
of the sources relative to the beam. Note that these are only
approximations and become very poor as the correction divisor approaches
a value of two. Further note that very few sources are correctly
represented by one of these three models. This command gives a crude
approximation to the true apparent flux density.

Issuing a *source=...* or a **beam**__x__=... command will automatically
change the value of the _aflux_ parameters to be a negative, invalid,
number until a correct **flux**__x__=... command is issued again. It is
recommended that procedures that include the *source=...* command and
the appropriate **flux**__x__=... commands be used to command sources
when doing flux density measurements.

See the description of the *fivept* and *onoff* commands for more
details on the use of the apparent flux density values.

*form - formatter control and monitor (K4K3 racks)*

Syntax:**form=**__mode__,_rate_,_input_,_aux_,_synch_,_aux_start_,_output_

Response:form/_mode_,_rate_,_input_,_aux_,_synch_,_aux_start_,_output_,_daytime_,_st1_,_st2_,_st3_

Settable Parameters:

_mode_ *A*, *B*, *C*, *D*. No default.

_rate_ *0.25*, *0.50*, *1.00*, *2.00*, *4.00* (default), *8.00* Mbit/sec

_input_ *nor* (default), *ext*, *crc*, *low*, *high*

_aux_ up to 12 hex digits, default is no change

_synch_ synch test *on* (default) or *off*

_aux_start_ start new aux on next *frm* (default) or *1PPS*

_output_ *nor* (default), *low*, or *high*

Monitor-only Parameters:

_st1_ status byte 1, hex

_st2_ status byte 2, hex

_st3_ status byte 3, hex

_st4_ status byte 4, hex

Comments:

The status of the formatter is not checked so it is necessary to visual
verify that the formatter is in remote. A future implementation will
have a different response:

____
form/_mode_,_rate_,_input_,_aux_,_synch_,_aux_start_,_output_,_test_,_sign_,_run/set_,_rem/lcl_,_pwr_,_daytime_,_threshold_,_pend_,_1pps_,_frame_,_data_,_tape_,_plo_,_srq_
____

_test_ fail or ok

_sign_ synch polarity: + or -

_run/set_ time set switch: run or set

_rem/lcl_ remote/local switch: rem or lcl

_pwr_ power interrupted: ok or pwr

_daytime_ date and time in format _yydddhhmmss.sss_

_threshold_ synch test threshold: nanseconds (values of
13.9x1,2,4,8,16,32)

_pend_ sample rate update: pend or ok

_1pps_ external 1 PPS: 1pps or ok

_frame_ clock: frame or ok

_data_ clock: data or ok

_tape_ clock: slip or ok

_plo_ lock or unlocked

_srq_ srq or ok

For longitudinal drives, the correlators can not reproduce recordings
made at speeds below 40 ips, but this limitation is subject to change in
the future. This limitation is functionally equivalent to a minimum per
track data rate of 2 Mbit/sec.

*form - formatter control and monitor (Mark III racks)*

Syntax:**form=**__mode,rate,input,aux,synch__

Response:form/mode,rate,input,synch,test,sign,run/set,rem/lcl,

____
pwr,daytime
____

Settable parameters:

_mode_ Matrix output mode to tape. Choices are *a*, *b*, *c*, *d*. No
default.

_rate_ Sample rate in Mbits/sec. Choices are *0.125*, *0.25*, *0.5*,
*1.0*, *2.0*, *4.0*, *8.0*. Default *4.0*.

_input_ Source of data. Choices are *nor* (default), *ext*, *crc*.

_aux_ Auxiliary data, up to 12 hex characters. Default is no change. If
more than 12 characters are given, only the first 12 are used. If aux
has been specified either now or implicitly by a pass, lvdt, or stack
command, then the parity command will check its validity.

_synch_ Synch test *on* (default) or *off*.

Monitor-only parameters:

_test_ synch test fail or ok

_sign_ synch voltage + or -

_run/set_ switch setting run or set

_rem/lcl_ switch setting, rem or lcl

_pwr_ power interrupt detected, ok or pwr

_daytime_ clock reading in format: ydddhhmmss.ss

Comments:

MAT module functions available. See section 1.0 of this manual.

It may take the formatter up to 4 seconds to re-synch itself if a change
is made to a low sample rate. During this time the read-back may not be
accurate. This module must be reset manually using the front panel
pushbutton in order to clear error conditions; then turn off alarm
remotely. The eight LEDS on the rear panel of the formatter give some
error conditions which are not available remotely.

The auxiliary data field for the formatter is automatically filled with
the tape head offset by the *pass*, *lvdt*, and *stack* commands.

The Mark III formatter time must be set manually from the front panel.
After setting or resynching the formatter time and if the time model in
time.ctl is *offset* or *rate*, issue the command:

*sy=run setcl offset &*

to reset the Field System time.

For longitudinal drives, the correlators can not reproduce recordings
made at speeds below 40 ips, but this limitation is subject to change in
the future. This limitation is functionally equivalent to a minimum per
track data rate of 2 Mbit/sec.

*form - formatter setup (Mark IV, VLBA4, K4MK4 racks)*

Syntax:**form=**__mode,rate,fan,barrel,modulate,synch__

Response:form/_mode,rate,fan,barrel,modulate,synch,test,rev,rack,error_

Settable Parameters:

_mode_ The recording mode. Choices for the _mode_ are *m*, *a*, *b1*,
*b2*, *c1*, *c2*, *e1*, *e2*, *e3*, *e4*, and **d**__n__, where __n__=1
to 28. No default. Modes *a*, *b*, *b1*, *b2*, *c1*, *c2*, *e1*, *e2*,
*e3*, *e4*, and **d**__n__ correspond to the traditional Mark III modes.
For the **b**__x__ and **c**__x__ modes, _x_ corresponds to the sub-pass
recorded (odd Mark III tracks for *b1* and *c1*, even Mark III tracks
for *b2* and *c2*). For the **d**__n__ modes, _n_ corresponds to the
Mark III track number recorded. For the **e**__x__ modes, _x_
corresponds to the Mark III group number recorded. Mode *m* uses the
sampler track assignments and formatter track enables specified by the
*trackform* and *tracks* commands.

_rate_ Sample rate in Mbits/sec. Choices are *0.125*, *0.25*, *0.5*,
*1*, *2*, *4*, *8*, *16*, and *32*. Default *4*. For Nyquist sampling
this selection must be twice the bandwidth set-up used in the *bbc*
commands

_fan_ The fan-in or fan-out ratio. Choices are *1:4*, *1:2*, *2:1*,
where on a per channel or track basis, the number before the colon is
the number of sampled channels and the number after is the number of
tracks. Default *1:1*.

_barrel_ Barrel-roll mode: *off* (default), *8*, *16*, or *m*. Old
firmware does not support anything but *off*. Barrel *m* uses the roll
maps defined by the *rollform* command.

_modulate_ Data modulation: *on* or *off* (default). Old firmware does
not support anything but *off*. Monitor display is null because it
cannot be read back.

_synch_ Synch test tolerance. Choices are *0*-*16* ( multiples of 62.5
nanoseconds) or *off*. Default is *3*. The meaning of *0* is unknown,
but may be the same as *1*. Monitor displayed is null for formatters
with old firmware revision because it cannot be read back.

Monitor-only Parameters:

_test_ Synch test result: pass or fail.

_rev_ Formatter firmware revision number, displayed as an integer.

_rack_ Rack ID, reported as a hex value.

_error_ Error status, okay or the hex value.

Comments:

The Mark IV formatter clock is set with the fmset program. If the
formatter time is set or re-synched, the fmset program will
automatically reset the FS time if the time model in time.ctl is
*offset* or *rate*. If you change the time in some other way and the
time model in time.ctl is *offset* or rate, issue the command

*sy=run setcl offset &*

to reset the Field System time.

Since the Mark IV recorder does not include group enables, some of the
traditional Mark III mode names used in _mode_ have numbers appended to
them to distinguish which sub-pass, group, or track is being recorded.

Some combinations of _rate_ and _fan_ cannot be accommodated by the
formatter. No output that would require more than 16 MHz nominal data
rate per track is supported. Specifically a _rate_ of *32* and a _fan_
of *1:1* is impossible. Some combinations of _fan_ and _rate_ cannot be
accommodated by the recorder. Any combination of _rate_ and _fan_ that
would imply a nominal data rate per track of *0.125* Mbit/sec or less
for is not supported.

For a _fan_ of *1:4*, the magnitude bits of VC9-14 are not available.

The _rate_ of *0.25* Mbit/sec is supported by the formatter, but for
this rate to generate correct time tags, the formatter requires the
“/con 0” configuration command that sets it up to be issued during an
odd second of the time of day, e.g. 00:00:01 and 09:23:35, but not
09:23:36. No provision is made by the *form* command to meet this timing
requirement.

For longitudinal drives, the correlators can not reproduce recordings
made at speeds below 40 ips, but this limitation is subject to change in
the future. This limitation is functionally equivalent to a minimum per
track data rate of 2 Mbit/sec.

Chekr does not currently support checking of the formatter. However, the
setup of the formatter can be monitored by entering a *form* command. If
any of the displayed values do not agree with the last value commanded,
then the formatter is not in the last commanded state. In particular the
BAD_VALUE response indicates that the formatter state does agree with
what was commanded.

The default value of *3* for _synch_ is the most lenient value,
3*62.5=187.5 nanoseconds, that will catch a slip of 5 MHz. The formatter
on power-on itself defaults to *8*.

Old formatter firmware versions are less than 40, newer versions are
greater than 40. The value returned by the formatter must agree with
what is in the equip.ctl file.

*form - formatter setup (VLBA racks)*

Syntax:**form=**__mode,rate,fan,barrel,dqa__

**vform=**__mode,rate,fan,barrel,dqa__

Response:form/_mode,rate,fan,barrel,dqa,rev,genstat,mcbstat,_

_hdwstat,sfwstat,intstat_

vform/_mode,rate,fan,barrel,dqa,rev,genstat,mcbstat,_

_hdwstat,sfwstat,intstat_

Settable Parameters:

_mode_ The recording mode, *reboot* (see below) to reboot the CPU, or
*configure* to cause the formatter to perform a hardware configuration.
Choices for the _mode_ are *prn*, *v*, *m*, *a*, *b*, *b1*, *b2*, *c*,
*c1*, *c2,* and **d**__n__, where __n__=1 to 28. No default. Modes
*prn*, *m*, *a*, *b*, *b1*, *b2*, *c*, *c1*, *c2*, and **d**__n__ imply
Mark III data replacement format. *prn* selects pseudo random noise to
be sent to all tracks including system tracks. Modes *a*, *b*, and *c*
correspond to the traditional Mark III modes. Mode **d**__n__ is the
same as Mark III mode D, where _n_ corresponds to which Mark III track
that would be written. Mode *v* implies VLBA non-data replacement
format. Modes *b1* and *c1* are the same as the forward passes (even
VLBA recorder heads) of modes *b* and *c* respectively; *b2* and *c2*
for reverse passes (odd VLBA recorder heads). Modes *m* and *v* use the
sampler track assignments and formatter track enables specified by the
*trackform* and tracks commands. The system tracks are disabled except
in *prn* mode.

_rate_ Sample rate in Mbits/sec. Choices are *0.25*, *0.5*, *1*, *2*,
*4*, *8*, *16*, and *32*. Default *4*. For Nyquist sampling this
selection must be twice the bandwidth set-up used in the *bbc* commands

_fan_ The fan-in or fan-out ratio. Choices are *1:4*, *1:2*, *1:1*,
*2:1*, and *4:1*, where on a per channel or track basis, the number
before the colon is the number of sampled channels and the number after
is the number of tracks. Other, not commonly used, choices are
available: *x0*, *x1*, and *x7*. Default *1:1*.

_barrel_ Barrel-roll mode. Choices are: *off*, *8:1*, and *16:1*, where
the number before the colon is the number of tracks to roll-over and the
number after is the number of tracks to step per frame. Other, not
commonly used, choices are available: *8:2*, *8:4*, *off4*, *16:2*, and
*16:4*. Default *off*.

_dqa_ DQA module recorder input select: *1* or *2*. Default is the
recorder specified by the *select* command or whichever recorder is
installed if there is only or recorder 1 if *select* command hasn’t been
used to specify a recorder yet.

Monitor-only Parameters:

_rev_ Formatter firmware revision number, displayed as x.xx.

_genstat_ General status, ok or the hex value of hex address 20.

_mcbstat_ Communications status, ok or the hex value of hex address 21.

_hdwstat_ Hardware status, ok or the hex value of hex address 22.

_sfwstat_ Software status, ok or the hex value of hex address 23.

_intstat_ Internal status, ok or the hex value of hex address 24.

Comments:

MCB functions are available. See section 1.0 of this manual.

The formatter CPU can be reset manually. After manual reset you must
issue the command *form=addr* to re-initialize the module.

CAUTION: Issuing this command with an equals, *=*, causes a formatter
reconfiguration which will put the formatter into a busy state for up to
8 seconds.

_rate_ and _fan_ combinations that imply more than 8 Mbits/sec of data
per tape track or less than 0.25 Mbits/second of data per tape track are
not permitted. The tape clock rate is set to be 9/8 of the implied data
bit rate per track for Mark III modes, and 9.072/8 of the impled
bit-rate per track in VLBA mode.

The VLBA formatter clock is set with the fmset program. If the formatter
time is set or re-synched, the fmset program will automatically reset
the FS time if the time model in time.ctl is *offset* or *rate*. If you
change the time in some other way and the time model in time.ctl is
*offset* or rate, issue the command

*sy=run setcl offset &*

to reset the Field System time.

In VLBA mode the serial status register is loaded with the hardware ID
(from equip.ctl) in the most significant byte and the micron position of
the head is stored in BCD in the two least significant bytes; negative
values are indicated by the highest order bit of these two bytes being
turned on. In Mark III modes the hardware ID is placed in the second
most significant byte of the serial status register.

If the requested sampler track assignments and formatter track enables
would imply use of only odd or even recorder tracks only and the
head.ctl control files indicates that only *even* or *odd* tracks are to
be used, the sampler assignments and enables are automatically mapped to
the corresponding even or odd tracks. If both odd and even tracks are
used and/or the head.ctl specifies *all* heads are to be used, no
mapping takes place. The Mark III modes *prn*, *a*, *b*, *c*, **d**__n__
assign samplers to and enable all the odd and even tracks required, so
no mapping is required for these modes.

The *vform* command is provided for use with all types of racks that use
a VLBA DQA module for a decoder. The **vform=**__...__ works with all
racks types, including VLBA and VLBA4. The *vform=…* command must be
used to specify the formatter tape clock if the rack type is not VLBA.
The *vdqa* and *vform* comands are particular useful for writting rack
independent procedures for stations that switch between VLBA and VLBA4
rack types.

For longitudinal drives, the correlators can not reproduce recordings
made at speeds below 40 ips, but this limitation is subject to change in
the future. This limitation is functionally equivalent to a minimum per
track data rate of 2 Mbit/sec.

*form4 - Mark IV formatter low-level control*

Syntax:**form4=**__command__

Response:form/_response_

Settable parameters:

_command_ any legal command sentence as described in the Mark IV
Formatter Vocabulary manual. The characters \r\n (carriage-return,
line-feed) are appended before sending the command.

Monitor-only parameters:

_response_ response to _command_. The >\r\n at the end of the response
is not included in the Field System log. For accepted commands, which
have only >\r\n as the response, the Field System logs ack.

Comments:

Refer to the Mark IV Formatter Vocabulary manual for a description of
all valid commands and their syntax.

This command is a simple feed-through to the Mark IV formatter. No
checking is done on the command, no action is taken for any response.
This form of the command is temporary while it is determined what
standard parameters are desired.

The _command_ is sent to the MAT bus just as if the operator had used
the *mat* command. No modifications are made before the command is sent
on the bus.

*fsversion - get field system version*

Syntax:*fsversion*

Response:fsversion/version

Monitor-only parameters:

_version_ field system version number.

Comments:

Used to display and log version number of the currently running field
system.

*halt - halt execution of a schedule*

Syntax:halt

Response:none

Comments:

This command halts execution of the schedule until a *cont* command is
issued by the operator. Once the current schedule command is finished,
no further commands of any kind will be read from the schedule command
stream while the *halt* is in effect. Interactive commands from the
operator command stream will still be processed. This is an immediate
execution operator command.

*hdata - head positioner A/D readout (longitudinal drives)*

Syntax:*hdata*

Response:hdata/_hd0p,hd1p,hd0t,hd1t,vac,oddpwr,evpwr,ref_

Settable parameters: none

Monitor-only parameters:

_hd0p_ Head 0 position.

_hd1p_ Head 1 position

_hd0t_ Head 0 temperature

_hd1t_ Head 1 temperature

_vac_ Vacuum sensor

_oddpwr_ Odd reproduce power

_evpwr_ Even reproduce power

_ref_ Reference voltage

Comments:

MAT module functions available for Mark III/IV. No MCB functions
available for VLBA/4. See section 1.0 of this manual.

This command reads the head positioner A/D channels, all values are
reported in units of volts. Data from all channels are reported
regardless of whether anything is hooked up to them or not. In
particular, most stations do not use the temperature channels, the
vacuum sensor, and normally only one of the reproduce power channels is
hooked up.

The position voltages (and all others) are reported with the LVDT off.
Use the *lvdt* command to measure positions with the LVDT on.

All parameters except _oddpwr_ and _evpwr_ are null if the drive type
specified in the equip.ctl control file is *vlba2*.

*hdcalc - stack calibration calculation (longitudinal drives)*

Syntax:*hdcalc*

*hdcalc=clear*

Response:hdcalc/_writeF,readF,writeR,readR,writeS,readS_

Settable parameters:

none, however *hdcalc=clear* will delete previously calculated values

Monitor-only parameters:

_writeF_ Forward absolute offset for the write head

_readF_ Forward absolute offset for the read head, null for VLBA

_writeR_ Reverse relative offset for the write head

_readR_ Reverse relative offset for the read head, null for VLBA

_writeS_ Write head scale

_readS_ Read head scale, null for VLBA

Comments:

This command will calculate new calibration parameters based on the
voltages saved with the *savev* command. See the *Narrow Track
Calibration* manual for a description of the calculations. Only one
scale factor is calculated for each head.

Any parameters which cannot be calculated because *savev* has not saved
a complete set of voltages will be reported as null, i.e. empty.

The VLBA recorder has only one head. Its parameters are reported as the
write head parameters and the read head parameters are null.

*hecho - head communications echo (longitudinal drives)*

Syntax:**hecho=**__on/off__

Response:hecho/_on/off_

Settable parameters:

_on/off_ ON to turn echo on, OFF to turn echo off.

Monitor-only parameters: none

Comments:

This command prints debug information for commands that use the head
positioner (*peak* and

*locate*).

*help or ? - display on-line help information*

Syntax:**help=**__command__

**?=**__command__

Response:_displays information on the screen_

Settable Parameters:

_command_ The name of any SNAP command.

Comments:

This command displays available information on the specified SNAP
command. Either the word *help* or the question mark may be used. Typing
*help* or *?* alone gives help on *help*. The help information is
essentially the listing of the manual page for the SNAP command.

The Field System *help* command opens a new xterm window and uses the
less pager to display the requested help text one screen-full at a time.
At the bottom of the window you will see a prompt in inverse video that
includes the name of the file being displayed( which you can ignore). If
you want to continue the listing, press the space bar and the next
screen-full will be displayed. To exit from the command, type the letter
*q* (not echoed on the screen). For help with less, type the letter *h*
to the prompt. The full options of less are available including texte
searches and scrolling back.

In some cases statistics about where in the file the current screen-full
comes from may be displayed in the prompt. In some cases, less will
display only a colon : prompt.

When you see (END) in inverse video in the prompt at the bottom of the
screen, you have reached the end of the help information on this topic.
Press the letter *q* to exit. When you press *q*, the help xterm window
will close automatically. While the text is displayed in the window you
can also use the xterm scroll bar to move around within the text.

The help information is kept in files in the directory /usr2/fs/help,
one file per command. Versions for different configurations are
distinguished by the two characters in the file extension for the type
of hardware. The first character is for the type of rack and second is
for the type of recorder. The characters used are m for Mark III, v for
VLBA, 4 for Mark IV, u for VLBA4and _ for any. In addition, for racks
there are j for Mark IV, VLBA, k for Mark III, VLBA4, and l for Mark IV,
VLBA4; for recorders there are s for S2 and x for non-S2. Some letters
may not be used. The content of the files is the ASCII version of the
pages in this manual. Station-dependent help files are found in
/usr2/st/help.

If no help is available for a command, a message to that effect will be
displayed in the log output window. You will also receive the message if
you request help for a command that is not defined for your equipment.

*hpib - general HP interface bus communications*

Syntax:**hpib=**__mn,data__

Response:hpib/_data_

Settable parameters:

_mn_ 2-character mnemonic of the module to be addressed, as found in the
ibad.ctl control file.

_data_ complete message to be sent to module, if any. Talk-only modules
do not accept data.

Monitor-only parameters:

_data_ response of module, if any. Listen-only modules do not generate
any response.

*ifadjust - adjust IF attenuators (Mark IV racks)*

Syntax:**ifadjust=**__target__

*ifadjust*

Response:ifadjust/_target,att1,att2,att3_

Settable Parameters:

_target_ Settable target levels for TPI counts. 3300 counts (default).

Monitor-only Parameter.

_att1_ IF1 attenuator settings.

_att2_ IF2 attenuator settings.

_att3_ IF3 attenuator settings.

Comments:

This command will attempt to automatically adjust the IF attenuators in
a Mark IV rack. It may be useful for determining the correct IF
attenuator settings for each mode before an experiment begins. The
resulting values can be edited into the IF set-up procedure for the
corresponding mode. It should however not be used during an experiment
because: (1) the length of time require to execute the command may
disrupt the schedule and (2) it may change the attenuator settings
between scans which will introduce unnecessary delay jumps in the data.

In order to run *ifadjust*, set the rack up with the set-up procedure to
be used for recording, e.g., *sx2ca=1*, then the adjustment process can
be started by specifying a target level with *ifadjust=…* or just typing
*ifadjust* to reuse the last _target_. If there has not been measurement
made since the last FS start, the default _target_ value is used.

The *ifadjust* command attempts to optimize the IF attenuator settings
for all data channels that are specified as being recorded by the
current formatter set-up as specified by the *trackform* command. A
_data channel_ is a USB or LSB channel of an individual VC, i.e., each
VC has two possible data channels. The patching of the VCs as specified
by the *patch* command is used to determine which VCs are connected to
which IF channels. Only IF channels that are specified as being patched
are adjusted. The *patch* command must accurately reflect the patching
or this command will not work well. Data channels may be deleted by
removing them from the formatter set-up.

The *ifadjust* command makes one adjustment pass for each VC side-band
in use. Any mode that uses at least one LSB and at least one USB channel
will require two passes. The LSB channels are handled in the first pass;
the USB, in the second. The *ifadjust* command starts with the currently
commanded attenuator settings and then attempts a binary search over the
remaining range of the possible attenuator values, 0-63 dB, to locate
the optimal value. This is done in parallel for each IF channel in use.
In the worst case, it may take up to 16 seconds per pass. If the command
successfully converges to an optimal value for all sidebands in use, the
monitor response above is printed with the final values. Logged output
messages are printed as progress reports at each step. The attenuators
are left set to the final values and these become the default (null) and
previous “*” values for these parameters.

The optimal setting for each IF attenuator is defined as the maximum
amount of attenuation that keeps all TPI levels for data channels
connected to that IF at least _target_ counts above the TPZERO level.

If the adjustment process fails to converge, possible causes include: an
inconsistency between the patching specified by the *patch* command and
the actual patching, variable RFI that makes the readings unstable, and
IF bandpass signal roll-off or stable RFI that causes the TPI levels to
exceed the available dynamic range, about 12 dB. If the range of TPI
levels in the active sidebands for a given IF channel exceeds 6 dB a
warning message will printed even if the adjustment process converges.
Likewise if any channel’s TPI level exceeds 20000 counts at the final
settings a warning message will be printed. These warning messages do
not necessarily mean that there is a problem, but it would prudent to
examine your system more closely if you get them as there could well be
a potential problem.

Please note that for Mark IV VCs the 10 dB pads in each sideband of the
converter should be on, i.e., in the signal path, at all times. The
automatic level setting and correct data recording depends on this.

*ifd - IF distributor control (Mark III, Mark IV racks)*

Syntax:**ifd=**__atten1,atten2,input1,input2__

Response:ifd/_atten1,atten2,input1,input2,rem/lcl,TP1,TP2_

Settable parameters:

_atten1_ IF1 attenuator setting in db, range *0* (default) to *63* db.
Enter a numerical value preceeded by *+* or *-* to indicate relative
change. Other options are *max*, or *old* to restore the previous value
after a *max*.

_atten2_ IF2 attenuator setting in db, range *0* (default) to *63* db.
Enter a numerical value preceeded by *+* or *-* to indicate relative
change. Other options are *max*, or *old* to restore the previous value
after a *max*.

_input1_ IF1 input, *nor* (default) or *alt*.

_input2_ IF2 input, *nor* (default) or *alt*.

Monitor-only parameters:

_rem/lcl_ switch setting, remote or local

_TP1_ IF1 total power reading

_TP2_ IF2 total power reading

Comments:

MAT module functions available. See section 1.0 of this manual.

The *max* and *old* values for the attenuator parameters allow the
attenuators to set to the maximum value of 63, and then returned to
their previous values.

*if3 - IF3 distributor (Mark III, Mark IV racks)*

Syntax:**if3=**__atten,mixer,sw1,sw2,sw3,sw4,pcal__

Response:if3/_atten,mixer,sw1,sw2,sw3,sw4,pcl,switch,cntrl,freq,rem/lcl,LOlock,TPI_

Settable parameters:

_atten_ Attenuation in dB, range *0-63*, default *0*. Enter an integer
value preceded by *+* or *-* to indicate a relative change. Other
options are: *max*, or *old* to restore the previous value after *max*.

_mixer_ Downconverter *in* or *out* of the signal path, default *out*.
In response only: 11 or 00.

_sw1_ Switch 1 state: output to port *1* (default) or port *2*.

_sw2_ Switch 1 state: output to port *1* (default) or port *2*.

_sw3_ Switch 1 state: output to port *1* (default) or port *2*.

_sw4_ Switch 1 state: output to port *1* (default) or port *2*.

_pcl_ Phase-cal control setting *on* (default) or *off*.

Monitor-only parameters:

_switch_ external switch, present or missing.

_cntrl_ phase-cal control modification, present or missing.

_freq_ Synthesizer frequency in MHz.

_rem/lcl_ Switch setting, rem or lcl

_LOlock_ LO lock/unlock status, lock or unlock

_TPI_ Total power integrator reading, decimal, 0-65535.

Comments:

MAT module functions are available. See section 1.0 of this manual.

The *max* and *old* values for _atten_ can be used to switch in the
maximum attenuation and then restore the previous (old) attenuation.
This is primarily useful for system temperature measurements. See the
*sxcts* procedure in the *Standard Procedure* manual for an example.

The mixer state commanded by this command and the down converter
frequency specified in the equip.ctl control file are used by the *pcal*
command to calculate the frequencies of the phase-cal tones for the
video converters that are specified as connected to IF3 with the *patch*
command. The *beam3* command also uses this information to calculate the
default beam size.

If the switch for the mixer is an undefined state, the _mixer_ response
is *11* or *00* depending on which incorrect state the mixer is in, see
the *MAT Protocol* manual for details.

The monitor values of the switch settings _sw1-sw4_ are null (empty) if
the equip.ctl file shows the switch as not connected. Only switches that
have been identified as connected can be commanded. The _switch_
monitor-only parameter indicates whether the switch box itself is
installed.

The external switch settings _sw1-sw4_ commanded are not used to
calculate the patching. The effect of the switch settings, i.e., which
video converters are connected to which inputs, must be specified in the
appropriate *patch* command.

Unless low-pass filters have been installed in some of the output
channels, the IF3 module should only be used to distribute “high”
170-500 MHz IF frequencies to the video converters.

The _cntrl_ parameter is only displayed if *if3* is set as the phase-cal
control type in equip.ctl.

Some racks may not have the IF3 module installed.

*ifdab - IF distributors, A & B (VLBA, VLBA4 racks)*

Syntax:**ifdab=**__attenA,attenB,inputA,inputB,avper__

Response:ifdab/_attenA,attenB,inputA,inputB,avper,TPA,TPB,serno,err_

Settable Parameters:

_attenA_ Attenuator setting for IF channel A. *0* (default) or *20* db.
Normally this attenuator should be set to *0* so that the 20 db can be
used for radiometry.

_attenB_ Attenuator setting for IF channel B. *0* (default) or *20* db.
Normally this attenuator should be set to *0* so that the 20 db can be
used for radiometry.

_inputA_ Input source for IF channel A. *nor* (default) for normal
input, *ext* for front panel IF input.

_inputB_ Input source for IF channel B. *nor* (default) for normal
input, *ext* for front panel IF input.

_avper_ Averaging period in seconds for the total power integrator. May
be *0*, *1*, *2*, *4*, *10*, *20*, *40*, or *60* seconds. A value of *0*
results in 1/80 sec averaging time. Default *1*. The averaging period is
synchronous with 1 pps.

Monitor-only Parameters:

_TPA_ Total power in IF channel A in counts. Range 0 to 66535, nominal
operating level = 16000.

_TPB_ Total power in IF channel B in counts. Range 0 to 65535, nominal
operating level = 16000.

_serno_ Module serial number.

_err_ Module timing error indication, 1pps or no_1pps.

Comments:

This command sets up the IF distributor module that is connected to
channels A and B. Use the ifdcd command to set up channels C and D. This
command is analogous to the Mark III *ifd* command.

MCB module functions are available. See section 1.0 of this manual.

The nominal input level to the rack is -20 dBm. If this level is present
then the total power will be at the nominal value and no extra
attenuation will be needed.

*ifdcd - IF distributors, C & D (VLBA, VLBA4 racks)*

Syntax:**ifdcd=**__attenC,attenD,inputC,inputD,avper__

Response:ifdcd/_attenC,attenD,inputC,inputD,avper,TPC,TPD,serno,err_

Settable Parameters:

_attenC_ Attenuator setting for IF channel C. *0* (default) or *20* db.
Normally this attenuator should be set to *0* so that the 20 db can be
used for radiometry.

_attenD_ Attenuator setting for IF channel A. *0* (default) or *20* db.
Normally this attenuator should be set to *0* so that the 20 db can be
used for radiometry.

_inputC_ Input source for IF channel C. *nor* (default) for normal
input, *ext* for front panel IF input.

_inputD_ Input source for IF channel D. *nor* (default) for normal
input, *ext* for front panel IF input.

_avper_ Averaging period in seconds for the total power integrator. May
be *0*, *1*, *2*, *4*, *10*, *20*, *40*, or *60* seconds. A value of *0*
results in 1/80 sec averaging time. Default *1*. The averaging period is
synchronous with 1 pps.

Monitor-only Parameters:

_TPA_ Total power in IF channel A in counts. Range 0 to 66535, nominal
operating level = 16000.

_TPB_ Total power in IF channel B in counts. Range 0 to 65535, nominal
operating level = 16000.

_serno_ Module serial number.

_err_ Module timing error indication, 1pps or no_1pps.

Comments:

This command sets up the IF distributor module that is connected to
channels A and B. Use the ifdab command to set up channels A and B. This
command is analogous to the Mark III *ifd* command.

MCB module functions are available. See section 1.0 of this manual.

The nominal input level to the rack is -20 dBm. If this level is present
then the total power will be at the nominal value and no extra
attenuation will be needed.

*k4ib - K4 IB Communications*

Syntax:**k4ib=**__device,command,mode,format,length__

Response:k4ib/_data_

Settable parameters:

_device_ mnemonic of device on K-4 bus from ibad.ctl to send data to,
may be null if __mode__=*poll* and must be null for __mode__=*status*

_command_ data to send, null if __mode__=*poll* or *status* or *read*

_mode_ Function: *normal* (default), *read*, *write*, *write/read*,
*poll*, or *status*

_format_ response format: *normal* (default), *ascii*, or *binary*

_length_ response length: *normal* (default), _decimal value_

Comments:

The _mode_, _format_, and _length_ parameters are organized so that as
often as possible they can be omitted.

If _mode_ is *normal*, the interpretation depends on the command sent:
if _command_ contains a *?* or is *stat*, *rd*, *lc*, or *lv*, the
_mode_ defaults to *write/read*, otherwise if _command_ is null it
defaults to *read*, non-null *write*.

If _format_ is *normal*, the interpretation depends on the command sent:
if _command_ contains *stat* or *err?* or if _mode_ is *poll* or
*status*, the _format_ defaults to *binary*, otherwise to *ascii*

If _length_ is *normal*, the interpretation depends on the command sent:
if _command_ is *rd* the _length_ defaults to 192, if *lv* to 143,
otherwise to 22,. The __length__is meaningless if _command_ is *poll* or
*status.*

If the device is omitted and the _mode_ is *poll*, all devices are
polled and, their status bytes are returned in the order of ascending ib
addresses. If a device times-out on a poll operation, a "-1" is

reported for its status byte.

If the _mode_ is *status*, the response returns the bus status.

In general mroe than one command can be sent if they are separated by
semicolons, but do not mix __command__s that require different modes or
more than one response in a single command.

See the documentation of the K4 devices for information on what commands
are available.

*k4pcalports - phase cal extraction ports*

Syntax:**pcalports=**__pca__,_pcb_

Response:pcalports/_pca_,_pcb_,_ampa_,_ampb_,_phasea_,_phaseb_

Settable Parameters:

_pca_ Channel A input port number: *1*-*4* or *9*-*12*

_pcb_ Channel B input port number *5*-*8* or *13*-*16*

Monitor-only parameters:

_ampa_ Channel A amplitude in voltage percent, uncorrected for digital
sampling

_ampb_ Channel B amplitude in voltage percent, uncorrected for digital
sampling

_phasea_ Channel A phase in degrees

_phaseb_ Channel B phase in degrees

Comments:

This command is available even if a K4 recorder is not being used for
recording. This allows the phase-cal extraction features of the K4, if
present, to be utilized at all times.

Some day it will possible to specify the phase-cal extraction port may
be specified as the port number or as the VC and sideband to be used. At
that time, the VC and sideband will only be displayed if the *recpatch*
command has been used to specify which port that VC sideband has been
connected to. If *recpatch* command will have specified a VC sideband
for the requested port, this will be shown in the response rather than
the port number.

*label - enter Volume Serial Number (K4 drives)*

Syntax:**label=**__vsn__

Response:label/_vsn_

Settable Parameters:

_vsn_ 8 character tape Volume Serial Number (VSN), no default

Comments:

No check is made to ensure assure label accuracy.

If a schedule is halted when the label is entered, its execution will
continue.

*label - enter tape VSN, check-label (longitudinal drives)*

Syntax:**label=**__vsn,check,type__

Response:label/_vsn,check,type_

Settable parameters:

_vsn_ 8 or 10-character tape Volume Serial Number (VSN), e.g.
*HS001234*.

_check_ 4-character check-label corresponding to VSN, e.g. *8E45*. If no
check label appears on the tape, run program labck to generate it.

_type_ *thick* or *thin*, defaults to type implied by VSN. For monitor,
this value only appears until the tape is loaded with a *rec=load*
command. This parameter is not available unless vacuum switching is
enabled in sw.ctl control file.

Comments:

Normally used after *newtape* command has halted the schedule. There are
two different modes of operation depending on whether the Volume Serial
Number (VSN) has 8 or 10 characters. When the *label* command is entered
directly by the operator, 8-character VSNs are used. Tape number and
check label must correspond or execution of the schedule will not
continue. The effect of this command is the same as that of *cont*.
Digit zeros “0” and letters “O” are both treated as zeros in both number
and check for operator convenience.

The ten-character mode will normally be used only by the rwand program.
In this mode, the first eight characters of _vsn_ correspond to the tape
number, while the tenth character is used for a checksum. Any other
parameters are ignored. A fake, but correct, check-label code will be
generated if the checksum is correct. Please note a trailing comma is
necessary if the tenth character (checksum) is a space.

For VLBA and VLBA4 drives and specially-equipped Mark IV drives that use
vacuum switching, this command is used to specify whether the thick or
thin vacuum level (and for VLBA and VLBA4 drives the thickness
parameters as well) are commanded. Please see the *rec* command for more
details.

Labels starting with the following strings (letters “O” replaced by
numerals “0") are assumed to be thin by default: *0VLB*, *3MTHN*,
*CMVA*, *DSCP*, *EVNT*, *GIFT00*, *HST*, *ISAS*, *JIVE*, *MPIT*, *NAIC*,
*NASA*, *SAMP*, *SVLB*, *THNINT*, *UNQU*, *USN01*, and *VLBA*. All
others are assumed to be thick. There are no known deviations from this
at this time. However, the _type_ parameter can be used to override the
default if necessary.

*label - enter tape VSN and type (S2 drives)*

Syntax:**label=**__vsn,type,code__

Response:label=__vsn,type,code__

Settable parameters:

_vsn_ up to 20 character Volume Serial Number (VSN), e.g.
*CA-1-0012305*.

_type_ one or six character tape type, e.g. *1*, or *010020*. This field
may be omitted if _code_ is *csa*. If not omitted and _code_ is *csa*,
it must agree with the type specified in the _vsn_.

_code_ tape label format, an arbitrary string up to 32 characters,
default is *csa*.

Comments:

Normally used after *newtape* command has halted the schedule.

If _code_ is *casa*, _vsn_ is interpreted as a CSA format,
“XX-T-YYYYYZZ-N” label. The “XX-T-YYYYZZ” part of the label uniquely
identifies this as a set of eight tapes. The check-sum is checked. If
_type_ is specified it must agree with the “T” type from the _vsn_,
unless six characters are specified for _type_. If _type_ is not
specified, the single character “T” from the _vsn_ is used as the typ.
The suffix “-N” must be omitted if all eight tapes in a set are loaded,
even if they will not all be recorded as one group. If fewer than eight
tapes are loaded, which tapes are inserted and the order of their
insertion in the transports should be specified in the suffix. For
example if the first four tapes in a set are inserted in order the
suffix “-0123" should be used. When fewer than eight tapes are inserted
they should be inserted in ascending order and must go into consecutive
transports in ascending order starting with transport 0. Loading the
tapes in this way and using the suffix as described is necessary in
order for the correlator to load the tapes for playback based only on
information available in the log. In addition, if the tapes are not
inserted in consecutive transports beginning with transport 0, the
schedule will probably fail.

For all other values of _code_, _vsn_ may be an arbitrary string up to
20 characters long, but _type_ must be specified in this case.

If the recorder is already recording and a tape type different than what
is in use is requested, no change will be made and an error will be
reported.

*list - display portion of currently active schedule*

Syntax:**list=**__start,#lines__

Response:_display of 10 lines of schedule_

Settable parameters:

_start_ place in the schedule to begin listing. May be one of the
following:

null to start two lines before the line currently being executed

____
**#**__line__, where _line_ is the starting line number, to start at a
particular line number in a schedule

_time_, in standard SNAP time format, to start at the line which has a
time equal to or later than _time_
____

_#lines_ number of lines to list, default *10*

Monitor-only parameters: none

Comments: Ten lines of the current schedule, with line numbers, are
listed on the terminal. If the current executing line of the schedule is
included in the range listed, it is identified by a leading right arrow
>. Only the active schedule may be listed with this command. This is a
display-only response - no information is logged.

*lo - LO frequencies (all racks)*

Syntax:**lo=**__chan,freq,sb,pol,pcspace,pcoff__

Response:lo/_chan,freq,sb,pol,pcspace,pcoff_

Settable parameters:

_chan_ **lo**__X__, where _X_ is one of *1*, *2*, or *3* for Mark III/IV
and K-4 or *a*, *b*, *c*, or *d* for VLBA/4. No default.

_freq_ LO frequency for this channel, MHz. No default. No previous value
available.

_sb_ Net sideband for this channel, *unknown*, *usb* or *lsb*. Default
is *unknown*..

_pol_ Polarization for this channel, unknown, rcp, or lcp. Default is
*unknown*.

_pcspace_ Spacing of phase-cal rails for this channel, MHz, *unknown*,
or *off*. Default is *unknown*.

_pcoff_ First phase-cal rail frequency for this IF if not equal to the
spacing, MHz. Default 0.0. This offset is specified relative to DC in
the IF.

Monitor-only Parameters: none

Comments:

This command specifies the characteristics of each IF channel. It is an
information only command in its standard implementation, but may be
implemented as a station command to provide hardware control.

The values should represent the net of effect of all stages of
conversion before the signal enters the rack. In other words any
upconverter should be included. The values for the Mark III/IV IF3
channel should not include the effect of the internal IF3 mixer, but
instead should specify the input to the IF3 module.

The LO frequencies are used by the pcalr and pcald programs to calculate
the frequencies of the phase calibrator tones. Pcalr has not been tested
with spacings other than 1 MHz. The **beam**__x__ commands use the LO
frequencies to calculate default beamwidths.

An *lo=* with no parameters clears all LO values.

The monitor form of *lo* shows all defined LO values.

In the future, for K4 type 1, the range of LO values should be *1*-*4*,
for K4 type 2, *1*-*16*.

*locate - locate head stack position (longitudinal drives)*

Syntax:**locate=**__range,nsamples,step,stack__

Response:locate/_range,nsamples,step,stack,peakv,mper,vltlc_

Settable parameters:

_range_ ± range to search over in microns. Default is *200*.

_nsamples_ Number of power samples for each measurement position.
Default is *1*.

_step_ Micron step size between measurement positions. Default is *40*.

_stack_ Head stack to move: *1*, *2*, **w**rite or **r**ead. Default is
*2* for Mark III/IV and VLBA4, and *1* for VLBA. Only 1 is valid for
VLBA and MK3B recorders. The value **w**rite is synonymous with *1* and
**r**ead is synonymous with *2*, even if the heads are wired
differently. Only the first character for **w**rite and **r**ead is
checked; these possibilities are provided for backward compatibility
only.

Monitor-only parameters:

_peakv_ peak measured voltage from power detector

_mper_ minimum sample voltage as a percentage of peakv

_vltlc_ location of the peak in positioner voltage

Comments:

This command performs a coarse grid search for the largest detected
power over the search range. The search is performed over a range of
±__range__ microns about the initial head position. The number of
positions sampled is ((2*_range)/step_)+1. The actual positions at which
measurements are made are not exactly _step_ microns part. The head
stack will be positioned within ±5 microns of the nominal positions.
This approximation is used to reduce the time moving the head stacks by
not over-refining the positions of what is a coarse search anyway. In
the worst (too coarse) case two positions might be __step__+10 microns
apart.

After sampling over the complete range, *locate* returns the head stack
to the position that gave the highest power level, makes a new
measurement and reports these values for the _peakv_, _mper_, and
_vltlc_ parameters.

This command requires that the reproduce power detector be hooked-up
with a reasonable amount of attenuation and that the head.ctl control
file correctly identify which detector (odd or even) is in use. This
command must be issued once with parameters to set it up. Issuing the
command subsequently without parameters will start a search. The tape
must moving and there must be recorded data to reproduce for this
command to do something useful.

See the *Narrow Track Calibration* manual.

*log - start a new log file*

Syntax:**log=**__name__

Response:log/_name_

Settable parameters:

_name_ name of log file to be opened. If no directory path is specified,
/log is assumed. If no extension is specified, .log is assumed.

Monitor-only parameters: none

Comments:

When the Field System is initialized, log file station.log was opened or
created in directory /usr2/log. If the log file requested by this
command cannot be opened or created, the Field System returns to using
the log file previously in use. If no log file can be successfully
opened, execution of the schedule continues, but an error message is
displayed on the screen every time an attempt is made to write into the
log.

*logout - set log output units*

*This command is not implemented*

Syntax:**logout=**__dev,dev,...__

Response:none

Settable parameters:

_dev_ Device name for display of log entries. Up to 5 devices may be
specified. Default device is the log/display window.

Comments:

Log entries are always written into the log file, this command is only
for display during operations. All log entry display may be suppressed
by issuing the command *logout=/dev/null*.

An example of the use of this command is to specify a file name as the
device in order to record a portion of the log file into a separate
file. Another example would be to have the log display appear on a
different terminal from the console screen.

You must have permission to write to any device or file that you
specify. If you specify a device which you do not have permission to
write to, an error will be generated when the Field System attempts to
open that device.

*NOTE: This command is not implemented.*

* +
*

*lvdt - positioning by LVDT voltage (longitudinal drives)*

Syntax:**lvdt=**__cmdVw,cmdVr__

Response:lvdt/_cmdVw,cmdVr,actVw,actVr,deltaVw,deltaVr_

Settable parameters:

_cmdVw_ Command position voltage for the write head stack, default is
don’t move. For Mark IV this parameter refers to head stack 1.

_cmdVr_ command position voltage for read head stack, default is don’t
move. This parameter is not valid for VLBA recorders. For Mark IV this
parameter refers to head stack 2.

Monitor-only parameters:

_actVw_ Actual position voltage for write head stack (Mark IV stack 1)

_actVr_ Actual position voltage for read head stack (Mark IV stack 2),
null for VLBA

_deltaVw_ voltage difference between actual and commanded write head
stack position (Mark IV stack 1).

_deltaVr_ Voltage difference between actual and commanded read head
stack position (Mark IV stack 2), null for VLBA

Comments:

This command is used to position the head stacks in voltage units. An
individual stack may be moved by not specifying a command voltage for
the other stack. The commanded positions are uncalibrated.

VLBA recorders have only one head stack. Its positioning is specified by
using the first (write) stack parameter. Monitor parameters for the read
head stack are reported as null.

For Mark IV recorders, the write head stack parameters correspond to
head stack 1, the read head stack parameters to head stack 2.

The _deltaVx_ parameters are reported with the sign of actual minus
commanded.

The command positions reported by the *lvdt*, *pass*, and *stack*
commands are consistent. See the description of the *pass* command for
more information.

If the write head stack position is commanded, the auxiliary data field
is set to reflect the commanded position, see the *pass* command for
more information. (Not yet implemented for VLBA.)

For VLBA2 drives, the voltage units are actually in kÅ (0.1 microns) of
head position. This implies that the scale is expanded by a factor of
about 1500 over the LVDT voltage scale of other drives.

*mat - general communications with ASCII Transceivers*

Syntax:**mat=**__data,data,...__

Response:mat/_data,data,..._

Settable parameters:

_data_ complete message to be sent to MAT system, including actual hex
address and all other protocol. No checking is done. Each message
between commas is sent separately. All special non-printing characters,
such as escape, should be typed directly on the keyboard or they will be
sent as typed. EXCEPTION: The character enq will be substituted for any
TAB encountered in the message.

Monitor-only parameters:

_data_ response of MAT system, if any, to each message.

*matload - download 8080 code to MAT*

Syntax:**matload=**__unit addr,mem addr,data__

Response:matload/_acknowledgement_

Settable parameters:

_unit addr_ the hex address of the MAT to receive the code.

_mem addr_ the hex location for the start of the load, 4 characters.

_data_ the hex data bytes to be transmitted, must be an even number of
them.

Comments:

The message to the unit that is sent:

#unit addr:nnmem addr00datacc

where nn=number of data bytes, cc=check sum. Remember that 2-byte data
values are sent least significant, most significant.

*mk5 - Low-level Mark V interface*

Syntax:**mk5=**__command,...__

Response:mk5/_response,..._

Settable parameters:

_command_ low-level Mark 5 command or query

Monitor-only parameters:

_response_ response from the Mark 5.

Comments:

Multiple __command__s can be sent with one *mk5* command by separating
them with commas. The __response__s for each command are separated by
commas.

Please refer to the Mark V command sent document for details on
available commands and their responses.

*mk5close - Close the Mark V connection*

Syntax:*mk5close*

Response:none

Comments:

This command can be used to close the connection to a Mark V5 recorder.
It is recommended that this be done prior to shutting down the Mark V
control program for a disc swap. The connection can be re-opened with
the *mk5relink* command.

*mk5relink - re-establish the Mark V connection*

Syntax:*mk5relink*

Response:none

Comments:

This command can be used to open a new connection to the Mark 5
recorder. If the connection is already open, it will be closed and new
one established. Opening a new connection is needed after after the Mark
V’s control program has been restarted or its power has been cycled.
This may happen for example for a disc swap.

If a schedule is running, but **halt**ed, this command will release the
halt if a connection is successfully re-established.

*mount - pre-mount tape (longitudinal drives)*

Syntax:**mount=**__vsn,check,type__

Response:mount/_vsn,check,type_

Settable parameters:

_vsn_ 8 or 10-character tape Volume Serial Number (VSN), e.g.
*HS001234*.

_check_ 4-character check-label corresponding to VSN, e.g. *8E45*. If no
check label appears on the tape, run program labck to generate it.

_type_ *thick* or *thin*, defaults to type implied by VSN. For monitor,
this value only appears until the tape is loaded with a *rec=load*
command. This parameter is not available unless vacuum switching is
enabled in sw.ctl control file.

Comments:

This command is similar to the *label* command, except that it does not
release a schedule that is halted and in addition it issues a command to
cause the SNAP procedure *mounter* to execute.

The *mounter* SNAP procedure is included in experiment procedure files.
For all drive types except VLBA and VLBA4 the procedure is empty. For
VLBA and VLBA4 the procedure contains only *rec=load*.

This command only comes in the dual recorder forms, *mount1* (with
*mounter1*) or *mount2* (with *mounter2*). It is not available for
single recorder systems, hence the generic form *mount* (with *mounter*)
does not exist.

Thiscommand is used to pre-mount a tape in advance of a tape change in a
two recorder system. Only the currently un-selected drive (see the
*select* command) may have its tape pre-mounted. The intent is that this
command can be use to inform the FS about the tape will be used next on
the drive that is not in use thus freeing the operator from having to be
physically present at the tape change. When the FS is ready to load a
new tape at the next tape change it will remember the presence of the
new tape and not halt the schedule with the *newtape* commmand is
encountered. If a tape has not been pre-mounted, *newtape* will stop the
schedule as usual.

After issuing this command the operator should take whatever steps are
necessary to load the tape. For the VLBA and VLBA this is automated
through the *mounter* SNAP procedure. For other recorders there is no
standardized way to automatically load the tape, so the operator must
take appropriate action.

All other details of this command are the same as those of the label,
please refer to thatcommand for further information.

*mcb - MCB Communications*

Syntax:**mcb=**__module,reladdr,value__

Response:mcb/_value_

Settable Parameters:

_module_ Module mnemonic indicating which module is to be addressed.
Only standard module mnemonics allowed. Use null to indicate that the
following address is an absolute address.

_reladdr_ Relative MCB address (hex), i.e. the offset from the module's
base address. This is the address to be read if a value is not given.
This is the address to write to if a value is given. If _module_ is
null, then this is an absolute address.

_value_ Value (hex) to be written into _reladdr_. Omit this parameter if
you want to read _reladdr_.

Monitor-only Parameters:

_value_ Value (hex) that was read from _reladdr_, if a value was not
specified in the command. If a value was specified in the command, then
the response is the status of the write: OK, BUSY, ERR.

Comments:

This command is analgous to the Mark III mat command. This command is
used to read values from or write values to a specific MCB address.

If the command is issued as **mcb=**__module,reladdr__ then the response
is the hex value at _reladdr_.

If the command is issued as **mcb=**__module,reladdr,value__ then the
value is downloaded into _reladdr_ and the response is the status.

*newtape - halt schedule until tape is mounted (all drives)*

Syntax:**newtape=**__tape__

Response:newtape/"To continue, use LABEL command"

newtape/LABEL=__label__

Settable Parameters:

_tape_ Used for a K4 drive with DMS only: Tape number for the DMS to
load, *1*-*24*. Default is to not use the DMS.

Monitor-only Parameters:

_label_ Used for a K4 drive with DMS only: the label read when the tape
was loaded

Comments:

If a tape number is specified, the DMS is instructed to insert the tape
specified from the DMS into the recorder. The DMS is instructed to read
the label bar-code on the tape. The response shows the label read. The
“To continue response does not appear. If a schedule is halted, its
execution continyes

If no tape number is specified (i.e., if *newtape=…*, or *newtape* is
entered) for a non-K4 drive or for a K4 drive without a DMS installed,
the response will be displayed and the schedule will be halted until a
label is entered. The LABEL= response does not appear.

For non-K4 drives or for a K4 with no DMS, this command in effect is the
same as the *halt* command. Execution will continue after the *label*
command has been successfully completed. If you are in a rush, the
*cont* command will also work to continue execution of the schedule

*oldtape - unload tape to DMS (K4 drives)*

Syntax:**oldtape=**__tape__

Response:oldtape/”Dismount this tape now”

Settable Parameters:

_tape_ Tape number position for the DMS to return the tape to, *1*-*24*.
Default is to not use the DMS.

Comments:

If a tape number is specified, the DMS is instructed to return a tape
(that has already been ejected from the drive) to the specified position
in the DMS.

If no tape number is specified (i.e., if **oldtape**= or *oldtape* is
entered) or a DMS is not installed, the response will be displayed.

*onoff - on-off radiometry*

Syntax:**onoff=**__rep,intp,dev1,dev2,cutoff,stp__

Response:onoff/_rep,intp,dev1,dev2,cutoff,stp,cal1,cal2,_

_beam1,beam2,flux1,flux2,chain1,chain2_

Settable parameters:

_rep_ Number of repetitions, *1* to *99*. Default is *2*.

_intp_ Integration period, *1* to *10* seconds. Default is *1*.

_dev1_ Device to be used as detector 1. Standard detector mnemonics are
allowed. Default is *i1* for Mark III/IV, *ia* for VLBA/4. Station
dependent detectors *u5* and *u6* may be available.

_dev2_ Device to be used as detector 2. Standard detector mnemonics are
allowed. Default is *i1* for Mark III/IV, *ib* for VLBA/4. Station
dependent detectors *u5* and *u6* may be available.

_cutoff_ Elevation above which to step in elevation rather than azimuth,
in degrees, default *60*.

_stp_ Distance off source for off source and calibration points, in
multiples of a beamwidth. Default is *5.0*.

Monitor-only parameters:

_cal1_ Calibration noise source temperature in degrees K for detector 1.
This is determined from the last **caltemp**__x__ command in conjunction
with the *patch* (Mark III/IV) or *bbc* (VLBA/4) command.

_cal2_ Calibration noise source temperature in degrees K for detector 2.
This is determined from the last **caltemp**__x__ command in conjunction
with the *patch* (Mark III/IV) or *bbd* (VLBA/4) command.

_beam1_ The full width half maximum beam size (degrees) for device 1. It
is determined from the **beam**__x__ command and the *patch* (Mark
III/IV) or *bbc* (VLBA/4) command.

_beam2_ The full width half maximum beam size (degrees) for device 2. It
is determined from the **beam**__x__ command and the *patch* (Mark
III/IV) or *bbc* (VLBA/4) command.

_flux1_ The apparent source flux for device 1, based on the
**flux**__x__ command and the *patch* (Mark III/IV) or *bbc* (VLBA/4)
command.

_flux2_ The apparent source flux for device 2, based on the
**flux**__x__ command and the *patch* (Mark III/IV) or *bbc* (VLBA/4)
command.

_chain1_ The IF chain, *1*-*6*, that device 1 is on. Chains *5* and *6*
are for station specific detectors *u5* and *u6*. Mark III/IV racks use
IFs *1*-*3*. IFs *1*-*4* corresponds to IFs a-d for VLBA/4 racks.

_chain2_ The IF chain, *1*-*6*, that device 2 is on. Chains *5* and *6*
are for station specific detectors *u5* and *u6*. Mark III/IV racks use
IFs *1*-*3*. IFs *1*-*4* corresponds to IFs a-d for VLBA/4 racks.

Comments:

The parameters should be setup by issuing a **onoff=**__…__ command. A
measurement is started by issuing a simple *onoff*. This will recover
the current values for the display only parameters and schedule an
external program onoff. See the *onoff* manual in Volume 2.

The current command antenna position including offsets is assumed to be
'onsource.'

It is recommended that nothing else be done, e.g. running a schedule,
while this command is executing. Since this command may run for an
extended period of time, a mechanism has been supplied for aborting:
enter *sy=brk onoff &* as a SNAP command. After aborting, the offsets
will be returned to their original values.

In order for this command to work, the following conditions must be met:
(1) the detector devices have been set up by the Field System, (2) the
appropriate **lo=**__…__ commands have been issued, (3) the IF
distributors have been set up by the Field System and it must be in
remote (Mark III only), and (4) the appropriate **beam**__x__**=**__…__
commands have been issued. Additionally, for a Mark III/IV rack, if a
video converter is used as a detector, the appropriate **patch=**__…__
command must have been issued. For a VLBA/4 rack with a BBC as a
detector, the appropriate BBC IF input must be selected with a
**bbc**__XX__**=**__…__ command. If system performance is to be
estimated based on the source's apparent flux, then the appropriate
**flux**__x__**=**__…__ command must have been issued.

If a noise diode temperature is less than zero, it is assumed that there
is no noise diode to use for that detector. All measurements for that
channel will be made assuming the absolute value of the diode
temperature is the system temperature. Thus if the noise diode
temperature is -100, the power measurements will come out as a
percentage of the system temperature.

If either noise diode temperature is greater than zero, then two
procedures must be available: *calonnf* and *caloffnf*, which are used
to turn the noise diode on and off respectively. The recommended form
for these procedures is:

*CALONNF: calon*

*!+1s*

*sy=go onoff &*

*CALOFFNF: caloff*

*!+1s*

*sy=go onoff &*

*calon* and *caloff* are local procedures that do whatever is necessary
to turn the noise source on and off, respectively.

If station dependent detectors *u5* and/or *u6* are used, two additional
procedures must be available to turn the signal on and off to the
detectors. The recommended form of this procedures is:

*SIGONNF: sigon*

*!+1s*

*sy=go onoff &*

*SIGOFFNF: sigoff*

*!+1s*

*sy=go onoff &*

*sigon* and *sigoff* are local procedures that do whatever is necessary
to turn the signal to the station dependent detectors on and off,
respectively.

There is a known bug in the use of these procedures: *calonnf*,
*caloffnf*, *sigonnf*, and *sigoffnf*, that may require the last two
lines to be repeated in each procedure. In other words after the first
line, each procedure should contain:

*!+1s*

*sy=go onoff &*

*!+1s*

*sy=go onoff &*

The indication that this is needed is if onoff seems to hang after
executing one of these procedures. Please see the “Known Bugs” section
of the latest update notice for more details.

* +
*

*onsource - get antenna pointing status*

Syntax:*onsource*

Response:onsource/_status_

Settable Parameters: none

Monitor-only Parameters:

_status_ tracking or slewing, depending on the errors in pointing.

*op - operator identification*

Syntax:**op=**__name__

Response:none

Settable Parameters:

_name_ Operator name or initials, maximum of 12 characters. Embedded
blanks are allowed.

*op_stream - place command in operator stream*

Syntax:**op_stream=**__command__

Response:none

Settable Parameters:

_command_ The command to be placed in the operator command stream.

Comments:

This command can be used from the schedule to enter commands into the
operator stream. This is useful because a time-scheduled command entered
from the schedule stream will be blocked when the schedule is executing
a timed wait.

This command might be used to periodically record TIP values during an
observation. For example, the following procedures might be used to
sample TIP values every 10 seconds during an observation:

MIDOB: *op_stream=start*

...

START: *collect@!,10s*

COLLECT: *tpi=odd,even,if1,if2*

POSTOB: *collect@*

A great deal of care needs to be exercised when using this command. In
particular, _command_ should not cause any long timed waits to occur
since this will block the operator stream (in a pinch, the operator
stream can be freed from a long wait by using the *flush* command). Also
no command that might cause interference with the execution of the
schedule should be used. In partiular this would mean avoiding the use
of tape motion commands.

Note that any use of *@* in _command_ is interpreted to apply to the
*opstream=...* command itself and is removed from the _command_ before
what is left is placed in the operator stream. This is the reason that
the START procedure was necessary in the example above.

This command is considered experimental. It creates a new type of
interaction between the schedule and operator streams. It may be
necessary to modify or remove this feature if some unanticipated
consequence proves to be a problem.

link:parity#1[*+++parity - check parity errors (longitudinal
drives)+++*]

Syntax:**parity=**__pemax,syncmax,channel,aux,tracks__

*parity*

Response:parity/_parity-errors_

parity/_re-sync-errors_

Settable Parameters:

_pemax_ Maximum allowable parity errors per channel per megabyte of
data. Default is *600*. If errors exceed threshold, an error message is
issued.

_syncmax_ Default is *12*. Otherwise handled the same as parity error
threshold.

_channel_ Decoder channel. Can be *a*, *b*, or *ab* (default).

_aux_ Aux data check, *on* (default) or *off*. Not supported for VLBA
DQA decoder.

_tracks_ List of recorder tracks on which to measure errors. Default is
the currently enabled tracks. For Mark III drives, tracks and must be
between *1* and *28*, and/or may be specified by groups (*g1*, *g2*,
*g3*, *g4*) as in the *enable* command. For Mark IV, and VLBA/4 drives,
tracks must be between *0* and *35*, or specified by groups (*g0*, *g1*,
*g2*, *g3*) as in the *enable* command, or specified as non-system
tracks in the VLBA groups (*v0*, *v1*, *v2*, *v3*),or specified as the
Mark III tracks in the VLBA groups (*m0*, *m1*, *m2*, *m3*).

Monitor-only parameters:

_parity-errors_ For each track in the list, the corresponding parity
error rates per megabyte of data per track.

_re-sync-errors_ For each track in the list, the corresponding re-sync
error rates per megabyte of data per track.

Comments:

Issuing this command with an equal sign without or without a list of
parameters sets up the command. Issuing the command with no equal sign
then measures the error rates.

A **repro=**__…__ must be issued before the parity command will work.
For Mark IV and VLBA/4 this specifies the bit rate. For Mark III this
specifies the next best thing, the reproduce bandwidth.

This command assumes the read head stack is positioned appropriately for
the tracks that will be read. The heads that are used to reproduce data
are automatically mapped from even to odd or vice-versa depending on the
reproduce electronics specified in the head.ctl control file. For VLBA
and VLBA2 drives the write head parameter controls which heads are used.
If a mixture odd and even heads are requested no mapping is done.

If the auxiliary data field was set using the *form* or head positioning
commands, then it is checked for accuracy, unless the _aux_ parameter is
*off*. An error message is issued if the auxiliary data on the tape does
not agree with the value last sent to the formatter.

If the log entry for the error rates is too long to fit in one line,
then additional log entries are generated as necessary. Parity error
rates are listed first followed by synch error rates. The parity error
rate log entries include decimal points in the numbers to distinguished
them from the synch error log entries which do not.

The decoder channels used to read the data can be specified, either *a*,
*b*, or both *a* and *b* reproduce channels can be used. If pcalr is
running, it should be suspended before starting this command so that
there's no competition for the *b* channel.

The data stream is sampled for an amount of time that should be
equivalent to 1 megabyte of data per channel and the effective error
rates per megabyte of data are reported. For the typical reproduce bit
rate of 4 Mbits/sec/track, 1 megabyte corresponds to 2 seconds. For
slower bit rates it will take longer.

The decoder type (*mk3*, *mk4*, *dqa*, or *none*) must specified on the
second line of the sw.ctl control file. If the type is *none*, the
tracks are cycled through with a pause of 2 seconds between changes to
allow visual inspection of the eye-pattern (and perhaps a K3 decoder if
available) even if no supported decoder is available.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* Manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses VLBA, Mark IV, or Mark III track and VLBA or Mark
III group numbers depending on the type of drive in use.

link:3#1[*+++pass - positioning by pass number (longitudinal
drives)+++*]

Syntax:**pass=**__cmdPw,cmdPr,woffset__

Response:pass/_cmdPw,cmdPr,woffset,cmdMw,cmdMr,actMw,actMr,_

_deltaMw,deltaMr_

Settable parameters:

_cmdPw_ Command pass number for write head stack (Mark IV stack 1),
range *1-100* for Mark III and VLBA, *1-112* for Mark IV. Default is to
not move the write head stack. For Mark IV recorders, if the parameter
is *stack2*, then stack 1 is moved to the most recently commanded stack
2 position.

_cmdPr_ Command pass number for read head stack (Mark IV stack 2), same
range as for write head stack. This parameter may not be specified for
VLBA recorders. If the parameter is *same*, the read pass will be same
as the write pass. For Mark IV, if the parameter is *mk4*, then stack 2
is positioned to 100 plus the pass number for stack 1. Default is to not
move the read head stack.

_woffset_ Type of offset for the write head. *auto* (default) or *none*.
Only the first character is checked. For *auto*, the head stack position
is automatically adjusted according to the write head type parameter in
the head.ctl control file. For *none*, no adjustments are made. Use
*none* for Mark IV recording and for all mode A recording. The read head
is always adjusted.

Monitor-only parameters:

_cmdMw_ Microns corresponding to command write head pass number.

_cmdMr_ Microns corresponding to command read head pass number, null for
VLBA.

_actMw_ Microns corresponding to actual write head pass number.

_actMr_ Microns corresponding to actual read head pass number, null for
VLBA.

_deltaMw_ Micron error between actual and commanded write head position.

_deltaMr_ Micron error between actual and commanded read head position,
null for VLBA.

Comments:

This command moves the read and/or write head stacks to the position for
the commanded passes. The correspondence of pass numbers to a priori
micron positions is established by the *tapeform* command. The requested
pass must have been set-up by the *tapeform* command to be used. Odd
pass numbers are used for forward passes, even for reverse.

Only the write head stack parameters in this command are used for VLBA
recorders. The read head stack parameters are reported as nulls. For
Mark IV, the write head stack parameters refer to head stack 1, the read
head stack parameters refer to the head stack 2.

The head stack position in microns is determined by

_position = tapeform offset + absolute offset_ (forward pass)

_position = tapeform offset + absolute offset + for/rev offset_ (reverse
pass)

where _tapeform offset_ is the a priori offset as specified with the
*tapeform* command, and the _absolute offset_ and _forward/reverse
offset_ are specified in the head.ctl control file.

If _woffset_ is *auto*, and the commanded pass is a reverse pass, and
the write head stack is defined as *odd* in the head.ctl control file,
then an offset of 698.5 microns is added to the write head stack
position.

If _woffset_ is *auto*, and the commanded pass is a forward pass, and
the write head stack is defined as *even* in the head.ctl control file,
then an offset of 698.5 microns is subtracted from the write head stack
position.

If _woffset_ is *none*, then no offset is applied to the a priori offset
for the write head. The read head is always adjusted.

An individual head stack can be moved by not specifying a command pass
number for the other head stack. The read (stack 2) command pass can be
*same*, which causes it to be the same as the write head stack pass
number. This feature is useful for setting both head stacks to the same
pass number in set-up procedures. The read (stack 2) command pass can be
*mk4*, which causes head stack 2 to be positioned to the position for
the pass number specified for head stack 1 plus 100. This feature is
useful for positioning both Mark IV head stacks using a single pass
number in set-up procedures. Also for Mark IV, the write (stack 1)
command pass can be *stack2*, which causes head stack 1 to be positioned
to the most recently commanded position of stack 2. This feature is
useful for positioning stack 1 (the only stack that can play back) to
read tracks that were just recorded with stack 2.

The _deltaM_ parameters are reported with the sign of actual minus
commanded.

The commanded positions of the *lvdt*, *pass*, and *stack* commands are
reported consistently. For example, if you command the head stack
positions with the *stack* or *pass* command, you can determine the
corresponding command voltage with *lvdt*. And vice-versa, the micron
position corresponding to a voltage position commanded with *lvdt* can
be determined with *stack* or *pass*.

The commanded pass numbers reported by *pass* are given special values
if either *lvdt* or *stack* last commanded the positions. If *lvdt* or
*stack* is used with uncalibrated positions, the commanded pass number
will be reported as 0. If the *stack* command with forward calibrated
positions was used, -1 will be reported for the pass number, for reverse
calibrations -2 will be reported.

For Mark III fromatters, when the write head is moved by either *pass*,
*stack*, or *lvdt*, the auxiliary data field used by the formatter is
set to reflect the commanded position. The twelve characters of the
auxiliary data field are set as:

_xxwxwxyzyzff_

_xx_ ff for forward calibration (odd passes)

____
fe for reverse calibration (even passes)

fd for uncalibrated positions.
____

_wxyz_ 0000-3999 for positive micron positions

____
4000-7999 for negative micron positions
____

_ff_ hex characters ff

The positions occupied by _wxyz_ are the four digits of the commanded
micron write head position. In the auxiliary data field the digits are
repeated two at a time. The negative positions are represented as the
4000+ absolute value of the position. The _xx_ field is used to identify
which type of calibration was used to set the position. The last two
digits of the auxiliary data are fixed with the value ff.

For VLBA fomatters, the auxiliary data field depends on the format used.
For “data replacement format”, the auxilary data field for the Mark III
formatter is used. For VLBA format, the contents of the auxilary data
field are controlled by the formatter. The FS writes the station
hardware ID to formatter address 0xA6 and the micron head position in
BCD (with the most significant bit in the most significant digit on for
negative values) to address 0xA7.

For Mark IV, there are eight characters (32 bits) available for
auxiliary data. They are set as:

_abcdwxyz_

_abcd_ head stack 0 position in microns

_wxyz_ head stack 1 position in microns

Characters _a_ and _w_ have the following bit structure:

_bit 0_ thousands digit for the micron position, usually 0

_bit 1_ 0 for forward calibration (odd passes), 1 for uncalibrated

_bit 2_ 0 for reverse calibration (even passes), 1 for uncalibrated

_bit 3_ sign of the position, 0 for positive, 1 for negative

link:5#1[*+++patch - IF patching (Mark III, Mark IV, all K4 racks)+++*]

Syntax:**patch=**__lon,vc#horl,...__

Response:none

Settable Parameters:

_lon_ First LO. One of *lo1*, *lo2*, or *lo3*. No default.

_vc#horl_ Video converter. For Mark III or Mark IV, Video converter
number with the character *h* or *l* appended, e.g. *1h* or *3l*. *h*
indicates the high band of the channel, and *l* the low. For K4 type 1:
*1-4*, *5-8*, *9-12*, or *13-16* for K4 type 2: *a1*, *…*, *a8*, *b1*,
*…*, *b8*. No default.

Comments:

For Mark III and Mark IV, this command stores the patching information
for access by program pcalr and the antenna calibration programs. This
command identifies which video converters are patched to channel 1,
which to channel 2. This command is not needed for VLBA systems because
the *bbc* command specifies the connections. This command is for
information only, it does not physically make any connections.

The *lo* command should be used to specify the LO frequencies.

link:pcal#1[*+++pcal - set up/activate pcalr (Mark III racks and
drives)+++*]

Syntax:**pcal=**__#cycles,pause,repro,#blocks,debug,track, ...__

Response:none

Settable parameters:

_#cycles_ Number of times to cycle through tracks. *0* = run
continuously (default).

_pause_ Time to pause between cycles, seconds. Default is *60* seconds.

_repro_ Type of reproduce mode:

*fs* = use current mode set up by Field System

*by* = use bypass mode

*rw* = use read after write mode

*ab* = use split mode (implies bypass mode too)

____
If an experiment is in progress (i.e. if a schedule file is active) then
*fs* is the recommended mode. Attempts to force read-after-write or
bypass may result in compromising execution of the schedule.
____

_#blocks_ Number of blocks to average, default *25*. The default gives 5
degrees rms phase noise or an SNR of 10.

_debug_ *0* for no debug printout (default). A value of *+1* prints the
data buffer status each time it responds. A value of *+2* will print the
actual data and more detailed status information. The values *-1* and
*-2* will simply test communications with the data buffer and then quit.

_tracks_ Tape recorder track(s) to use. *0* = use all tracks for current
mode (default). A list of track numbers may be given. A list of video
converters may be specified by preceding each number with *v*. The words
*all*, *even*, *odd* referring to tracks and *vall*, *veven*, *vodd*
referring to VCs may be used. Split mode will be set up for the outer
channels in the frequency sequence, if bypass mode is set up.

Comments:

Invoking this command with no parameters activates pcalr. To stop pcalr,
use the command *sy=brk pcal*. Before starting pcalr, specify LO
frequencies with the *lo* and *upconv* commands, set up IF3 with the
*if3* command, and specify patching with the *patch* command.

This command only works with a Mark III drive.

link:pcal#1[*+++pcald - pcal (Mark III, Mark IV, VLBA, VLBA4 racks)+++*]

Syntax:**pcald=**__cont,bits,int__

*pcald=stop*

*pcald=?*

Response:pcald/_cont,bits,int_

pcald/_chan,tone,tone,…_

Settable parameters:

_cont_ Whether to extract continuously or not: *no* (default) or *yes*.
If *no*, extraction is stopped and started by the **data_valid=**__…__
command.

_bits_ Number of bits to use in extraction: *1*, *2*, or *auto*
(default). If *auto*, the number of bits to extract is determined by the
pcald extraction daemon.

_int_ Number of centiseconds to integrate for. The default is *0*, which
is interpreted by the pcald daemon as “best effort”.

Monitor-only parameters:

_chan_ Channel of the form _ns_, where _n_ is *1*,..,*14* (decimal) or
*1*,...,*e* (hex) and _s_ is *u* or *l* for upper and lower sideband
respectively. No default.

_tone_ Tone to extract, given in MHz or if state counting then
state_counting.

Comments:

The currently implemented daemon is a stub. It doesn’t do anything, but
all the set-up for which tones to extract and how often is provided.

This command should support K4, K4K3, and K4MK4 racks, but does not do
so at present.

The form pcald is used to start the extraction. The form *pcald=stop* is
used to halt it. *pcald=?* displays the current settable parameters and
the currently selected tones. If a channel requires more than one log
entry to display all its tones, the tones will continue on following
lines.

If pcald is being controlled by the *data_valid* command, it begins and
stops extracting and recording data within one second of a request to do
so. In other words within one second of the execution of a
**data_valid=**__…__ command.

If the number of _bits_ is requested as *auto*, the number of bits to be
used is left to the discretion of the pcald and could conceivable be
different for every tone. Likewise when _int_ is zero, the pcald program
determines the length of time to integrate.

The parameters should be modified only when pcald is stopped. When the
parameters are set, the tones to extract are determined from the
*pcalform* command parameters. If any tone numbers were specified in
*pcalform*, the approproate hardware must have been set-up so that the
corresponding frequencies can be determined. For Mark III/IV this would
include setting up the *lo*, *patch*, **vc**__XX__ and possibly *if3*
commands. For VLBA/4 the *lo* and **bbc**__XX__ commands must be set-up.

link:pcal#1[*+++pcalform - specify tones for pcal extraction+++*]

Syntax:**pcalform=**__chan,tone,tone,…__

*pcalform=*

Response:pcalform/_chan,tone,tone,…_

Settable parameters:

_chan_ Channel of the form _ns_, where _n_ is *1*,..,*14* (decimal) or
*1*,...,*e* (hex) and _s_ is *u* or *l* for upper and lower sideband
respectively. No default.

_tone_ Tone to extract, either given in MHz or a pound sign # followed
by an integer, e.g. #1, to indicate the number of the tone to extract.
If the integer is positive, it indicates the tone above DC. If the
integer is negative, it indicates the tone below the nominal top of the
bandpass of the channel. If the integer is zero it indicates state
counting.

Comments:

The form *pcalform=* will remove all definitions.

The form **pcalform=**__…__ allows entry of a table of tones to be
extracted by channel. Up to 17 _tones_ may be specified for each
channel. A new specification for a channel overrides any previous
specification for that channel.

The display form lists all the currently selected tones by channel. If a
channel requires more than one log entry to display all its tones, the
tones will continue on following lines.

*link:pcal#1[+++pcalports - pcal output (Mark IV, VLBA4, K4MK4
racks+++])*

Syntax:**pcalports=**__PORTx,PORTy__

Response:pcalports/_PORTx,PORTy_

Settable parameters:

_PORTx_ VC for the first pcal output port, one of *1*, *2*, *3*, *4*,
*9*, *10*, *11*, or *12*. No default.

_PORTy_ VC for the second pcal output port, one of *5*, *6*, *7*, *8*,
*13*, *14*, *15*, or *16*. No default.

Comments:

This command selects which VCs have their output placed on the phase-cal
output ports of the Mark IV Formatter. These are called phase-cal ports
because they are intended for phase-cal monitoring. Each port provides
the two bit sampled version of the data stream from both sidebands of
the selected VC.

The Mark IV Decoder labels the two ports “x” and “y”. That nomenclature
is adopted here because it corresponds with the labeling on the front
panel.

The unusual mapping of VCs to ports is determined by which VCs are
routed to which of the two Altera PLDs:

PORT: x y

Altera PLD: U37 U35

VCs: 1-4 5-8

VCs: 9-12 13-16

link:peak#1[*+++peak - peak up tape reproduce power (longitudinal
drives)+++*]

Syntax:**peak=**__nsamp,iter,stack,vmin__

*peak*

Response:peak/_nsamp,iter,stack,vmin,peakv,mper,t/f,vltlc_

Settable parameters:

_nsamp_ Number of samples to take at each position. Default is *3*.

_iter_ Number of times to iterate peak finding. Default is *1*.

_stack_ Head stack to move for peaking: *1*, *2*, **w**rite or **r**ead.
Default is *2* for Mark III/IV and VLBA4, and *1* for VLBA. Only 1 is
valid for VLBA and MK3B recorders. The value **w**rite is synonymous
with *1* and **r**ead is synonymous with *2*, even if the heads are
wired differently. Only the first character for **w**rite and **r**ead
is checked; they are provided only for backward compatibility.

_vmin_ The minimum peak voltage that is required before the peak is
considered “real”. Default is *0.2* volts.

Monitor-only parameters:

_peakv_ The voltage measured at the calculated peak position.

_mper_ The minimum voltage measured at the peak as a percentage of
peakv.

_t/f_ t (true) if the peak is strong enough to be considered a real peak
and the middle of the last three measured positions is within 5.4
microns of the calculated peak, f (false) otherwise.

_vltlc_ voltage position of the calculated peak response

Comments:

This command attempts to find the head stack position that gives the
peak response from a track. This should work if the head stack is
already positioned so that there is some reproduce power coming from the
track. The algorithm is:

{empty}(1) Measure the reproduce power at the current position.

{empty}(2) Move 8 microns toward the plate (in) and measure the power
again.

{empty}(3) If the power at position two is greater than that at position
one, move another 8 microns in and measure the power again. If the power
at position two is lower than the power at position one, go out from
position one 8 microns and measure the power again.

{empty}(4) Continue moving the stack 8 microns at a time in the
direction that increases the power until there are three measurement
with the highest power in the middle position. No more than 5 additional
measurements are made.

{empty}(5) Fit the final three positions to a triangular model for the
response.

{empty}(6) Move the stack to the calculated peak position. Measure the
final power level.

When positioning the 8 micron step size is only approximate. The
positioning is done with 2.7 micron tolerance to avoid spending too much
time refining the position.

This command requires that the reproduce power detector be hooked-up
with a reasonable amount of attenuation and that the head.ctl
configuration file correctly identify which detector (odd or even) is in
use.

A reproduce track must be selected with the *repro* command in order to
peak the power. Depending on the cabling, either channel A or B should
be used. Setting both channels to the same track is sure to work unless
the detector isn't connected.

In order to identify possibly false peaks, *peak* requires two
conditions be met before a peak is accepted: (1) the voltage read-out of
the power level must exceed the set minimum and (2) the calculated peak
position must be within ±5.4 microns of the middle position of the last
three sample values. The first attempt to peak on a track may fail
because of the second criteria. A second attempt should succeed if that
was the problem.

It may be necessary to raise or lower the minimum voltage if the noise
level is higher than normal or the peak response is lower than normal.

This command must be issued once with parameters to set it up. Issuing
the command subsequently without parameters will start a peaking
operation. The tape must moving and there must be recorded data to
reproduce for this command to do something useful.

This command differs from the *locate* command in two ways. The first is
that *locate* is intended to do a coarse search only. *peak* searches
with smaller and more precise steps. Secondly, *locate* will return the
head to the position of the largest measured voltage. *peak* will make
measurements until it has straddled the peak and then will move to an
interpolated peak position.

See the *Narrow Track Calibration* manual.

link:4#1[*+++perr - sample parity errors (Mark III drives)+++*]

Syntax:**perr=**__track,chan,#samples,period,mode__

Response:perr/_track,chan,#samples,period,mode,error,synerr_

Settable parameters:

_track_ Track to be decoded. No default.

_chan_ Decoder channel *A* (default) or *B*.

_#samples_ Number of samples to average, maximum *10*, default *2*.

_period_ Time between samples in seconds, maximum *2*, default *0.5*.

_mode_ *rec* or *play*, default *rec.*

Monitor-only parameters:

_error_ Average number of parity errors.

_synerr_ Total number of sync errors.

Comments:

This command sets up the appropriate track for reproduce, and then reads
the decoder one more than the specified number of times with the
specified amount of time between samples. Differences between successive
readings are averaged to calculate error. The difference between the
first and last synch error readings is synerr. In *rec* mode, track must
be enabled, the tape must be moving forward, record must be enabled, and
reproduce must be in read-after-write mode. In *play* mode, only
read-after-write and moving tape are checked. In either mode, if the
measurement of parity errors is precluded by the tape status, then
nothing is done and no error message appears. (See also *parity*
command.)

This command requires a Mark III decoder.

link:proc#1[*+++proc - open new schedule procedure library+++*]

Syntax:**proc=**__name__

Response:proc/_name_

Settable parameters:

_name_ name of procedure file to open. If no directory path is
specified, /usr2/proc is assumed. If no extension is specified, .prc is
assumed. This procedure library is opened as the schedule library, and
all procedure names are read.

Monitor-only parameters: none

Comments:

When a new procedure library is opened, any time-scheduled procedures
from the previous procedure library are canceled. See section 8.0 of the
*SNAP Language* manual for details. Refer to the *pfmed* manual for
information on editing procedure libraries.

*radecoff - ra/dec source position offsets*

Syntax:**radecoff=**__ra,dec__

Response:radecoff/_ra,dec_

Settable parameters:

_ra_ Right ascension offset, in numeric angle/hours format. The response
is in numeric angle/hours format.

_dec_ Declination offset, in numeric angle/degrees format. The response
is in numeric angle/degrees format.

Monitor-only parameters: none

Comments:

The antenna will move to the offset position when this command is
issued. To return to the on-source position, issue this command with
zero for the offset.

*rcl - RCL communications*

Syntax:**rcl=**__device,command,parameters,...__

Response:rcl=__response__

Settable Parameters:

_device_ The two character module mnemonic for the device to communicate
with as defined in the rclad.ctl control file, e.g. *rc* for the S2
recorder.

_command_ Name of RCL command function.

_parameters_ Command delimited additional parameters required for this
RCL command function.

Monitor-only Parameters:

_response_ Result of communication, may displayed on multiple lines for
ease of reading.

Comments:

This command implements access to all the low-level functions of the RCL
interface. Check ISTS's *S2-RT User's Manual, Appendix A* for detailed
information about the command names, their parameters, and the
responses. The following table lists very briefly the commands and the
parameters, if any, that the *rcl* command expects for each. For
parameters that have values that consist of choice among fixed items, it
is possible to enter a numeric value as well, in which case it is passed
directly to RCL interface without checking.

Command Parameters

*align* *absolute*,_year,day,hour,min,sec,nanosec_

____
*relative*, *+* or *-*, _hour,min,sec,nanosec_

*re-align* or *self-align*
____

*barrel_roll_read*

*barrel_roll_set* *on* or *off*

*bercd* *fmber* or *uiber* or *uidcb*, _chan_, _measurement time_

*consolecmd* _command string_

*delay_read*

*delay_set* *absolute* or *relative*, _nanoseconds_

*delaym_read*

*diag* _value_

*eject*

*errmess* _samples_

*esterr_read* *transport* or *channel*

*ff*

*group_read*

*group_set* _group number_

*ident*

*mk3_form_read*

*mk3_form_set* *enable* or *disable*

*mode_read*

*mode_set* _mode string_

*pause*

*pdv_read* *transport* or *channel*

*ping* _time-out_

*play*

*position_read* *overall* or *individual*

*position_set* *absolute* or *relative* or *preset,1*,_position_

____
*absolute* or *relative* or *preset,8*,_8-comma-separated positions_

*re-establish*
____

*postime_read* _transport_

*record*

*rewind*

*speed_read*

*speed_read_pb*

*speed_set* *lp* or *slp*

*state_read*

*station_info_read*

*stop*

*tapeid_read*

*tapeid_read_pb*

*tapeid_set* _tapeid string_

*tapeinfo_read_pb*

*tapetype_read*

*tapetype_set* _tape type character or string_

*time_read*

*time_read_pb*

*time_set* _year,day,hours,minutes,seconds_

*transport_times*

*unpause*

*user_dv_read*

*user_dv_read_pb*

*user_dv_set* *true* or *false*, *ignore* or *use*

*user_info_read* _field number_, *field* or *label*

*user_info_read_pb* _field number_, *field* or *label*

*user_info_set* _field number_, *field* or *label*,_string_

*spcll_mode_set* *xtal* or *manual* or *refclk* or *1hz* or *errmes*

*status*

*status_decode* _status code_, *true* or *false*

*status_detail* _status code_, *true* or *false*, *true* or *false*

*version*

*rec - tape recorder control (S2 drives)*

Syntax: **rec=**__list__

Response:rec/_position,variance,date/time,valid,version_

Settable Parameters:

_list_ One of: *eject* (or *unload*) which may have a following
parameter *all*, a position to move all selected transports to, or a
list of eight comma-separated positions to move the individual
transports to. Positions are in units of seconds. In a list of eight
positions, *uns* must be used for transports that are not currently
selected.

Monitor-only Parameters:

_position_ overall absolute position of select transports, unk if
unknown.

_variance_ linear variance of position of select transports, unk if
unknown.

_date/time_ S2 date and time in format yyy/ddd.hh:mm:ss

_valid_ valid if S2 time is valid, not-valid if S2 time is not valid

_version_ ROS software version information string

Comments:

This command is used to move the selected transports to another
position.

For *eject* (or *unload*), only the selected transports are ejected,
unless there is an optional following parameter *,all* which causes all
the transports to be ejected.

*rec - tape recorder control (Mark III, Mark IV drives)*

Syntax:**rec=**__action__

Response:none

Settable Parameters:

_action_ A key word specifying what you want the recorder to do. Choices
are:

____
*load* Load a tape into the vacuum columns. This is similar to pressing
the stop button, but also guarantees that the low tape sensor has not
been tripped. On Mark IV drives with vacuum switching it also commands
the vacuum level based on the most recent label command before
attempting to load the tape.

*novac* On Mark IV drives with vacuum switching this removes the vacuum.
____

Comments:

For Mark III and Mark IV drives without vacuum switching, this command
can only be used to load the tape.

For Mark IV drives with vacuum switching, the *rec=load* command sets
the vacuum level based on the tape thickness selected by the most recent
*label* command. For these drives there is an added restriction that the
tape thickness be must specified with a new *label* command before every
*rec=load* command. This is intended to reduce the likelihood that the
incorrect vacuum level will be set. Please try to avoid removing the
vacuum with *rec=novac* if the tape is moving. Doing so may well damage
the tape.

*rec - tape recorder control (VLBA, VLBA4 drives)*

Syntax:**rec=**__action__

Response:rec/_feet,supply,takeup,length,revno_

Settable Parameters:

_action_ A key word specifying what you want the recorder to do. Choices
are:

____
*reboot* Reboot the microprocessor in the recorder. See comments below.

*load* Load a tape into the vacuum columns. This acts like the stop
button on the Mark III recorders. Brakes are released. The parameters in
equip.ctl are downloaded to the recorder.

*unload* Move the tape at high speed to the low tape point near BOT then
slowly wind the tape off the reel.

*bot* Move tape at high speed to BOT (beginning of tape) at stop.

*eot* Move tape at high speed to EOT (end of tape) at stop.

*release* Release the reel brakes. Drop the vacuum and then issue this
command before trying to thread a tape.

_feet_ Move the tape to the specified footage.

*feet* Set the tape footage counter. The supply and takeup reel packs in
feet are read back and the footage counter is set to the takeup reel
pack. These values are accurate to about 50 feet.
____

*zero* Reset footage counter to zero.

Monitor-only Parameters:

_feet_ The current footage counter reading.

_supply_ Footage left on the supply reel.

_takeup_ Footage left on the takeup reel.

_length_ Total length of the tape, supply+takeup.

_revno_ Software revision number.

Comments:

The _feet_ option of this command is analagous to the Mark III *tapepos*
command. The *zero* option is analagous to the Mark III *tape=low,reset*
command. The other options are unique to the VLBA recorder.

MCB functions are available.

The recorder can be re-booted manually by pressing the red button. After
manual reset you must issue the command *rec=addr* to re-initialize the
module.

Before the _actions_ *unload, bot, eot,* or _feet_ are taken, the
recorder vacuum is checked. If the vacuum is not ready, an error is
logged and the action is not taken.

*rec - tape recorder control (K4 drives)*

Syntax:**rec=**__action__

Response:rec/_position_,_drum_,_synch_test_,_synch_,_stat1_,_stat2_

Settable parameters:

_action_ *eject* (or *unload*) to eject the tape

*init* (or *ini*) to initialize recorder

*synch* to synchronize INT and EXT 1 PPS

_id_ maximum seven digit ID point to move tape to

*drum_on* to turn on the drum

*drum_off* to turm off the drum

*synch_on* to turn on the synch test

*synch_off* to turn off the synch test

Monitor-only parameters:

_position_ sequence number id of the current position

_drum_ drum status, on or off

_synch_test_ synch test status, on or off

_synch_ number of times synch was lost

_stat1_ status byte 1 in hex

_stat2_ status byte 2 in hex

Comments:

The meaning of the _synch_ parameter is unclear.

*rec_mode - recording mode (S2 drives)*

Syntax:**rec_mode=**__mode,group,roll__

Response:rec_mode/_mode,group,roll,numgroups_

Settable Parameters:

_mode_ The string that identifies the mode, 20 characters maximum, a
null value is not permitted. No default.

_group_ The group to be recorded, nominally *0-7*, but many modes have
fewer groups.

_roll_ Roll configuration: *on* or *off*. Default *on*.

Monitor-only Parameters:

_numgroups_ The number of groups in mode display as the monitor value.

Comments:

This command selects the recording mode and groups to be used for an S2
recorder.

*rec_mode - recording mode (K4 drives)*

Syntax:**rec_mode=**__bw,bits,chan,im,nm__

Response:rec+++_+++mode/bw,bits,chan,form,ts,im,nm,ta,pb

Settable Parameters:

_bw_ overall recording bandwidth in MHz, *64* (default) , *128*, or
*256*

_bits_ number of bits per sample: *1* (default), *2*, *4*, or *8*

_chan_ channels recorded: *1*, *2*, *4*, *8*, or *16* (default)

_im_ insertion mode for time stamp: *FB* (fixed bit) or *FT* (fixed
time). Default *FB* for *256* MHz _bw_, *FT* for all others.

_nm_ insertion frequency for time-stamp: *0* to *30*, or *99* (*0* no
insertion, *99* for continuous). Default *15* for *128* MHz _bw_, 30 for
*256* MHz _bw_, *0* for all others.

Monitor-only parameters:

_form_ recording format: OLD or NEW

_ts_ time stamp: ON or OFF

_ta_ TAP setting mode: 0 or 1

_pb_ pass-band setting: 0 to 16

Comments:

This command is only for DFC2100. This command sets the recording mode
and may require up to 17 seconds to be completed due to digital filter
set-up.

*recpatch - recorder input patching (K4 drives)*

Syntax:**recpatch=**__port__,_channel_,_port_,_channel_,…

*recpatch=*

Response:recpatch/_port_,_channel_,_port_,_channel_,…

Settable Parameters:

_port_ K4 recorder input port, *1*-*16*

_channel_ _ns_ where __n__=*1*-*14* for Mark III/IV/VLBA/VLBA4 racks

where __n__=*1*-*16* for K4 type 1 rack and rack type “none”

where __n__=*a1*-*a8* or *b1*-*b8* (two characters) for K4 type 2 rack

where __s__=*u* or *l* for upper or lower sideband

Comments:

This command specifies the wiring of the VCs to the K-4 input ports.
This command has no effect on the hardware. It is an "information only"
command.

A *recpatch=* clears any pre-existing definition.

The monitor response may consist of more than one line, but each line
ends with a _channel_ entry.

*repro - set up reproduce tracks (Mark III drives)*

Syntax:**repro=**__bypass,trackA,trackB,bandwidth,equalizer__

Response:repro/_bypass,trackA,trackB,bandwidth,equalizer_

Settable parameters:

_bypass_ *byp* (default) for bypass, *raw* for read-after-write.

_trackA_ Track for decoder channel A, default *1*; *0-28* allowed.

_trackB_ Track for decoder channel B, default *1*; *0-28* allowed.

_bandwidth_ Bandwidth for decoding , MHz, default *2*; *0.0625*,
*0.125*, *0.25*, *0.5*, *1*, *2*, and *4* MHz allowed or actual tape
speed *4.21875*, *8.4375*, *16.875*, *33.75*, *67.5*, *135*, and *270*
ips allowed

_equalizer_ Equalizer for reproduce, MHz, defaults to _bandwidth_;
*0.0625*, *0.125*, *0.25*, *0.5*, *1*, *2*, and *4* MHz allowed or
actual tape speed *4.21875*, *8.4375*, *16.875*, *33.75*, *67.5*, *135*,
and *270* ips allowed

Monitor-only parameters: none

Comments:

MAT module functions available for Mark III.

The *raw* mode normally is used only when checking parity errors on the
tape.

Selection of track *0* for a decoder channel will disable that channel
until another track is selected.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses Mark III track numbers.

*repro - set up reproduce tracks (VLBA, VLBA4 drives)*

Syntax:**repro=**__modeA,trackA,trackB,modeB,equA,equB,bitrate__

Response:repro/_modeA,trackA,trackB,modeB,equA,equB,bitrate_

Settable parameters:

_modeA_ Reproduce mode for channel A. *byp* (default) for bypass, *raw*
or *read* for read (playback).

_trackA_ Track for decoder channel A, default *4*. *0-35* allowed for
VLBA, in addition *100-135* are allowed for VLBA4.

_trackB_ Track for decoder channel B, default *4*. *0-35* allowed for
VLBA, in addition *100-135* are allowed for VLBA4.

_modeB_ Reproduce mode for channel B. *byp* for bypass, *raw* or *read*
for read (playback). Default is _modeA_.

_equA_ Equalizer to use for decoding channel A: *std*, *alt1*, *alt2*,
*dis* (disable) or reproduce speed *80*, *135*, *160*, *270* ips or *0*,
*1*, *2*, or *3* equalizer number. For VLBA recorders: *alt1* (default)
for normal speed (*135* or *80* ips), *alt2* for double speed (*270*
ips), and *std* for thin tape double speed (*160* ips). For VLBA2
recorders: *std* (default) for normal speed (*135* ips), *alt1* for
double speed (*270* ips), *alt2* unspecified. For VLBA2 recorders, thin
tape speeds *80* and *160* ips are not accepted.

_equB_ Equalizer to use for decoding channel B: *std*, *alt1*, *alt2*,
*dis* (disable) or reproduce speed *80*, *135*, *160*, or *270* ips or
*0*, *1*, *2*, or *3* equalizer number. For VLBA recorders: *alt1*
(default) for normal speed (*135* or *80* ips), *alt2* for double speed
(*270* ips), and *std* for thin tape double speed (*160* ips). For VLBA2
recorders: *std* (default) for normal speed (*135* ips), *alt1* for
double speed (*270* ips), *alt2* unspecified. For VLBA2 recorders, thin
tape speeds *80* and *160* ips are not accepted.

_bitrate_ Nominal bit rate per track in Mbits/second: *16*, *8*, *4*,
*2*, *1*, or *0.5*. The default corresponds to the nominal bitrate for
the _equA_ setting.

Monitor-only parameters: none

Comments:

The *raw* or *read* mode normally is used only when checking parity
errors on the tape. This is also known as “playback” mode.

This _bitrate_ parameter determines the set-up of the clock recovery
chip. The nominal bit rate for the 135/80 ips (VLBA) or 135 ips (VLBA2)
equalizer is 4 Mb/sec (2 MHz track bandwidth) set-up. The nominal bit
rate for the 270 and 160 ips equalizers is 8 Mb/sec (4 MHz track
bandwidth) set-up. The other bit rates have no corresponding equalizer
and are useful only in *byp* mode. The other bit rates have not been
tested with the VLBA2 drive.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses VLBA track numbers.

*repro - set up reproduce tracks (Mark IV drives)*

Syntax:**repro=**__mode,trackA,trackB,equalizer,bitrate__

Response:repro/_mode,trackA,trackB,equalizer,bitrate_

Settable parameters:

_mode_ Reproduce mode, *byp* (default) for bypass, *read* or *raw* for
playback.

_trackA_ track for decoder channel A, between *0* and *35*, default *2*.
For tracks on head stack 2, add 100 to the desired track number. If
_mode_ is *read*, only tracks from head stack 1 may be specified.

_trackB_ track for decoder channel B, between *0* and *35*, default *3*.
For tracks on head stack 2, add 100 to the desired track number. If
_mode_ is *read*, only tracks from head stack 1 may be specified.

_equalizer_ *0*, *1*, *2* (default if _mode_ is *read*), *3* or *dis*
(default if _mode_ is *byp*) to select the equalizer installed at
location 0, 1, 2, or 3 in the recorder. Use *80, 135, 160, 270* to
select the equalizer by playback rate according to the following table:

Location 0 test/special

Location 1 135 or 80 ips (normally used for 4 MHz playback)

Location 2 160/270 ips (normally used for 8 MHz playback)

Location 3 disable reproduce (used for bypass mode)

_bitrate_ Clock recovery bit rate, Mb/s. Choices are *16, 8, 4, 2*, or
*1*. Default is the bit rate that corresponds to the selected equalizer.
For equalizer *80* or *135*, default is *4*; for equalizers *160* and
*270* default is *8*. If _equalizer_ is *dis*, this parameter is
undefined but is set to have the legal value of *4*.

Monitor-only parameters: none

Comments:

This command sets up the reproduce electronics in the tape drive. MAT
module functions available for Mark IV.

Tracks are Mark IV/VLBA track numbers.

The *read* mode normally is used only when checking parity errors on the
tape.

Bypass mode looks at the output of the write drivers, therefore it only
works if the selected track is enabled and the general record is on. Use
the command *st=for,0,on* to set up the write drivers for bypass mode.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses Mark IV track numbers.

*reset - reset the MAT bus*

Syntax:**reset=**__baud__

Response:reset/_baud_

Settable parameters:

_baud_ baud rate. MATs support *110, 300, 600, 1200, 2400, 4800,* and
*9600* baud.

Monitor-only parameters: none

Comments:

The old MATs (NRAO only) support *2400* baud only. Recommended rate is
*9600*. A system reset is sent (break character), then the baud rate is
changed, then some U's to synch up the MATs.

link:3#1[*+++rollform - (Mark IV, VLBA4, K4MK4 racks)+++*]

Syntax:**rollform=**__head,home,output,...__

*rollform=*

Response:rollform/_head,home,output, ..._

Settable parameters:

_head_ Headstack of _home_ track, *1* or *2*.

_home_ Home track. The *trackform* track number to assign output roll
map to, *2*-*33* inclusive.

_output_ A list of up to 16 output tracks for this home track. Values
*-1*, *2*-*33* inclusive. A null value indicates that this map is not
used. A value of -1 indicates that this map is used, but the entry is
empty.

Comments:

Each *rollform* command defines the roll map for one home track as
defined in *trackform*. There are 16 maps. Each _home_ track has an
entry in each map. To leave a _home_ track empty in a map, use *-1* as
the output track. If a value of _output_ is null (blank), that map entry
is undefined for that _home_ track. All maps after the last supplied
_output_ track are undefined for that _home_ track. The smallest
contiguous subset of maps that include at least empty or non-empty (but
not undefined) map entry is used.Thus by use of nulls, any contiguous
subset of maps can be used for rolling.

The *rollform=* command clears the rolling definition. Further
*rollform=...* commands increment the definition of the roll maps. When
the *form=...* command is entered with *m* for the roll parameter, the
currently defined roll will be used. If the rolling definition is
cleared at that time, no roll will be used.

*rvac - recorder vacuum (VLBA, VLBA4 drives)*

Syntax:**rvac=**__cmd__

Response:rvac/_cmd_,_mon_

Settable Parameters:

_cmd_ vacuum level to command, inches. No default

Monitor-only Parameters:

_mon_ vacuum level measured, inches.

Comments:

This command sets the vacuum level of the recorder. However it is only
for test purposes. A vacuum level set by the *rvac* command will
replaced by the default vacuum level from the control file the next time
a *rec=load* is executed.

The _cmd_ and _mon_ values are converted to and from the voltages used
by the tape drive using the conversion coefficients in the tape recorder
control file, vdrive1.ctl or vdrive2.ctl. In particular this means that
the _cmd_ value uses the same conversion as the specified default vacuum
level in the control file.

There is no previous value (selected by using *** as the parameter) for
_cmd_ until it has been commanded at least once since the last time the
FS was started.

*rw - rewind tape (all drives)*

Syntax:*rw*

Response:rw/_acknowledgement_

Settable Parameters: none

Comments:

The tape is moved in reverse at high speed. For Mark III, the record bit
is disabled and the low tape sensor is turned on. For VLBA, all track
groups are disabled and the low tape sensor is turned on.

The tape is moved at the "schedule" value as specified in the equip.ctl
control file. This is the speed assumed in the SNAP schedule file for
positioning the tape with the *fastr* procedure.

Use the *srw* command and *sfastr* procedure for possibly faster tape
motion.

*rx - receiver monitor and control*

Syntax:**rx=**__channel,dcal,box,S,X,K,cal__

Response:rx/_channel,dcal,box,S,X,K,cal,lostat,value_

Settable parameters:

_channel_ Hex value or code word (next page). No default.

_dcal_ Delay cal heater, *on* (default) or *off*.

_box_ Box heaters. Turn on with *A* (default) or *B* (for the A or B
controller), or *off*.

_S,X,K_ IF amplifier controls, *on* (default) or *off*.

_cal_ Noise cal control. May be *on*, *off* (default), *oon* (Override
on), *oof* (override off), or **ext**ernal modulation.

Monitor-only parameters:

_lostat_ Status of LO, locked or unlocked.

_value_ Reading in A/D channel shown in first parameter. Units are
appropriate for channel in use.

Comments:

This command is used to control and monitor a standard cryogenic CDP S/X
receiver.

MAT module functions are available.

Channel assignments for the "standard" receiver are on the next page.
Your station's channel assignments are in the rxdef.ctl file. Details of
the MAT protocol are in the *MAT Communications* manual.

The mnemonic RX and the receiver's address must be specified in
matad.ctl control file.

Standard Receiver A/D converter channels

channel code Voltage Description

# (hex) name Div. Ratio

00 FRONT 1 Temperature probe: box front

01 REAR 1 Temperature probe: box rear

02 LO 1 Temperature probe: LO

03 DCAL 1 Temperature probe: delay cal

04 INLET 1 Temperature probe: inlet air

(after heat)

05 RET 1 Temperature probe: return air

06 SUP 1 Temperature probe: supply air (cold)

07 2.73V 2 -2.73 volt ref. for temperature probes

08 SIF 1 S-band IF power level

09 XIF 1 X-band IF power level

0A KIF 1 Secondary S-band IF power level

0B SLO 1 S-band LO power level

0C XLO 1 X-band LO power level

0D KLO 1 Secondary S-band 2020 MHz LO power level

0E LO5MHZ 1 5 MHz power level to LO

0F 1 spare

10 28V 101 +28 volt power supply voltage

11 24V 101 +24 volt power supply voltage

(delay cal)

12 20V 11 +20 volt power supply voltage (LO)

13 15V 11 +15 volt power supply voltage

14 5V 11 + 5 volt power supply

15 -15V 11 -15 volt power supply voltage

16 GROUND 1 ground reference

17 PRES 4.9 dewar pressure

18 X1BIAS 4.9 1st stage X-band FET bias current

19 X2BIAS 4.9 2nd stage X-band FET bias current

1A X3BIAS 4.9 3rd stage X-band FET bias current

1B S1BIAS 4.9 1st stage S-band FET bias current

1C S2BIAS 4.9 2nd stage S-band FET bias current

1D S3BIAS 4.9 3rd stage S-band FET bias current

1E 20K 1 temperature diode on 20K station

in dewar

1F 70K 1 temperature diode on 70K station

in dewar

Note: This table applies only to standard S/X receivers. Channel
assignments for your station's receiver may be found in control file
rxdef.ctl. Conversion from volts to temperature for channels 0 through 6
is 100 deg C/V.

*save_file - save/retrieve string from a file*

Syntax:**save_file=**__file,string__

Response: none

Settable parameters:

_file_ name of file in /usr2/control to read from or write to. If the
leading character is *+*, it is removed from the file name and
interpreted as a flag meaning “append” for writing or “read all lines”
for reading

_string_ string to write to _file_, up to 512 characters

Comments:

This command allows a user to store a _string_ in a file. The contents
of the first line or all lines of _file_ can be executed as commands by
omitting the _string_ parameter. This might be used for example to store
the name of a set-up SNAP procedure for a receiver in a file. The set-up
procedure can then be invoked by the *initi* procedure when the FS is
started. This will effectively make the receiver set-up commanded in the
*initi* procedure variable without having to modify *initi* itself for
each receiver change.

If _file_ does not start with *+*, then for reading only the first line
of the file will be read and executed. For writing, if the file already
exists its contents will unceremoniously overwritten unless there is a
permission conflict that prevents it.

If _file_ starts with *+*, it is removed from the file name and
interpreted as a flag meaning “append” for writing or “read all lines”
for reading. This can be used to append additional commands to an
existing file (although it will create the file if it doesn’t exist). It
will cause all lines in a file to be executed as commands when reading
from the file.

*savev - save voltage position of stack (longitudinal drives)*

Syntax:**savev=**__parm1,volts__

*savev*

Response:savev/_VrevW,V15rev,V15for,V15scale,V13,V15flip,Vw0,Vw8_

Settable parameters:

_parm1_ Voltage to save, possible values are: *vrevw*, *v15rev*,
*v15for*, *v15scale*, *v13*, *v15flip*, *vw0*, or *vw8*. No default.
*clear* will delete all saved voltages.

_volts_ The voltage value to save. Default is to use the current write
position for *vw0* and *vw8*, if the write head has been successfully
positioned. For all others, use the last peaked voltage location from
the *peak* command. If the write head has not been positioned or the
last *peak* failed, no value is stored.

Monitor-only parameters:

The first six monitor parameters are read head position voltages for
peak response while reproducing tracks in various configurations. The
table below summaries the parameters and the configuration: the track
used to reproduce, the reproduce tape orientation, read direction, the
direction the track was written in, and the write head position when the
track was written. All tracks are written with head 15 with the tape in
the normal orientation. (All track numbers are Mark III track numbers.)

Reproduce

Reproduce Tape Read Write Write

Track Orientation Direction Direction Position

_VrevW_ 15 Normal Forward Reverse Vw0

_V15rev_ 15 Normal Reverse Forward Vw0

_V15for_ 15 Normal Forward Forward Vw0

_V15scale_ 15 Normal Forward Forward Vw8

_V13_ 13 Normal Forward Forward Vw0

_V15flip_ 15 Flipped Forward Forward Vw0

The last two parameters are write head position voltages at which the
tracks corresponding to the above read positions were written. These
parameters are not used for VLBA drives.

_Vw0_ Voltage near tape center

_Vw8_ Voltage approximately 8 volts toward the deck plate from Vw0.

Comments:

This command is used to save the voltage positions of the read and write
heads for head calibration. This command is not very useful by itself.
It is designed to facilitate calculation of the calibration parameters
by storing all the values. The *hdcalc* command is used to perform the
actual calculation. See the *Narrow Track Calibration* manual for more
information.

The description of the monitor only parameters above is written assuming
odd tracks will be used for both read and write. If odd tracks are not
available, the corresponding even tracks, 16 for write, 14 and 16 for
read can be used instead (note Mark III track numbers).

The response form of the command will only show values for voltages that
have been successfully saved. This feature is useful for determining
which parameters have not been successfully measured during automated
calibration.

*scan_name - set scan name*

Syntax:**scan_name=**__name__

Response:scan_name/_name_

Settable Parameters:

_name_ The scan name, any string up to 16 characters in length.
Typically _ddd‒hhmm_, which encodes the day of year (_ddd_), hour
(_hh_), and minute (_mm_) of the scan. If there is more than one subnet
in a schedule that would have the same scan name otherwise, they are
distinguished by appending a single alphabetic character. All stations
in a given subnet use the same scan name, which is distinct from that
from all other subnets.

Comments:

The scan name is used by the correlator to help organize the processing
of the data. It is the most useful way to refer to scans in e-mail
messages and log entries about problems.

The scan name is supplied by drudg which places the **scan_name=**__…__
command in the schedule before the **source=**__…__ command. The
**scan_name=**__…__ command defines the start of each scan. If a
schedule is started in the middle it should be started at this command
for that scan.

*schedule - start a new schedule file*

Syntax:**schedule=**__name,start,#lines__

Response:schedule/_name,line_

Settable parameters:

_name_ Name of schedule file to be started. If no directory path is
specified, /usr2/sched assumed. If no extension is specified, .snp is
assumed. Any currently-executing schedule file is closed, and the new
schedule file is opened. If the new file cannot be opened, there will be
no schedule active. When a valid schedule is started, a *cont* command
may be necessary.

_start_ Place in the schedule to begin executing. May be one of the
following:

____
_null_ to start with the observation beginning no earlier than 5 minutes
from now.

**#**__line__ for a line number in the file, should be a *source*
command.

_time_ to start with the observation beginning no earlier than this
time. _time_ is in standard SNAP format.
____

_#lines_ Number of lines to execute before automatically halting.
Default is the remainder of the schedule.

Monitor-only parameters:

_line_ The line number to be executed next.

Comments:

If the schedule is started successfully, a log file having the same name
as the schedule is automatically started, and the procedure file having
the same name as the schedule is automatically established as the
schedule procedure library. Any previously time-scheduled procedures
from this library are cancelled. If a # of lines is specified, an
automatic *halt* will be issued after execution of these lines. The
schedule may then be continued using the *cont* command.

Note: If the schedule file is larger than 100,000 lines, execution will
*halt* after 100,000 lines.

*select - select recorder*

Syntax:**select=**__drive__

Response:select/_drive_

Settable Parameters:

_drive_ The drive to use: *1* or *2*. No default.

Comments:

This command is used to select which recorder is active in a two
recorder system. Most commands that refer to a recorder explicitly refer
to the recorder in the command name, but some commands that refer
primarily to the rack need to know implicit which recorder is in use.
These commands depend on this command to specify which drive is in use.
In particular the *pass* command needs to know which head position to
encode in the AUX data field and the VLBA *form* command needs to know
which recorder to use for DQA input. In addition, the chekr and monit
programs need to know which recorder is in use to check and display the
status of.

*sff - super fast-forward (longitudinal drives)*

Syntax:*sff*

Response:sff/_acknowledgement_

Parameters: none

Comments:

The tape is started moving forward at super high speed. For Mark III and
Mark IV drives, the record bit is disabled and the low tape sensor is
turned on. For VLBA and VLBA4 drives, all track groups are disabled and
the low tape sensor is turned on. For Mark IV and VLBA4 racks the
formatter output is disabled

The tape is moved at the “super” speed value as specified in the
equip.ctl control file. This is the fastest speed that your tape drive
can manage, normally 330 ips.

Use the *ff* command and *fastf* procedure for positioning the tape
during a schedule.

*source - source name and position*

Syntax:**source=**__name,ra,dec,epoch__

Response:source/_name,ra,dec,epoch,ranow,decnow,today_

Settable parameters:

_name_ Source name, up to 10 characters. No default. Special source
names are recognized by many antenna interface programs. Some names and
their meaning are:

*azel* true corrected coordinates

*azeluncr* encoder units

*xy* encoder units

____
Other specialized names are described in the comments below. If _name_
is *sun* or *moon*, no position is required, and if given it will be
ignored.
____

_ra_ Right ascension, in numeric angle/hours format. No default. If
_name_ is *azel* or *azeluncr*, this parameter is interpreted as an
azimuth. If _name_ is *xy*, this parameter is interpreted as an X
position.

_dec_ Declination, in numeric angle/degrees format. No default. If
_name_ is *azel* or *azeluncr*, this parameter is interpreted as an
elevation. If _name_ is *xy*, this parameter is interpreted as an Y
position.

_epoch_ Epoch in years. Default *1950.0*. This field is checked only if
the specified angles are right ascension and declination. A value of
*-1* inhibits precession.

Monitor-only parameters:

_ranow_ Right ascension precessed to today’s date.

_decnow_ Declination precessed to today’s date.

_today_ Epoch of precession.

Comments:

The antenna will begin moving to the new source when this command is
issued. At some antennas, if the source name is given as *azel* or
*azeluncr*, then the ra and dec are recognized as azimuth and elevation
in degrees; if the source name is *xy*, then the next two fields are
recognized as x and y in degrees. If the source name is *sun* or *moon*,
the appropriate coordinates will be calculated by the Field System based
on the current time and the site position as specified in the
location.ctl file.

Issuing a *source=...* command will invalidate the calculated values for
the *fluxn=* commands. To indicate this their values are set to negative
numbers.

Typical interpretations of special names may or may not be supported at
any given station. These are typical meanings:

*stow* Pre-defined stow position.

*service* Pre-defined service position.

*disable* Stops antenna communications. This is useful to stop error
messages when here is a problem.

*idle* Monitor the antenna position, but do not command it. This is the
normal start-up state for the Field System.

*hold* Maintain the current antenna position.

*setup* Prepare antenna for track

*track* Re-enable antenna tracking

*srw - super fast-rewind (longitudinal drives)*

Syntax:*srw*

Response:srw/_acknowledgement_

Parameters: none

Comments:

The tape is started moving in reverse at super high speed. For Mark III,
the record bit is disabled and the low tape sensor is turned on. For
VLBA, all track groups are disabled and the low tape sensor is turned
on.

The tape is moved at the “super” speed value as specified in the
equip.ctl control file. This is the fastest speed that your tape drive
can manage, normally 330 ips.

Use the *rw* command and *fastr* procedure for positioning the tape
during a schedule.

*st - start tape recording (all drives)*

Syntax:**st=**__direction,speed,record__

Response:st/_direction,speed,record_

Settable parameters:

_direction_ For non-S2 and K-4 drives: *for* to move tape forward, *rev*
to move in reverse. *rev* is not permitted for S2 drives, but *for* is.
For K-4 drives: *record* (or *on*) or *play* (or *off*). No default,
except for S2 which defaults to *for*, and K4 which defaults to
*record*. When the tape is stopped, this parameter is displayed in the
response as rev for Mark III and IV. Additional display values for K-4:
ejecting, ff, rewind, loading, stop, and NULL

_speed_ Tape speed in inches per second, either nominal or actual. For
Mark III & IV and VLBA/4 drives, choices are: (for thick tape) *8.4375,
16.875, 33.75, 67.5, 135, 270* or (for thin tape) *5, 10, 20, 40, 80,
160, 320*. A speed of *0* is acceptable as well. Mark III/IV drives may
also be commanded to *4.21875*. For S2 drives, the only choices are
*slp* and *lp*. Also for S2 drives there are additional monitor only
values of: sp, unknown, or a reported hex value that doesn’t correspond
to a known speed. For Mark III/IV drives the default speed is 135 ips.
There is a default speed for VLBA/4 or VLBA2) drives only when the
*bit_density* and *form* commands have been issued. the default speed is
calculated from these commands. No default for S2 drives. Note used for
K4.

_record_ *on* to record; *off* to disable recording. Default is *on*.
For S2 recorders, *record* and *play* are synonymous with *on* and
*off*, respectively. Also for S2 recorders there are additional monitor
only values of rewind, ff, stop, ppause, rpause, cue, review, notape,
and position. Note used for K4.

Monitor-only parameters: none

Comments:

The tape is started moving. For Mark III, the record bit is enabled if
_record_ is *on*. For Mark IV, the general record bit is enabled and the
record bit for each enabled stack is enabled if _record_ is *on*. For
VLBA, the track groups are enabled if _record_ is *on*; they are
disabled if _record_ is *off*. For all systems, reproduce mode is not
changed and the state of the low tape sensor is not changed. In the Mark
III/IV drives for Mark III speeds, the rate generator is set to 720 for
the “actual” speed. For “thin” speeds it is set to 853. For *5* ips, the
rate generator is set to 427 and the *7.5* ips button is selected.

For the Mark III/IV drives, the speed *4.21875* ips does not move the
tape. It implements a “load” function.

The nominal track bit rates for longitudinal drives depend on the tape
thickness. For thick tapes the speeds are normally 135 ips/(4
Mbit/sec/track), so-called low density recording. For thin tape they are
normally 80 ips/(4 Mbit/sec/track), so-called high density recording.
Sometimes in the past, the thick tape speeds were used with thin tapes.
This is normally not done anymore.

For longitudinal drives, the vacuum (drive ready for VLBA2 drives) is
checked before the command is issued to the recorder. If the vacuum
state (drive state for VLBA2 drives) is not ready, no further commands
are sent. Vacuum (drive ready for VLBA2 drives) is not checked if
_speed_ is *0*. A given tape speed of *0* does not move tape but does
allow the write heads to enabled accord to the _record_ parameter, thus
making bypass mode useful. To see the time displayed on the decoder
front panel while the tape is stopped, set up the desired reproduce
tracks with the *repro* command and then issue the command
*st=for,0,on*.

For S2 drives, if the recorder is already recording and a speed
different than what is in use is requested, no change will be made and
an error will be reported.

For backward compatibility, several other values of the _speed_
parameter are possible for the longitudinal drives. Nominal speeds
(multiply by 9/8 to get the actual speed) are: *3.75*, *7.5*, *15*,
*30*, *60*, *120*, and *240*. Obsolete “VLBA speeds” for data
replacement format on think tape are: *8.33*, *16.66*, *33.33*, *66.66,*
*133.33*, and *266.66*. For backward compatibility with an error in an
earlier version of the FS, actual values *4.21875* may also be selected
by using values *3* and *3.375*; *8.4375* may selected using values *7*
and *7.875*. These additional nominal values are deprecated as are the
“VLBA speeds” since they are no longer used. All these deprecated speeds
will be removed in a future version. Since the VLBA drives only have
speed resolution of 0.01 ips, the actual speeds are *4.22*, *8.44*, and
*16.88* instead of *4.21875*, *8.4375*, and *16.875*, respectively, but
either may be entered in a command.

For longitudinal drives, the correlators can not reproduce recordings
made at speeds below 40 ips, but this limitation is subject to change in
the future. This limitation is functionally equivalent to a minimum per
track data rate of 2 Mbit/sec.

For K4 type 2 (DFC2100) drives, the *rec+++_+++mode* SNAP command must
be set-up first to define the time stamp insertion parameters.

*stack - stack positioning by microns (longitudinal drives)*

Syntax:**stack=**__cmdMw,cmdMr,calW,calR,woffset__

Response:stack/_cmdMw,cmdMr,calW,calR,woffset,actMw,actMr,_

_deltaMw,deltaMr_

Settable parameters:

_cmdMw_ Write head stack (stack 1) command position in microns. Default
is not to move.

_cmdMr_ Read head stack (stack 2) command position in microns. Default
is not to move. May not be specified for VLBA.

_calW_ Write head stack (stack 1) calibration to use: **F**orward,
**R**everse, or **U**ncalibrated. Only the first letter is checked.
Default is **U**ncalibrated.

_calR_ Read head stack (stack 2) calibration to use: **F**orward,
**R**everse, or **U**ncalibrated. Only the first letter is checked.
Default is **U**ncalibrated. May not be specified for VLBA.

_woffset_ Write head type offset. *auto* (default) to automatically
adjust the head stack positions according to the write head type
parameter in the head.ctl control file. For *none* no adjustments are
made. The read head is always adjusted.

Monitor-only parameters:

_actMw_ Actual write head stack (stack 1) position, microns.

_actMr_ Actual read head stack (stack 2) position, microns. Null for
VLBA.

_deltaMw_ Difference of actual and commanded position for write head
stack (stack 1), microns.

_deltaMr_ Difference of actual and commanded position for read head
stack (stack 2), microns. Null for VLBA.

Comments:

This command is used to position the head stacks in micron units. An
individual head stack may be moved by not specifying the command
position and calibration to use for the other head stack. For VLBA
recorders, only the write head stack parameters are used; read head
stack parameters are reported as null. For Mark IV, the write parameters
refer to head stack 1, read parameters refer to head stack 2.

The _deltam_ parameters are reported with the sign of actual minus
commanded.

The command positions reported by the *lvdt*, *pass*, and *stack*
commands are consistent. See the description of the *pass* command for
more information.

The head stack position in microns is determined by

_position = cmdM + absolute offset_ (**F**orward calibration)

_position = cmdM + absolute offset + for/rev offset_ (**R**everse
calibration)

_position = cmdM_ (**U**ncalibrated)

where _cmdM_ is the commanded position and the _absolute offset_ and
_forward/reverse offset_ are specified in the head.ctl control file.

If _woffset_ is *auto*, and the calibration is **R**everse, and the
write head stack is defined as *odd* in the head.ctl control file, then
an offset of 698.5 microns is added to the write head stack position.

If _woffset_ is *auto*, and the calibration is **F**orward, and the
write head stack is defined as *even* in the head.ctl control file, then
an offset of 698.5 microns is subtracted from the write head stack
position.

If _woffset_ is *none*, no offset is applied to the write head. The read
head is always adjusted.

If the head stacks were last positioned with the *pass* or *lvdt*
commands, the response _calw_ and _calr_ will correctly identify the
calibration used. Odd pass numbers will be reported as *forward*
calibrations, even passes as *reverse* calibrations. Positions commanded
with the *lvdt* command are *uncalibrated*.

If the write head stack position is commanded, the auxiliary data field
is set to reflect the commanded position, see the *pass* command for
more information.

See the *Narrow Track Calibration* manual.

*status - display current schedule status information*

Syntax:*status*

Response:display of information

Settable parameters: none

Comments:

A self-explanatory display of information concerning the status of the
current active schedule is listed on the terminal, in the following
format:

Active schedule is: _name_ (name of current schedule)

TIME EVENT

------- ---------

yyyy.ddd.hh:mm:ss.ss Now

yyyy.ddd.hh:mm:ss.ss Start of next observation

yyyy.ddd.hh:mm:ss.ss End of next observation

yyyy.ddd.hh:mm:ss.ss End of current tape

yyyy.ddd.hh:mm:ss.ss Start of next tape

Schedule is (not) HALTed

Schedule stream is (not) time-blocked(until yyyy.ddd.hh:mm:ss.ss)

Operator stream is (not) time-blocked (until yyyy.ddd.hh:mm:ss.ss)

Current line of schedule is:

#nnn _copy of current schedule line_

*sy - send a system command*

Syntax:**sy=**__command__

Response:none

Settable parameters:

_command_ The command to be sent to the system.

Comments:

This command is used to execute UNIX systems from within the Field
System. The UNIX command is executed under your default shell. Any
response or error from the command will be displayed in the Field System
Log and Display widow, the response will not go in the log.

Normally, if you need to execute a UNIX command, use the operator menu
to open a new window temporarily and type your commands and see the
output there. The *sy* command should be used only if there is a need
for a system command in a procedure or schedule.

Any valid UNIX command that does not require input may be used. There is
no facility for accepting user input when you use the *sy* command.

Since commands could take some time to execute and therefore tie up the
Field System, it is recommended that commands used with *sy* be executed
in the background. To have a command run in background and not wait for
its completion, append an *&* to the command. If you do want to wait
until the command finishes, do not use the *&*.

*systracks - system track set-up (VLBA, VLBA4 drives)*

Syntax:**systracks=**__st0,st1,st34,st35__

Response:systracks/_st0,st1,st34,st35_

Settable parameters:

_stX_ The recorder track that will have its output from the formatter
placed on recorder track _X_, where _X_ is one of the system tracks:
_0_, _1_, _34_, or _35_. Default is itself, i.e., for _st0_ the default
is 0, for _st1_ the default is 1, for _st34_ the default is 34, and for
_st35_ the default is 35.

Comments:

This command is used to define what data will be recorded on the system
tracks. This can be used to duplicate data from one of the normal data
tracks if that track has failed. Under Field System control, the
formatter will not normally send any data to the system tracks,
therefore if the default is used for any parameter’s value, normally no
data will be written to that track.

*tacd - Totally Accurate Clock (TAC) data*

Syntax:**tacd=**__action__

*tacd*

Response:tacd/status__,host,port,file,state__

tacd/time__,age,ddddd.ffffff,ss,aa,g.ggg.c.cccc,t.tttt__

tacd/average__,age,ddddd.ffffff,sec,rms,max,min,average__

Settable Parameters:

_action_ A key word specifying what you want from the TAC:

*status* Return TAC status, also *?*.

*time* Return time.

*average* Return average counters.

*cont* Retrieve information from TAC every 100 centiseconds.

*stop* Stop tacd from connecting to the TAC and stop giving errors.

*start* Undo the *stop* command, and does a restart.

Default (null) is to undo the effect of *cont* command.

Monitor-only Parameter:

status:

_host_ Computer that is hosting the TAC.

_port_ IP port being used to connect to TAC.

_file_ Name of the file being used to on _host_ to record measurements.

_state_ Status of file (open or closed).

time:

_age_ OLD or NEW result. OLD indicates a previously logged result.

_ddddd.fffff_ The _ddddd_ field may be yyddd or MJD or Excel date (days
since 1900.0). The _ffffff_ field is always the time in fractions of a
day.

_ss_ ONCORE receiver’s ± 52 nanosecond sawtooth correction to the GPS
1PPS (nanoseconds).

_aa_ An estimate of the accuracy of the GPS tick (nanoseconds).

_g.ggg_ Amount by which the GPS receiver’s 1PPS output has been
intentionally biased (microseconds).

_c.cccc_ Corrected (cooked) counter reading after applying the _ss_ and
_g.ggg_ corrections (microseconds).

_t.tttt_ Raw counter reading (microseconds).

average:

_age_ OLD or NEW result. OLD indicates a previously logged result.

_ddddd.fffff_ The _ddddd_ field may be yyddd or MJD or Excel date (days
since 1900.0). The _ffffff_ field is always the time in fractions of a
day.

_sec_ Number of seconds of data going into average.

_rms_ RMS scatter of the _sec_ data points about the _average_
(microseconds).

_max_ The extreme maximum of the _sec_ points (microseconds).

_min_ The extreme minimum of the _sec_ points (microseconds).Comments:

_average_ Average counter reading (microseconds).

Comments:

A simple *tacd* command (with no *=*) causes either the current raw or
current averaged measurement, depending on the last set-up of the *tacd*
command, to be logged. If the command has not been set-up previously, a
raw measurement is logged.

Since the time and average output records can contain values previously
logged, values of OLD or NEW for _age_ are used to distinguish
previously logged and new results. This is intended to assist in
identifying independent measurements for plotting (use NEW as the string
in logpl).

It will startup with the Field System the tacd program gets the host and
port assignment from the tacd.ctl control file. If no control file is
available it will give a one time error and not attempt to open any host
connections. If a control file is available and is empty tacd will sleep
until a control file is provided and a start command is issued. If the
file is not empty it will attempt to establish connection and then
retrieve data every 30 seconds. If connection fails, it will keep on
trying every 30 seconds until a connection is made.

The contents of _file_ on the TAC _host_ may contain averaged or
un-averaged data depending on the set-up of the TAC.

*tape - tape recorder monitor and control (K4 drives)*

Syntax:*tape=reset*

Response:tape/_position_,_drum_,_synch_test_,_synch_,_stat1_,_stat2_

Settable Parameters:

*reset* this causes the position to be reset and a small amount of tape
recorded leaving the recorder at a squence number of approximately 50

Monitor-only Parameters:

_position_ current sequence number

_drum_ on or off

_synch_test_ on or off

_synch_ number lost

_stat1_ status byte 1 in hex

_stat2_ status byte 2 in hex

link:tape#1[*+++tape - tape recorder (Mark III, Mark IV drives)+++*]

Syntax:**tape=**__lowset,reset__

Response:tape/_lowsense,footage,fast,capstan,stop,tach,_

_ready,lcl/rem_

Settable parameters:

_lowset_ If *off*, tape may run off end of reel. If *low* (default), end
of tape will be sensed.

_reset_ *reset* to reset footage counter to 0, blank to leave counter
alone.

Monitor-only parameters:

_lowsense_ As monitor, this tells whether tape is actually at the
low-tape point, i.e. off means not at low-tape.

_footage_ Actual footage counter reading, 5 digits with leading zeroes.

_fast_ Fast tape switch on front panel, fast or nor.

_capstan_ Capstan is moving, or stop has been completed.

_stop_ stop has been issued, or nonstop.

_tach_ Tach is locked or unlocked, i.e. tape is up to speed.

_ready_ Tape drive vacuum is ready or notready.

_lcl/rem_ Switch setting, rem or lcl.

Comments:

MAT module functions available.

link:tape#1[*+++tape - tape positions (S2 drives)+++*]

Syntax:**tape=**__list__

Response:tape/_pos0,pos1,pos2,pos3,pos4,pos5,pos6,pos7_

Settable parameters:

_list_ One of *reset*, one position, or list of eight comma separated
positions. Positions are in units of seconds. *unk* maybe used to
specify a position as unknown. *uns* must be used for transports that
are not currently selected in lists of eight positions. *reset* is
equivalent to specifying one value of *0.*

Monitor-only parameters:

_posX_ The position in units of second for transport _X_. unk is
displayed for transpoorts with unknown positions. uns is displayed for
drives not currently selected.

Comments:

This command sets (“presets”) or reports the position of the transports.
It does not cause the tapes to move.

link:tape#1[*+++tape - tape recorder parameters (VLBA, VLBA4
drives)+++*]

Syntax:**tape=**__lowset,footage__

Response:tape/_lowset,footage,lowsense,capstan,tach,ready,_

_vacuum,chassis,err_

Settable Parameters:

_lowset_ *low* (default) to turn on low tape sensor, *off* to turn off.
Normally this sensor is always left on.

_footage_ If *reset*, set footage counter to 0, otherwise set footage
counter to _footage_.

Monitor-only Parameters:

_footage_ Current tape footage counter, 5 digits with leading zeroes.
Use the rec command to move the tape to a desired footage or to
determine the footage.

_lowsense_ low indicates tape is at the low tape point, otherwise off.

_capstan_ Capstan is moving or stop has been completed.

_tach_ Tach is locked or unlocked, i.e. tape is up to speed.

_ready_ Tape drive vacuum is ready or notready. Null for VLBA2 drives.

_vacuum_ Tape vacuum, inches of water.

_chassis_ Chassis serial number.

_error_ Error flag, hex. okay if no errors, otherwise the error flag
bits represent certain error conditions. Refer to MCB protocol, word 74
for recorder.

Comments:

This command is analagous to the Mark III tape command. The footage
count as recorded in the log file will be found in the same location for
both Mark III and VLBA systems.

If the drive type specified in the equip.ctl control file is *vlba2*,
the _footage_ parameter is not supported and the _vacuum_ parameter is
reported as null.

link:tapeform#1[*+++tapeform - specify tape format (longitudinal
drives)+++*]

Syntax:**tapeform=**__pass,offset,pass,offset, ...__

Response:tapeform/_pass,offset,pass,offset, ..._

Settable parameters:

_pass_ The pass number whose offset follows, must be between *1* and
*100* for Mark III and VLBA, between *1* and *112* for Mark IV.

_offset_ The a priori offset, in microns, for the preceding pass, must
be between *1* and *±4000*.

Comments:

The passes and offsets must appear in pairs. Multiple commands are
allowed because all of the pairs will not fit on a single line. The
offsets are are used by the *pass* command to position the head stack(s)
by pass number.

These commands appear in standard procedures named *tapeforma*,
*tapeformb*, *tapeformc*, *tapeformd*, one for each recording mode. The
appropriate procedure is invoked in the setup procedure. For example,
*sx2c1* and *sx2c2* invoke *tapeformc*.

For Mark IV modes, passes for stack 1 should be between *1* and *12*.
For stack 2 passes, add *100* to the pass number for stack 1.

link:tapepos#1[*+++tapepos - position tape (Mark III, Mark IV
drives)+++*]

Syntax:**tapepos=**__footage__

Response:tapepos/_footage_

Settable parameters:

_footage_ The actual tape footage (as read on the counter) at which to
position the tape.

Comments:

This command starts the tape moving at fast forward or reverse speed
(via an immediate *ff* or *rw* command) and time-schedules an *et*
command such that the tape will coast to a stop at the requested footage
count (approximately). If the request is less than 100 feet off, then
nothing is done. The model used is:

dt = _tacc_*0.01 + _dfeet_/22.5

where

_dt_ time between the *ff* or *rw* command and the *et* command

_dfeet_ number of feet to move

_tacc_ a parameter which accounts for acceleration and deceleration. The
nominal value for _tacc_ is 100, and is taken from the drivem1.ctl or
drivem2.ctl file, depending on which drive is in use.

The correct value of _tacc_ can be measured on an unloaded computer by
issuing a *tapepos=...* command to position the tape. If the drive
overshoots the command footage by _efeet_ (negative for undershoot), the
corrected value for _tacc_, rounded to the nearest integer, is:

__tacc__~new~ = __tacc__~old~ - _efeet_/0.225

Tape drives that will not position consistently within a few feet may
require adjustment.

For VLBA recorders, use the *rec* command.

link:terminate#1[*+++terminate - end field system operation+++*]

Syntax:*terminate*

Response:none

Settabel Parameters: none

Comments:

This is the graceful way to end operation of the Field System. Schedule
execution is ended, log and schedule files are closed, all programs are
removed from the system by oprin.

link:ti#1[*+++ti - list time-scheduled commands+++*]

Syntax:*ti*

Response:display of list

Settable Parameters: none

Comments:

The current time-scheduled commands are listed on the terminal. Format:

_ts nn @ yyyy.ddd.hh:mm:ss.ss command_

_nn_ command or procedure index

_t_ type

_s_ : for schedule or ; for operator stream

_yyyy.ddd.hh:mm:ss.ss_ time the command will be executed

_command_ the time-scheduled command.

This is a display-only command for debugging purposes.

link:tpi#1[*+++tnx - thanks for the error report+++*]

Syntax:**tnx=**__mnemonic,number,off/on__

Response:tnx/_list_

Settable parameters:

_mnemonic_ Two character error code, e.g., *sp*.

_number_ Error message number, e.g., *-999*.

_off/on_ Display status *on* or *off* (default).

Monitor-only parameters:

_list_ List of error messages for which display is turned off, in
format: _mnemonic,number_, one log entry per error.

Comments:

This command can be used to suppress the display of an error message on
the FS display. Even if the error message is suppressed for display, it
is still written to the log.

This command is intended to provide a way to turn off display of
specific error messages if the operator determines that nothing can be
done to correct the problem. For example if one parameter of a module’s
set-up is being reported incorrectly by the hardware, but has been
checked and is known to be correct, the operator can suppress that one
error message rather than unchecking the entire module.

If the _off/on_ parameter is *on* display of the message can be
reenabled.

This command must be used with great care. If misused it may turn off
important error messages that the operator needs to know about.
Consequently, its use is block if it is executed from a procedure,
schedule, or time-list. This command must be entered interactively. The
list of suppressed error messages is cleared every time the FS is
started. Turning off an error message is not the same as correcting the
underlying problem, which is the preferred method of dealing with a
problem.

If the command is given with no arguments a list of the error messages
that are suppressed from display is given. Each error is listed in a
separate log entry.

This command can’t distinguish between the different error messages with
the same mnemonic and number, but different additional information, such
as which VC or BBC is causing the error. If a message like that is
suppressed, it will be suppressed in all cases. This may be corrected in
a future version.

link:tpi#1[*+++tpi - read back total power integrators, cal off+++*]

Syntax:**tpi=**__list__

Response:tpi/_readings_

Settable parameters:

_list_ List of total power integrators to read back. Standard detector
mnemonics allowed.

Monitor-only parameters:

_readings_ List of readings, counts. These values are stored for use by
the *tsys/5/6* commands.

Comments:

Except for station defined detectors, the results are returned grouped
in pairs of detector mnemonic,value, the output is collected into lines
by IF channel. Detectors that have no IF assigned are displayed first
followed by IFs 1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output
for an IF would make a long output line, the output is split into more
than one line. For station defined detectors the results are just
displayed in order: u5, u6.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, 65535, is displayed as dollar signs, $$$$$.

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

It is assumed the noise calibration signal is off.

link:tpical#1[*+++tpical - read total power integrators, cal on+++*]

Syntax:**tpical=**__list__

Response:tpical/_readings_

Settable parameters:

_list_ List of total power integrators to be read back. Standard
detector mnemonics allowed.

Monitor-only parameters:

_readings_ List of readings, counts. These values are stored for use by
the *tsys/5/6* commands.

Comments:

Except for station defined detectors, the results are returned grouped
in pairs of detector mnemonic,value, the output is collected into lines
by IF channel. Detectors that have no IF assigned are displayed first
followed by IFs 1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output
for an IF would make a long output line, the output is split into more
than one line. For station defined detectors the results are just
displayed in order: u5, u6.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, 65535, is displayed as dollar signs, $$$$$.

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

It is assumed the noise calibration signal is on.

link:pcal#1[*+++tpicd - tpi (Mark III, Mark IV, VLBA, VLBA4 racks)+++*]

Syntax:**tpicd=**__cont,cycle__

*tpid=stop*

*tpicd=?*

Response:tpicd/_cont,cycle_

tpicd/_detector list_

Settable parameters:

_cont_ Whether to sample continuously or not: *no* (default) or *yes*.
If *no*, samplng is stopped and started by the **data_valid=**__…__
command.

_cylce_ Number of centiseconds per cycle, 0 disables sampling.

Monitor-only parameters:

_detector list_ List of detectors to be sampled, grouped by IF channel
as in the **tpi, tpical, tpzero, tpgain,**and *tsys* commands. The list
is constructed from the VCs selected by the formatter and the IFs that
feed them when the *pcal=...* command is issued.

Comments:

The form *pcald* is used to start the extraction. The form *pcald=stop*
is used to halt it. The form *tpicd=?* returns the current set-up
information.

If tpic is being controlled by the *data_valid* command, it begins and
stops sampling and recording data within one second of a request to do
so. In other words within one second of the execution of a
**data_valid=**__…__ command.

This command controls the tpicd TPI measurement daemon. The remaining
comments describe the daemon.

The daemon measures the TPI values (Mark III/IV racks) and BBC channels
gains and IF channel TPI values (VLBA/VLBA4 racks). For Mark III/IV
racks the values appear in the log as #tpicd#tpi/ entries. For
VLBA/VLBA4 racks the values appear in the log as #tpicd#tpgain/ entries.
Neither are displayed to the operator. They only go in the log. IF TPI
values for the VLBA/VLBA4 racks are reported in tpgain/ records even
though they are not gains.

The tpicd daemon results are returned grouped in pairs of detector
mnemonic,value, the output is collected into lines by IF channel.
Detectors that have no IF assigned are displayed first followed by IFs
1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output for an IF would
make a long output line, the output is split into more than one line.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, 65535, is displayed as dollar signs, $$$$$, (for
gains an overflow is 255).

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

link:tpzero#1[+++*tpgain - measure gain levels* *(VLBA, VLBA4
racks)*+++]

Syntax:**tpgain=**__list__

Response:tpgain/_gain levels_

Settable parameters:

_list_ List of modules for which gain levels are to be measured.
Standard detector mnemonics allowed, but no station detectors.

Monitor-only parameters:

_zero levels_ List of gain levels, counts. These values are needed for
post processing of stored for use by the *tsys/5/6*.

Comments:

Except for station defined detectors, the results are returned grouped
in pairs of detector mnemonic,value, the output is collected into lines
by IF channel. Detectors that have no IF assigned are displayed first
followed by IFs 1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output
for an IF would make a long output line, the output is split into more
than one line. For station defined detectors the results are just
displayed in order: u5, u6.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, 255, is displayed as dollar signs, $$$.

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

It is assumed that the gain is locked in manual get a stable level.

link:tpzero#1[*+++tpzero - measure zero levels+++*]

Syntax:**tpzero=**__list__

Response:tpzero/_zero levels_

Settable parameters:

_list_ List of modules for which zero levels are to be measured.
Standard detector mnemonics allowed.

Monitor-only parameters:

_zero levels_ List of zero levels, counts. These values are stored for
use by the *tsys/5/6*.

Comments:

Except for station defined detectors, the results are returned grouped
in pairs of detector mnemonic,value, the output is collected into lines
by IF channel. Detectors that have no IF assigned are displayed first
followed by Ifs 1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output
for an IF would make a long output line, the output is split into more
than one line. For station defined detectors the results are just
displayed in order: u5, u6.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, 65535, is displayed as dollar signs, $$$$$.

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

It is assumed the noise calibration signal is off and attenuations is at
a maximum or the signal is somehow turn-off.

These zero levels are subtracted from all readings taken on the same
module before system temperatures are computed.

link:track#1[*+++track - display antenna tracking information+++*]

Syntax:*track*

Response:tr _yy/ddd.hh:mm:ss cmd1 cmd2 delta1 delta2_

pr _prd1 prd2 praz prel_

co _cor1 cor2 eqeq refr_

Settable Parameters: none

Monitor-only parameters:

The tr line contains information from the tracking computer (all angles
are in degrees):

_yy/ddd.hh:m:ss_ year day and time of tracking computer

_cmd1_ first antenna command angle, x, azimuth, or hour angle

_cmd2_ second antenna command angle, y, elevation, or declination

_delta1_ tracking error for first command angle

_delta2_ tracking error for second command angle

The pr line contains predicted command angles based on time in tr line
(all angles are in degrees):

_prd1_ predicted first command angle

_prd2_ predicted second command angle

_praz_ predicted azimuth

_prel_ predicted elevation

The co line contains calculated correction information (all angles are
in degrees):

_cor1_ pointing correction for first command angle

_cor2_ pointing correction for second command angle

_eqeq_ approximate Equation of the Equinoxes, seconds of time

_refr_ refraction correction

Comments:

This command is implemented as a special mode of antcn, which may not be
available at all stations. The format of the output is station dependent
and may differ, some entries may be missing, and there may be additional
entries. This output is normally produced by antcn and each entry will
begin with #antcn#.

The typical tr line is intended to display information about the
tracking computer. The time, command angles, and deltas normally all
refer to the same epoch and the deltas are displayed with the sign of
command minus actual. The time can be compared roughly to the time field
of the log entry.

The typical pr line contains the command angles and azimuth and
elevation that antcn would have predicted at the time in the tr line.
These angles can be compared to those in tr. If antcn faithfully
replicates the command angle calculation of the pointing computer, the
numbers should agree well. At some stations this may only be
approximate. Some stations may not have this line if the command angles
are calculated in the same computer as the Field System runs in.

The typical co line contains the pointing corrections that correspond to
the current predicted command angles. The _cor1_ and _cor2_ fields are
the pointing model corrections for the two angles. The _eqeq_ field is
the equation of the equinoxes which is a small correction to sidereal
time. The refr value gives the refraction correction for the current
command angles.

Additional lines of locally defined information may be displayed.

link:3#1[*+++trackform - (Mark IV, VLBA, VLBA4, K4MK4 racks)+++*]

Syntax:**trackform=**__track,sampler,track,sampler, ...__

Response:trackform/_track,sampler,track,sampler, ..._

Settable parameters:

_track_ VLBA or Mark IV recorder track number whose sampler assignment
will follow, must be between *2* and *33*. For Mark IV add 100 to the
track number for stack 2.

_sampler_ For VLBA racks , the sampler that will be mapped to the
preceding track, *0*, or in the form _nnsd_, where __nn__=bbc number
(*1* through *14*), __s__=sideband ( *u* for upper or *l* for lower),
_d_ is the data bit (*s* for sign bit or *m* for magnitude bit).

____
For Mark IV racks, the same syntax can be used as for VLBA racks. In
addition the _nnsd_ sampler code can have _nn_ values of *15* and *16*,
and also a _+m_ can be appended, where _m_ is the lag *0*, *1*, *2*, or
*3* when fan out is being used.
____

Comments:

The tracks and samplers must appear in pairs. Multiple commands are
allowed because all of the pairs may not fit on a single line. The first
trackform command after a **form=**__...__ command resets all the
unspecified tracks to *0*. This command specifies the how the samplers
will be assigned in the next form=__...__ command that uses either mode
*m* or *v*. Please note that although tracks are specified as recorder
tracks, this command assigns the samplers to tracks in the formatter.

The samplers that can be selected are determined by the rack type
specified in the equip.ctl control file. For rack type *vlba*, only the
first eight BBCs can be used. For rack type *vlbag*, up to fourteen BBCs
can be used, but only the sign bit is available. For Mark IV two bits
for each of 16 VCs can be used.

For both VLBA and Mark IV racks, only the first track of a VLBA style
fan-out group needs to have a sampler assigned. For a Mark IV rack, the
lags can be assigned to specific tracks. It is an error to assign a lag
that is not generated by the fan mode selected. This error will be
reported when the formmater is set-up with the **form=**__...__ command.
For example lag *+3* cannot be requested for *1:2* fan-out.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* Manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses VLBA or Mark IV track numbers.

link:3#1[*+++tracks - enables (Mark IV, VLBA, VLBA4, K4MK4 racks)+++*]

Syntax:**tracks=**__list__

Response:tracks/_list_

Settable parameters:

_list_ list of VLBA or Mark IV recorder tracks for which to enable the
corresponding formatter tracks. The tracks may specified as values of
*2*–*33*, as the VLBA “groups” of tracks not including the system
tracks, *v0*, *v1*, *v2*, *v3*, or as the Mark III tracks in with the
corresponding VLBA “groups”, *m0*, *m1*, *m2*, *m3*. For Mark IV stack 2
tracks add 100 to the track number and use groups *v4*, *v5*, *v6*, *v7*
and *m4*, *m5*, *m6*, *m7*. For Mark IV/VLBA4/K4MK4 racks only (i.e.,
all except VLBA), the first parameter may be an asterisk, “*”, to add to
previously enabled tracks.

Comments:

This command specifies which formatter tracks will be enabled in the
next form=... command that uses either mode *m* or *v*. Please note that
although tracks are specified as recorder tracks, this command actually
enables the corresponding tracks in formatter. Recorder enables (enable
command) must also be turned on for data to be recorded.

Note that a VLBA or Mark IV track number equals the Mark III track
number plus three. Consequently, odd Mark III tracks are even VLBA or
Mark IV track numbers and vice-versa. See the Track Assignment Tables in
the *System Set-up* Manual. Also VLBA group numbers equal Mark III group
numbers minus one, but the VLBA groups include additional tracks. Note
that this command uses VLBA or Mark IV track and group numbers.

For Mark IV/VLBA4/K4MK4 racks only (i.e., all except VLBA), if the first
parameter is asterisk, “*”, the groups and/or tracks provided as
subsequent parameters will be enabled in addition to those already
enabled.

link:tsys#1[*+++tsys - compute and display system temps+++*]

Syntax:**tsys=**__list__

**tsys5=**__list__

**tsys6=**__list__

Response:tsys/_systemps_

tsys5/_systemps_

tsys6/_systemps_

Settable parameters:

_list_ List of modules for which Tsys will be computed. Standard
mnemonics allowed.

Monitor-only parameters:

_systemps_ List of system temperatures, computed from values retrieved
by the *tpi*, *tpical*, and *tpzero* commands. *-1.0* means no caltemp
could be found for this detector.

Comments:

This command calculates and displays system temperatures for the
different video and IF channels.The formula is:

tsys = (tpi - tpzero) * (caltemp/(tpical-tpi))

tsys system temperature, as reported in *tsys* command

tpi cal-off reading, from *tpi* command

tpzero zero-level reading, from *tpzero* command

tpical cal-on reading, from *tpical* command

caltemp noise calibration source temperature, from *caltemp* command.

Except for station defined detectors, the results are returned grouped
in pairs of detector mnemonic,value, the output is collected into lines
by IF channel. Detectors that have no IF assigned are displayed first
followed by Ifs 1-3 (Mark III/IV) and a-d (VLBA/VLBA4). If the output
for an IF would make a long output line, the output is split into more
than one line. For station defined detectors the results are just
displayed in order: u5, u6.

A time-out or other error on one more devices for a Mark III/IV or
VLBA/VLBA4 detector will not prevent results from other detectors from
being displayed. A negative integer will be shown for each channel that
had an error that prevented an actual measurement from being displayed.
An overflow value, larger than 999999.9 is displayed as dollar signs,
$$$$$$$$.

For Mark III/IV racks the detector mnemonics for the VC are displayed as
_hs_, where _h_ is the VC number as hex and _s_ is for the detector is
use: d (dual for upper/lower), u (upper), l (lower), or a digit 4-7 for
other detectors.

For station dependent detectors, the *tsys5* and *tsys6* commands are
used to match the detectors to the corresponding *caltemp5* and
*caltemp6*.

link:user_info#1[*+++user_info - user info set and monitor (S2
drives)+++*]

Syntax:**user_info=**__field,label,string,auto__

Response:user_info/_field,label,string_

Settable parameters:

_field_ Field number, *1*-*4*. No default.

_label_ *field* or *label*, to indicate which to update. Default
*field*.

_string_ An arbitrary string with contents for field or label. No
default unless _auto_ is *auto* and _field_ is *1* or *2*, see comments
below.

_auto_ *auto* or *literal*. Default *literal*.

Monitor-only Parameters: none

Comments:

This command sets the specified “User Info” field or label. If _auto_ is
*auto*, and _string_ is null, and if _field_ is *1*, then field 1 is set
to the station name (specified in the location.ctl control file) or if
_field_ is *2*, then field 2 is set to the source name (specified by the
*source=* command).

The usable length of _string_ for all labels and fields *1* and *2* is
16 characters, for field *3* it is 32 characters, for field *4* it is 48
characters.

*vx - video converter set-up (all K4 racks)*

Syntax:**vc=**__vc__,_high/low_,_det_

**vx=**__vc__,_att_,_det_

Response:vc/_vc_,_high/low_,_det_,_yes/no_,_upwr_,_lpwr_

vx/_vc_,_att_,_det_,_yes/no_,_upwr_,_lpwr_

Settable Parameters:

_vc_ VC channel to set parameters for, *1*-*16* for K4 type 1, *1*-*8*
for K4 type 2, or *alarm*, no default

_high/low_ IF selection *high* or *low*, default according to VCLO
frequency if _vc_’s LO has been set-up, for K4 type 1 only

_att_ attenuator, *0*-*15* dB, default *0*, for K4 type 2 only

_det_ front panel power detector display *upper* or *lower* sideband,
default *upper*

Monitor-only:

_yes/no_ VC is present, *yes* or *no*

_upwr_ upper sideband power in counts, 0-99, the nominal range is 10-90

_lpwr_ lower sideband power in counts, 0-99, the nominal range is 10-90

Comments:

The **vc**form is used for K4 type 1 VCs. For K4 type 2 VCs the “*x*” in
the command is replaced with “*a*” or “*b*” for the first and second
bank of VCs respectively. The form of the command is different for type
1 and type 2 VCs.

Only one channel in each bank of VCs can be commanded at a time, but the
monitor response consists of several lines, one for each channel in the
bank.

The power levels for type 1 VCs are:

|OUTPUT LEVEL(dBm)|+3|+2|+1| 0|-1|-2|-3|-4|-5|

----------------------------------------------

|LEVEL MONITOR |78|68|59|50|43|37|32|27|23|

For type 2 VCs, (7631A):

|OUTPUT LEVEL(dBm)|+3|+2|+1| 0|-1|-2|-3|-6|-10|

----------------------------------------------

|LEVEL MONITOR |90|75|60|50|40|32|24|10| 4|

*vcbw - video converter bandwidth (all K4 racks)*

Syntax:**vcbw=**__bw__

Response:vcbw/_bw_

Settable Parameters:

_bw_ either *alarm* or VC bandwidth in MHz, possible values for
different VC types:

for K4-1A either *2* (default) or *4*

for K4-2 either *2* (default) or *32*

for K4-2A either *2* (default) or *16*

for K4-2B either *8* or *16* (default)

Comments:

This bandwidth is not settable for K4-1 racks, but is displayed as 2.

*vcif - video converter IF attenuators (all K4 racks)*

Syntax:**vcif=**__att1__,_att2_,_att3_,_att4_

Response:vcif/_att1_,_att2_,_att3_,_att4_

Settable Parameters:

_att1_ Attenuator setting for VC channels 1-4, values of *0*-*15* dB,
default *0*

_att1_ Attenuator setting for VC channels 5-8, values of *0*-*15* dB,
default *0*

_att1_ Attenuator setting for VC channels 9-12, values of *0*-*15* dB,
default *0*

_att1_ Attenuator setting for VC channels 13-46, values of *0*-*15* dB,
default *0*

Comments:

This command is only used for K4-1 and K4-11A racks.

*vcnn - video converter (Mark III, Mark IV racks)*

Syntax:**vcnn=**__freq,bandwidth,TPIsel,attenU,attenl__

Response:vcnn/_freq,bandwidth,TPIsel,attenU,attenl,_

_rem/lcl,LOlock,TP_

Settable parameters:

_freq_ Synthesizer frequency in MHz, value must be less than *500.00*
MHz. No default.

_bandwidth_ Final filter bandwidth in MHz, default *2*. Choices for Mark
III are:

*0.125*, *0.25*, *0.5*, *1.0*, *2.0*, *4.0*, *0* (external filter).

____
Choices for Mark IV are:
____

*0.125*, *0.5*, *2.0*, *4.0*, *8.0*, *16.0*, *0* (external filter).

____
Value may be integer for bandwidths of *1*, *2*, *4*, *8*, or *16* MHz.
____

_TPIsel_ Total power integrator selection. Choices are *ul*, *l*, *u*,
*if*, *lo*, *gr* (ground). Default *u*.

_attenU_ USB attenuator, *0* or *10* db (default) only.

_attenL_ LSB attenuator, *0* or *10* db (default) only.

Monitor-only parameters:

_rem/lcl_ switch setting, rem or lcl.

_LOlock_ LO lock/unlock staus, lock or unlock.

_TP_ total power reading, decimal.

Comments:

MAT module functions available. See section 1.0 of this manual.

The total power counts returned can be related to the front panel
voltage using the relation that 1 volt on the front panel is
approximately equivalent to 32768 counts.

For Mark IV, the seldom used internal 0.25 and 1 MHz filters were
replaced with 16 and 8 MHz filters, respectively, to increase the
maximum bandwidth.

For Mark III, a power level of 32768 counts corresponds to 1 volt on the
front panel and 0±1 dBm output. The detector is linear to better than 2%
from 5% of full scale to full scale.

For Mark IV, the output level is controlled by AGC at 0±0.5 dBm if the
sideband power level is anywhere from approximately 1638 counts (0.05
volts) above the zero offset to up to saturation, with the 10 dB
attenuators in. However, internal noise considerations make 3300 a
better lower signal level limit. Mark IV VCs should always be operated
with the 10 dB attenuators in. The Mark IV sideband power levels reflect
the relative input power, i.e., before the AGC. The Mark IV detector is
linear to about 1% over the full range.

*vxlo - video converter LO frequency (all K4 racks)*

Syntax:**vxlo=**__vc__,_freq_

Response:vxlo/vc,freq,yes/no,lock

Settable Parameters:

_vc_ VC channel to set the LO of, *1*-*16* for K4 type 1, *1*-*8* for K4
type 2, or one of *alarm*, *hold_on*, or *hold_off*, no default

_freq_ LO frequency in MHz, 99.99-511.99 for K4 type 1, 499.99-999.99
for K4 type 2, no default.

Monitor-only Parameters:

_yes/no_ LO is present, yes or no

lock lock or unlock or missing

Comments:

The “*x*” in the command is replaced with “*c*” for K4 type 1 VC. For K4
type 2 VCs the “*x*” is replaced with “*a*” or “*b*” for the first and
second bank of VCs respectively.

Only one LO in each bank of VCs can be commanded at a time, but the
monitor response consists of several lines, one for each LO in the bank.

*wakeup - ring bells to alert operator*

Syntax:*wakeup*

Response:none

Settable Parameters: none

Comments:

This command rings the internal bell on the terminal to alert the
operator. At Haystack and Westford, *ERROR* appears on the video screen.

*worm - estimate inchworm velocities (longitudinal drives)*

Syntax:**worm=**__stack,scale__

Response:worm/_stack,scale,fo,so,fi,si_

Settable parameters:

_stack_ Head stack to measure the speed of: *1*, *2*, **w**rite or
**r**ead. Default is *2* for Mark III/IV and VLBA4, and *1* for VLBA.
Only *1* is valid for VLBA and MK4B recorders. The value **w**rite is
synonymous with *1* and **r**ead is synonymous with *2*, even if the
heads are wired differently. Only the first character for **w**rite and
**r**ead is checked.; they are provided only for backward compatibility.

_scale_ Scale to use for speed measurement, **o**ld (default), **n**ew,
or **u**pdate. Only the first character is checked. The **u**pdate mode
uses the old scale and updates the speed in use.

Monitor-only parameters:

_fo_ Fast out speed.

_so_ Slow out speed.

_fi_ Fast in speed.

_si_ Slow in speed.

Comments:

This command measures the inchworm speeds. It must be issued once with
parameters to set it up. Issuing the command without parameters will
start a measurement.

Measurements are made by moving the head stack for 1 second at slow
speeds and 0.1 seconds at fast speeds in each direction. The before and
after voltages are compared and the voltage scale for that head stack is
used to calculate the speed. This scheme works best if the inchworm
starts well away from the limits of its motion. For typical voltage
scale factors (170 microns/volt), the fast speeds measured by this
command tend be quantized in units slightly smaller than 10; the slow in
units of about 1.

Either the current (old) or the new voltage scales can be used. The old
scale is the one most recently read on Field System start-up from the
head.ctl control file. The new scale is the most recently determined
scale factor calculated by the *hdcalc* command.

*wvolt - head write voltage (VLBA, VLBA4 drives)*

Syntax:**wvolt=**__volt1,volt2__

Response:wvolt/_volt1,volt2_

Settable parameters:

_volt1_ Write voltage for stack 1. No default.

_volt2_ Write voltage for stack 2. No default. For VLBA4 drives only.

Comments:

This command sets and reads the write voltage for heads. However it is
only for testing purposes. The next *rec=load* will return the write
voltage to the values set in the vdrive1.ctl or vdrive2.ctl control
file.

*wx - get current weather parameters*

Syntax:*wx*

Response:wx/_temp,press,humid_

Settable parameters: none

Monitor-only parameters:

_temp_ current temperature, degrees C.

_press_ current barometric pressure, mbars.

_humid_ current humidity, %.

Comments:

In the standard version of this command, used when the standard met
sensor package is available, temperature, barometric pressure and
relative humidity are automatically read from the met sensor, displayed
at the operator's terminal and written to the Field System log.

If a nonstandard met package is used, a special station-specific version
of this command may be available.

If no electronic met sensor is available, a manual version of the
command may be implemented. It may prompt for the required information
as follows:

Enter current outdoor temperature (C):

Enter current barometric pressure (mbars):

Enter current humidity (%):

When the manual version of the command is used, the value for pressure
is checked to make sure it's greater than zero, and humidity is checked
to make sure it is between 0 and 100. A *wakeup* command should be
issued before manual *wx* when included in a procedure in order to gain
the operator's attention.

*xdisp - extended display*

Syntax:**xdisp=**__on/off__

Response:none

Settable parameters:

_on/off_ on to turn on extended display, *off* (default) to turn off.
When *off*, commands issued from within procedures are not displayed and
ack responses from modules are not displayed. All responses are always
displayed. When *on*, all commands and responses are displayed.

Monitor-only parameters: none

Comments:

Immediate execution operator command.

*xlog - extended logging*

Syntax:**xlog=**__on/off__

Response:none

Settable parameters:

_on/off_ *on* to turn on extended logging, *off* (default) to turn off.
When *off*, commands issued from within procedures are not logged and
ack responses from modules are not logged. All responses are always
logged. When *on*, all commands and responses are logged.

Comments:

Immediate execution operator command.

*xyoff - x-y source position offset*

Syntax:**xyoff=**__xoff,yoff__

Response:xyoff/_xoff,yoff_

Settable parameters:

_x_ offset in X coordinate, in numeric angle/degrees format. Response is
in degrees.

_y_ offset in Y coordinate, in numeric angle/degrees format. Response is
in degrees.

Monitor-only parameters: none

Comments:

The antenna will move to the offset position when this command is
issued. To return to the on-source position, issue this command with
zero offsets.

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="E. Himwich, J. Quick, J. Gipson, D. Horsley">
<title>FS 10.1.0 Beta1 Update Notes</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>FS 10.1.0 Beta1 Update Notes</h1>
<div class="details">
<span id="author" class="author">E. Himwich, J. Quick, J. Gipson, D. Horsley</span><br>
<span id="revdate">Version 4.4 - April 2023</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_upgrading_from_10_0_0">2. Upgrading from 10.0.0</a>
<ul class="sectlevel2">
<li><a href="#_backup_your_operational_system">2.1. Backup your operational system</a></li>
<li><a href="#_login_as_root">2.2. Login as root</a></li>
<li><a href="#_fetch_fs_10_1_0">2.3. Fetch FS 10.1.0</a></li>
<li><a href="#_login_as_prog">2.4. Login as prog</a></li>
<li><a href="#_compile_the_fs">2.5. Compile the FS</a></li>
<li><a href="#_reload_your_station_code">2.6. Reload your station code</a></li>
<li><a href="#_reboot">2.7. Reboot</a></li>
<li><a href="#_login_as_oper">2.8. Login as oper</a></li>
<li><a href="#_local_customizations">2.9. Local customizations</a></li>
<li><a href="#_login_as_oper_2">2.10. Login as oper</a></li>
<li><a href="#_test_the_fs">2.11. Test the FS</a></li>
<li><a href="#_consider_when_to_update_your_back_ups">2.12. Consider when to update your back-ups</a></li>
<li><a href="#_review_changes">2.13. Review changes</a></li>
</ul>
</li>
<li><a href="#_changes_since_10_0_0">3. Changes since 10.0.0</a>
<ul class="sectlevel2">
<li><a href="#_fs_changes">3.1. FS changes</a></li>
<li><a href="#_drudg_changes">3.2. drudg changes</a></li>
</ul>
</li>
<li><a href="#_cleaning_up_rxg_file_comments">Appendix A: Cleaning up .rxg file comments</a>
<ul class="sectlevel2">
<li><a href="#_remove_extra_comments">A.1. Remove extra comments</a></li>
<li><a href="#_cleanup_trailing_comments">A.2. Cleanup trailing comments</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document covers the steps needed to update from FS <em>10.0.0</em> to
<em>10.1.0-beta1</em> and the changes in the new version. This update is not
an operational release. It is intended for <em>testing</em> by all stations
using FS <em>10.0.0</em>. Installing the new version as an update is much
simpler than the update to <em>10.0.0</em>, see the <a href="#_upgrading_from_10_0_0">Upgrading from 10.0.0</a>
section below.</p>
</div>
<div class="paragraph">
<p>FS <em>10.1.0</em> has been tested for several configurations but not all
possible ones. You should test it carefully before using it for
operations. Please email Ed if you encounter problems so that we can
resolve them.</p>
</div>
<div class="paragraph">
<p>The changes in the FS and <em>drudg</em> for <em>10.1.0</em> are covered in the
<a href="#_changes_since_10_0_0">Changes since 10.0.0</a> section below. The most significant changes
in <em>10.1.0</em> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FS and <em>drudg</em> support for DBBC3 racks.</p>
</li>
<li>
<p>Improved <em>onoff</em> output for the operator to make it clearer what the
program is doing.</p>
</li>
<li>
<p><em>gnplt</em> no longer duplicates trailing comments in <em>.rxg</em> files.</p>
</li>
<li>
<p>A new <em>drudg</em> option <code>e-vlbi_override</code> in <em>skedf.ctl</em> to
automatically change the recorder to <code>none</code> and remove <code>/fila10g</code> if
present in the rack name, if the <code>target_correlator</code> VEX parameter
includes <code>e-vlbi</code> (case insensitive).</p>
</li>
<li>
<p>A new <em>drudg</em> option <code>close_scan</code> in <em>skedf.ctl</em> to make it easier
to breakaway from one schedule to run another schedule for a short
time and then return to the original schedule. This is useful for
geodesy intensive schedules.</p>
</li>
<li>
<p>Change the default FS <em>git</em> branch to <code>main</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<mark>This has <em>not</em> been implemented in the <em>alpha</em> and <em>beta</em>
pre-releases.</mark>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrading_from_10_0_0">2. Upgrading from 10.0.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must have already upgraded to <em>10.0.0</em> according to the
<a href="../0/10.0.0.html">FS 10.0.0 Update Notes</a> document before installing
this update.</p>
</div>
<div class="sect2">
<h3 id="_backup_your_operational_system">2.1. Backup your operational system</h3>
<div class="paragraph">
<p>Having a back-up to return to will allow you to continue operations in
case something goes wrong with the installation. If you don&#8217;t have
your own scheme, and for more details, please see the
<a href="../../misc/install_reference.html#_making_a_back_up_before_installing">Making
a back-up before installing</a> section in the
<a href="../../misc/install_reference.html">Installation Reference</a>
document.</p>
</div>
<div class="paragraph">
<p>You can also using symbolic links with copies of your old operational
directories to switch back and forth between in your operational
<em>10.0.0</em> configuration and a test install of <em>10.0.1</em>. This is covered
in detail in the
<a href="../../misc/install_reference.html#_using_symbolic_links">Using
symbolic links</a> subsection of the above referenced section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_login_as_root">2.2. Login as root</h3>
<div class="paragraph">
<p>The next step requires <em>root</em> permissions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fetch_fs_10_1_0">2.3. Fetch FS 10.1.0</h3>
<div class="paragraph">
<p>The directions in this step make a backup copy of your <em>/usr2/fs-git</em>
directory. This is optional, but may help you recover if there is an
error. You can of course use any name you like for the backup. You
should use a different name for the backup directory than
<em>fs-git.old-10.0.0</em> if that directory already exists.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p><mark>The paragraph immediately below in this <strong>IMPORTANT</strong> block does not
apply to <em>alpha</em> and <em>beta</em> releases.</mark></p>
</div>
<div class="paragraph">
<p>The default branch of the FS has changed to <code>main</code>. To simplify the
installation, we recommend that you re-clone the repository. If you
need to preserve your old repository as your working copy, please use
the directions in the <a href="#note">NOTE</a> below in this step. Otherwise
proceed with:</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>If you are using an FSL9 or FSL10 system:</p>
<div class="literalblock">
<div class="content">
<pre>cd /usr2
mv fs-git fs-git.old-10.0.0
git clone https://github.com/nvi-inc/fs.git fs-git
cd fs-git
git checkout -q 10.1.0-beta1
make install</pre>
</div>
</div>
<div class="paragraph">
<p>Answer <code><strong>y</strong></code> to confirm installation.</p>
</div>
</li>
<li>
<p>If you are using FSL8 or other old Linux distribution, or otherwise
need to use <em>ssh</em> instead:</p>
<div class="literalblock">
<div class="content">
<pre>cd /usr2
mv fs-git fs-git.old-10.0.0
git clone git@github.com:nvi-inc/fs fs-git
cd fs-git
git checkout -q 10.1.0-beta1
make install</pre>
</div>
</div>
<div class="paragraph">
<p>Answer <code><strong>y</strong></code> to confirm installation.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div id="note" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<mark>This <strong>NOTE</strong> does not apply to <em>alpha</em> AND <em>beta</em> releases.</mark>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you need to preserve your old repository for operations, instead of
following the directions above, you can download the update and change
your default branch to <code>main</code> with:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As <em>root</em>:</p>
<div class="literalblock">
<div class="content">
<pre>cd /usr2
cp -a fs-git fs-git.old-10.0.0</pre>
</div>
</div>
</li>
<li>
<p>Login as <em>prog</em></p>
</li>
<li>
<p>Execute:</p>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/fs-git
git branch -m master main
git fetch origin
git branch -u origin/main main
git remote set-head origin -a
git branch -rd origin/master
git checkout -q 10.1.0-beta1</pre>
</div>
</div>
</li>
<li>
<p>Login as <em>root</em>:</p>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/fs-git
make install</pre>
</div>
</div>
<div class="paragraph">
<p>Answer <code><strong>y</strong></code> to confirm installation.</p>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_login_as_prog">2.4. Login as prog</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The FS must be compiled as <em>prog</em>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compile_the_fs">2.5. Compile the FS</h3>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/fs
make rmdoto rmexe all &gt;&amp; /dev/null
make -s</pre>
</div>
</div>
<div class="paragraph">
<p>No output from the last command indicates a successful <em>make</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reload_your_station_code">2.6. Reload your station code</h3>
<div class="paragraph">
<p>If <em>/usr2/st/Makefile</em> is set-up in the standard way, you can do this
with:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/st
make rmdoto rmexe all</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If your station code uses <code>refrw()</code>, the <em>make</em> will fail.
You will need to update to use <code>refrw_bad()</code> or <code>refrwn()</code>. The use of
<code>refrw_bad()</code> should be sufficient in the short-term, but you should
change to <code>refrwn()</code> when convenient. Please see the
<a href="#refrw_bad">refrw_bad()</a> FS change below from more details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_reboot">2.7. Reboot</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Reboot the computer. This is necessary to allocate FS, and
possibly station, shared memory for the new version. It will also make
sure you are using the latest version of the display server.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_login_as_oper">2.8. Login as oper</h3>
<div class="paragraph">
<p>Except as indicated, the actions in the next step should be performed
as <em>oper</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_local_customizations">2.9. Local customizations</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check your use of the <code>equipment_override</code> option in <em>skedf.ctl</em>.</p>
<div class="paragraph">
<p>If you did not have the <code>equipment_override</code> option selected in
<em>skedf.ctl</em>, you probably should. This will also require you to
specify the <code>equipment</code> option with the correct values if you aren&#8217;t
already. This is the safest way to specify your equipment in
<em>skedf.ctl</em>. However, other combinations are possible depending on
your needs. Due to bugs in <em>drudg</em> these options were not operating
correctly in version <em>10.0.0</em>. For more information, please the
<a href="#fix_equipment">Fix drudg equipment options</a> change in the
<a href="#_drudg_changes">drudg changes</a> section below.</p>
</div>
</li>
<li>
<p>If present, remove use of <em>setsid</em> from <em>stpgm.ctl</em>.</p>
<div class="paragraph">
<p>If you have been using <em>setsid</em> in your <em>stpgm.ctl</em>, possibly to
insulate <em>xterm</em>s from <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>, you should remove it. If it
is used on an <code>x</code> line in the file, it will prevent the FS from
starting successfully when the display server is not in use and is not
needed when the server is in use.</p>
</div>
</li>
<li>
<p>Create the <em>dbbc3.ctl</em> control file.</p>
<div class="paragraph">
<p>The contents of DBBC3 line in the <em>equip.ctl</em> control file has been
moved to the new control file, <em>dbbc3.ctl</em>, and reorganized. To create
the new file and remove the obsolete contents of <em>equip.ctl</em>, execute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/control
/usr2/fs/misc/equipctlfix equip.ctl</pre>
</div>
</div>
<div class="paragraph">
<p>This will create the file, preserving the values from the DBBC3 line
in your old <em>equip.ctl</em> file. Your original file will be preserved as
<em>equip.ctl.bak</em>, which must not already exist. Creating this file
should allowing running the FS if you don&#8217;t have a DBBC3. If you have
a DBBC3, you should customize the contents in the <a href="#dbbc3config">FS
DBBC3 Configuration</a> step below.</p>
</div>
</li>
<li>
<p>Run the FS to check for <em>.rxg</em> file errors.</p>
<div class="paragraph">
<p>Five additional formatting errors are now reported for <em>.rxg</em> files.
While it is unlikely, if your <em>.rxg</em> files have any of these errors,
they will be reported when you try to run the FS. Only one error is
reported at a time. You will need to correct each error in turn until
the FS starts successfully. The new errors reported are described in
the <a href="#additional_rxg_errors">Additional .rxg file errors</a> change in
the <a href="#_fs_changes">FS changes</a> sub-section below.</p>
</div>
</li>
<li>
<p>If you have a Mark 5C and/or FlexBuff recorder, use <em>pfmed</em> to add
<code>mk5c_config</code> and/or <code>fb_config</code> procedures to your <code>station</code>
procedure library.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Alternatively, if the FS is <em>not</em> running, you can add empty initial
versions to your <code>station</code> procedure library with the following
commands. For <code>mk5c_config</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/proc
cat /usr2/fs/st.default/proc/mk5c_config.prc &gt;&gt;station.prc</pre>
</div>
</div>
<div class="paragraph">
<p>For <code>fb_config</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/proc
cat /usr2/fs/st.default/proc/fb_config.prc &gt;&gt;station.prc</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These procedures are called by <em>drudg</em> generated setup procedures for
systems with Mark 5C and FlexBuff recorders. They provide a means to
tune the setup of <em>jive5ab</em> for your hardware independent of the
observing mode. They can be empty if your recorders don&#8217;t need tuning
or you aren&#8217;t aware of what tuning is needed. These procedures are
called after the <code>mk5c_mode</code> or <code>fb_mode</code> commands, depending on the
type of recorder, to allow the default configuration to be overridden.
The default configuration is described in the
<a href="dbbc3_ops.html#_default_configuration">Default configuration</a>
subsection of the <a href="dbbc3_ops.html">FS DBBC3 Operations Manual</a>
and in the <code>help</code> pages for <code>mk5c_mode</code> and <code>fb_mode</code>. The commands in
these procedures should be mode independent. Mode dependent tuning
should be handled differently; perhaps by inserting commands directly
at the top-level of the setup procedure.</p>
</div>
</li>
<li>
<p>If you have a FlexBuff recorder, use <em>pfmed</em> to add a <code>checkfb</code>
procedure to your <code>station</code> procedure library.</p>
<div class="paragraph">
<p><em>drudg</em> uses this procedure in place of <code>checkmk5</code> when the selected
recorder is FlexBuff.</p>
</div>
<div class="paragraph">
<p>You can do make this change in one of two ways, using <em>pfmed</em> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you don&#8217;t also have a Mark 5 recorder, you can rename your existing
procedure:</p>
<div class="literalblock">
<div class="content">
<pre>pf,station
rn,checkmk5,checkfb</pre>
</div>
</div>
</li>
<li>
<p>If you also have a Mark 5 recorder, you can make a copy of your
existing procedure:</p>
<div class="literalblock">
<div class="content">
<pre>pf,station
st,checkmk5,checkfb</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, for either case, in the new file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You should remove any <code>mk5=get_stats?</code> commands, if they are
present.</p>
</li>
<li>
<p>You may also like to rename the call to <code>mk5_status</code> to <code>fb_status</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#dbbc3config">FS DBBC3 Configuration</a><a id="dbbc3config"></a>: If you have a
DBBC3, you should make the configuration changes described in the
<a href="dbbc3_ops.html#_configuring_the_fs_for_use_with_a_dbbc3">Configuring
the FS for use with a DBBC3</a> appendix of the <a href="dbbc3_ops.html">FS
DBBC3 Operations Manual</a>. If you expect to get a DBBC3, these
changes can be deferred until then.</p>
</li>
<li>
<p>If you are using <em>tcsh</em> as your login shell for <em>oper</em> or <em>prog</em> (or
AUID accounts) and have not already done so, adjust <em>~/.xsession</em> .</p>
<div class="paragraph">
<p>This step is optional, but may be helpful if you are using <em>tcsh</em> as
your login shell for <em>oper</em> and/or <em>prog</em> (or AUID accounts) and use
the FS with the graphical display on the console. For this case, you
may wish to make the changes in the
<a href="../0/10.0.0.html#xsession">Updating ~/.xsession</a> sub-step in
<a href="../0/10.0.0.html#_miscellaneous_fslx_changes">Miscellaneous FSLx
changes</a> step of the <a href="../0/10.0.0.html">FS 10.0.0 Update Notes</a>
document. If you have already made these changes, this step can be
skipped.</p>
</div>
<div class="paragraph">
<p>This change will make sure the window manager (<em>fvwm2</em>) operates
with the FS runtime environment variables set. This could be important
for example, if you want to run <em>fsclient</em> (perhaps for a
<code>scan_check</code> window) from a console hotkey.</p>
</div>
</li>
<li>
<p>Cleanup <em>.rxg</em> file comments:</p>
<div class="paragraph">
<p>This step is optional, but may help you if want the leading and
trailing comments in your <em>.rxg</em> files to be easy to interpret. If it
is not performed, there will no loss of functionality with the <em>.rxg</em>
files. They will just have some extraneous comments.</p>
</div>
<div class="paragraph">
<p>The complete cleanup can be a lengthy process. It is covered in the
appendix <a href="#_cleaning_up_rxg_file_comments">Cleaning up .rxg file comments</a>. That appendix has two
sequential steps. The first is relatively easy and is recommended for
most users before they next update their <em>.rxg</em> files with <em>gnplt</em>.
The second step is more complicated and can then be deferred until
later. Please see the appendix for more details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This step exists due to bugs in <em>gnplt</em>, fixed as of this update, that
have caused extra comments to added to <em>.rxg</em> files. This is described
in the <a href="#stop_adding_extra_comments">Stop adding extra comments when
updating .rxg files</a> change in the <a href="#_fs_changes">FS changes</a> sub-section below.</p>
</div>
<div class="paragraph">
<p>If you have been correcting the extra comments added by <em>gnplt</em> as you
updated your <em>.rxg</em> files, this step may have little or no benefit for
you.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Make the <code>scnch</code> and <code>erchk</code> windows <code>NeverFocus</code>.</p>
<div class="paragraph">
<p>This step is optional, but will eliminate these windows getting the
input focus, which can be a nuisance. Add <code>NeverFocus</code> for the
<code>scnch</code>, <code>erchk</code>, and <code>monan</code> windows in your <em>~/.fvm2rc</em> files so
they will never accidentally get the focus (they don&#8217;t accept input).
They will still be able to be scrolled. If this is desired, add the
lines:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Style "erchk" NeverFocus
Style "scnch" NeverFocus
Style "monan" NeverFocus</pre>
</div>
</div>
<div class="paragraph">
<p>As <em>oper</em>, you can compare your version of the file with the new
default using:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd
diff .fvwm2rc /usr2/fs/st.default/oper</pre>
</div>
</div>
<div class="paragraph">
<p>You can make the same change for <em>prog</em>, after logging into that
account.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you login with AUID accounts and then promote to
<em>oper</em>/<em>prog</em>, you will need to make these changes in the AUID
accounts to have the intended effect.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_login_as_oper_2">2.10. Login as oper</h3>
<div class="paragraph">
<p>Make sure you are logged in as <em>oper</em> for the next step. This step in
included to make sure you have switched back to <em>oper</em> after the
previous step.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_the_fs">2.11. Test the FS</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Before testing, if as part of your testing of station code you ran the
FS under the <em>prog</em> account, either reboot or use the command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fsserver stop</pre>
</div>
</div>
<div class="paragraph">
<p>to make sure the server is no longer running as <em>prog</em>.</p>
</div>
<div class="paragraph">
<p>For details on why this is needed, please see the second <strong>IMPORTANT</strong>
item in
<a href="../0/fsserver_changes.html#_server_continues_running_after_fs_termination">Server
continues running after FS termination</a> sub-section of the
<a href="../0/fsserver_changes.html">FS 10.0.0 fsserver Changes</a> document.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Generally speaking, a fairly thorough test is to run a test
experiment. Start with using <em>drudg</em> to rotate a schedule,
<em>drudg</em>ing it to make <em>.snp</em> and <em>.prc</em> files and listings. Peform
any other pre-experiment preparation and tests you normally do, then
execute part of the schedule, and perform any normal post-experiment
plotting and clean-up that you do. The idea here is to verify that
everything works as you expect for normal operations.</p>
</div>
<div class="paragraph">
<p>Previously, the <em>onoff</em> program did not detect errors reported by
<em>antcn</em>; now it does. It seems unlikely that that this will cause a
problem, but if it does, please see <a href="#onoff_antcn">onoff now detects
antcn errors</a> for a workaround.</p>
</div>
</div>
<div class="sect2">
<h3 id="_consider_when_to_update_your_back_ups">2.12. Consider when to update your back-ups</h3>
<div class="paragraph">
<p>It would be prudent to wait until you have successfully run an
experiment or two and preferably received word that the experiment(s)
produced good data. The chances of needing to use your back-up from
before updating should be small. If something does happen, you can
copy the back-up to the (now assumed bad) updated disk. You can then
either use the restored disk or apply the FS update again. The FSL10
test procedure has more options for recovery. Managing this is a lot
easier and safer if you have a third disk.</p>
</div>
</div>
<div class="sect2">
<h3 id="_review_changes">2.13. Review changes</h3>
<div class="paragraph">
<p>Please see the <a href="#_changes_since_10_0_0">Changes since 10.0.0</a> section below for the details
of the changes since that release.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changes_since_10_0_0">3. Changes since 10.0.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are separate sub-sections with summaries of changes in the FS
and <em>drudg</em>.</p>
</div>
<div class="paragraph">
<p>Each change item is listed as a summary line with clickable <em>toggle</em>:</p>
</div>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Details are shown here.</p>
</div>
</div>
</details>
<div class="paragraph">
<p>that can be clicked on to toggle showing (or not showing) the details.
In this way, you can view the summary as a list and only reveal the
details of items that interest you.</p>
</div>
<div class="paragraph">
<p>Clickable links such as
<a href="https://github.com/nvi-inc/fs/issues/36">#36</a> connect to specific issues
reported at <a href="https://github.com/nvi-inc/fs/issues" class="bare">https://github.com/nvi-inc/fs/issues</a>.</p>
</div>
<div class="paragraph">
<p>A detailed list of changes can be found using the <code>git log</code> command
from within the FS <em>git</em> repo directory, usually <em>/usr2/fs-git</em>.</p>
</div>
<div class="sect2">
<h3 id="_fs_changes">3.1. FS changes</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add more complete support for DBBC3 DDC personality</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Before this release, the FS only provided limited functionality for
DBBC3 racks, as described in the <a href="../0/dbbc3.html">FS 10.0 DBBC3
support</a> document for that release, <em>10.0.0</em>. More complete support is
provided now. The updated support is described in the
<a href="dbbc3_ops.html">FS DBBC3 Operations Manual</a> and includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A separate <em>dbbc3.ctl</em> control file</p>
</li>
<li>
<p>Core3H board setting and monitoring with the <code>core3h_mode</code> command</p>
</li>
<li>
<p>T<sub>sys</sub> display window (<em>monit7</em>)</p>
</li>
<li>
<p>Multicast logging, which is controlled with the <code>tpicd</code> command.</p>
</li>
<li>
<p><code>mcast_time</code> command for checking DBBC3 time from the multicast data</p>
</li>
<li>
<p><em>drudg</em> support for schedules (closing
<a href="https://github.com/nvi-inc/fs/issues/33">#33</a>)</p>
</li>
<li>
<p>Integrated support for recording DBBC3 data with a Mark 5C or
FlexBuff recorder</p>
</li>
<li>
<p>FS time setting from a DBBC3 with <em>setcl</em> if NTP is not available</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Although we have made a strong effort to verify that the FS
and <em>drudg</em> will work correctly for DBBC3s, it has not been possible
to schedule a fringe test yet to validate the functionality. Until we
have some field experience with DBBC3, we will not know if everything
works well together and/or whether we should make some adjustments for
better operations. If there are issues, we expect there will be updates
to address them.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
The current FS support is structured around the features of
the DBBC3 DDC firmware, <code>DDC_U</code> <em>v125</em> and <code>DDC_V</code> <em>v124</em>, available
at the time of this release. Firmware updates and experience with the
current approach may lead to different FS support and operations in
the future.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks to: the EVN, for funding this development work; Jon Quick
(HartRAO) for testing, feature recommendations, helpful suggestions,
extensive discussions, and making a system available for remote
testing; John Gipson (GSFC) for <em>drudg</em> support; Eskil Varenius
(Onsala), for testing as well as making a system available for remote
testing; Sven Dornbusch (MPIfR, Bonn), for elaborating on the details
of DBBC3 functionality; Uwe Bach (Effelsberg) and Marjolein Verkouter
(JIVE) for providing helpful suggestions.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve <em>onoff</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Improve <em>onoff</em> operator output.</p>
<div class="paragraph">
<p>The operator output of <em>onoff</em> was completely restructured. The raw
data is still recorded in the log, but now the operator will see only
summary messages that describe what the program is doing and the final
results (the <code>VAL</code> lines). Each major action that the program
undertakes is reported, as well as any steps needed to recover if an
error should occur. This should make the output both more compact and
useful. The full output can still be seen in the Log Display window by
using <code><strong>xdisp=on</strong></code> (use <code><strong>xdisp=off</strong></code> afterwards to turn off the more
verbose display).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If <em>antcn</em> logs messages about commanding offsets (mode <code>2</code>), the
flow of the <em>onoff</em> operator output may be affected. The general
posture of <em>antcn</em> is intended to be &#8220;no news is good news.&#8221; In
particular, this is why <em>onoff</em> (and <em>aquir</em> and <em>fivpt</em>) check
onsource status with mode <code>5</code> which is not suppose to generate log
output for why the antenna is off source. You can of course arrange
your <em>antcn</em>'s output anyway you prefer.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Change to lock gains after initially reaching starting position.</p>
<div class="paragraph">
<p>Previously, for systems that require locking the gains, they were set
before confirming that the antenna had reached the starting position.
Now <em>onoff</em> waits until it has been reached. This will have no impact
when <em>onoff</em> is started already at the starting position, including
when run by <em>aquir</em>.</p>
</div>
<div class="paragraph">
<p>If <em>onoff</em> is started <em>before</em> the antenna has reached the starting
position, the effects will be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>onoff</em> will take slightly longer to run because the gains won&#8217;t be
locked in parallel with the slew.</p>
</li>
<li>
<p>The gains will be locked at the starting position. This could
improve the gain levels used for the measurements, particularly for
large elevation slews. The is the reason that this change was made.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#onoff_antcn">onoff now detects antcn errors</a><a id="onoff_antcn"></a>:</p>
<div class="paragraph">
<p>Previously, these errors were ignored due to a bug. Now <em>antcn</em> errors
are detected. If one occurs now, <em>onoff</em> will try to run <em>antcn</em> a
second time to make <em>onoff</em> more robust if a transitory antenna
communication problems occurs.</p>
</div>
<div class="paragraph">
<p>It seems unlikely that these changes will cause a problem, but if they
do, a short term workaround is provided. If the environment variable
<code>FS_ONOFF_SUPPRESS_ANTCN_ERRORS</code> is set to <code>1</code>, the previous behavior
will be restored. In the longer term, the behavior of <em>antcn</em> should be
corrected.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you are using the display server, you must stop <em>fsserver</em> or
reboot to enable a change in environment variable settings. Please see
the beginning of
<a href="../../../misc/env_vars.html#_runtime_variables">Runtime variables</a>
section in the <a href="../../../misc/env_vars.html">FS Environment
Variables</a> document, for more information on setting environment
variables.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p><a id="stop_adding_extra_comments"></a><a href="#stop_adding_extra_comments">Stop
adding extra comments when updating .rxg files</a></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The trailing comments in <em>.rxg</em> files are intended to hold the old
calibration data, in reverse chronological order, as an historical
record. There was a longstanding bug in the current <em>gnplt</em> (so-called
<em>gnplt2</em>) that caused it to include additional, out-of-order,
commented out, copies of old calibration data when updating <em>.rxg</em>
files. This has been fixed (closing
<a href="https://github.com/nvi-inc/fs/issues/111">#111</a>).</p>
</div>
<div class="paragraph">
<p>Another &#8220;feature&#8221; in <em>gnplt</em> (<em>gnplt2</em>) caused extra comments to be
inserted at the beginning of .<em>rxg</em> files. <em>gnplt</em> was not updating
the date line. The program was compensating for this by adding a new
first line comment with the date each time it updated the file. Since
the date line is now being updated
(<a href="https://github.com/nvi-inc/fs/issues/72">#72</a>), the date comment line
is no longer added.</p>
</div>
<div class="paragraph">
<p>While these bugs have been fixed, it could be a lot of work to cleanup
the comments if they have not been cleaned up right along as the
<em>.rxg</em> files have been updated with <em>gnplt</em>. Cleaning-up the comments
is entirely optional. A process for the cleanup is provided in the
appendix <a href="#_cleaning_up_rxg_file_comments">Cleaning up .rxg file comments</a>. It is broken into two
steps. The first, which is relative easy, includes making a backup of
the files as they are now, and then reducing them to the minimum
needed to preserve the active calibration data (with its interspersed
comments).</p>
</div>
<div class="paragraph">
<p>The second step cleans-up the trailing comments. That step is an
optional follow-up to the first step. It is more involved and can be
deferred to a later date. If the <em>.rxg</em> files have only been updated
by <em>gnplt</em>, it should work as written. If other modifications have
been made to the <em>.rxg</em> files, for example by hand editing, the second
step may needed to be modified accordingly.</p>
</div>
<div class="paragraph">
<p>Please see the appendix <a href="#_cleaning_up_rxg_file_comments">Cleaning up .rxg file comments</a> for the
details of the cleanup process.</p>
</div>
<div class="paragraph">
<p>Thanks to Jonathan Quick (HartRAO) for reporting these issues,
making suggestions for the fixes, and testing them.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add adjustable log size warning message (closing
<a href="https://github.com/nvi-inc/fs/issues/114">#114</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>When a log is opened (including <em>station.log</em> when starting the FS),
there is an error reported if the size exceeds a threshold, previously
hard-coded as 100 MB. The size for the error is now adjustable by
setting the environment variable <code>FS_LOG_SIZE_WARNING</code> to the desired
size in MB. If it is not set, it defaults to 100 MB.</p>
</div>
<div class="paragraph">
<p>The FS must be restarted in a session with the variable set for it to
take effect. If the display server is in use, <em>fsserver</em> must be
stopped (or the system rebooted) <em>after</em> stopping the FS and <em>before</em>
restarting it with:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fsserver stop</pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to Kiah Imai (KPGO) for suggesting this.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve <em>plog</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fix <em>plog</em> to only refuse to reduce a log with multicast data if it
is the active log in the FS.</p>
<div class="paragraph">
<p>In the process of reducing a log (removing multicast data), the log is
renamed. This can cause a log recovery to occur if the log is
currently open in the FS since it appears to be missing. This was
protected against by <em>plog</em>, which would refuse to rename the log if
it was open to any program. This meant that if the log was, for
example, being viewed with <code>tail -f</code> or <em>less</em> it could not be
renamed. This was fixed so that <em>plog</em> will only refuse to rename the
log if it is open in the FS (to <em>ddout</em>)..</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In such a case, the operator needs to close the log before
running <em>plog</em> on it. That is good practice in any case.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Other, non-reduction, log processing by <em>plog</em> was not affected
by this issue since renaming is not needed. It is still good practice
to close the log before pushing it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks to Katie Pazamickis and Jay Redmond (both at GGAO) for
reporting this.</p>
</div>
</li>
<li>
<p>Add use of <em>bzip2</em> compression to <em>plog</em>.</p>
<div class="paragraph">
<p><em>plog</em> will now use <em>bzip2</em> as the default program for compressing
<em>_full.log</em> files to send to the data centers. It is possible to use
<em>gzip</em> instead by setting the environment variable
<code>PLOG_COMPRESSED_EXT</code> to <code>gz</code> or using the <code>-g</code> command line option.
Please use <code><strong>plog&#160;-h</strong></code> for more information.</p>
</div>
</li>
<li>
<p>Upload both reduced and compress logs when multicast is present as
the default.</p>
<div class="paragraph">
<p>Before, when a log contained multicast data, the default was to only
upload a reduced log (with multicast removed). Now both the reduced
and compressed full log are uploaded by default.</p>
</div>
<div class="paragraph">
<p>A new option, <code>-r</code>, was added for uploading just a reduced log. As
before, the <code>-z</code> option will upload just a compressed full, It is not
expected that either of these options will get much use. The <code>-r</code> and
<code>-z</code> options cannot be used together.</p>
</div>
<div class="paragraph">
<p>Thanks to Chevo Terrazas (MGO) for suggesting uploading both files in
one step.</p>
</div>
</li>
<li>
<p>Respect <code>NETRC_DIR</code> for the <code>BKG</code> data center (closing
<a href="https://github.com/nvi-inc/fs/issues/113">#113</a>).</p>
<div class="paragraph">
<p>This had been overlooked in
<a href="https://github.com/nvi-inc/fs/issues/39">#39</a>, which had added the
<code>NETRC_DIR</code> environment variable.</p>
</div>
<div class="paragraph">
<p>Thanks to Kiah Imai (KPGO) for reporting this and testing the fix.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Improve <em>fesh</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add <code>-P</code> option to print the summary listing to the printer (closing
<a href="https://github.com/nvi-inc/fs/issues/112">#112</a>).</p>
<div class="paragraph">
<p>With <code>-P</code>, when <em>drudg</em> is run by <em>fesh</em>, it will print the summary
directly to the printer. It is appropriate to make this a <em>fesh</em>
option since it is an integrated feature of <em>drudg</em>. To print other
files, it is recommended to make a wrapper for <em>fesh</em>. An example
wrapper, which prints the summary and the <em>.prc</em> file, is included as
<em>/usr2/fs/fesh/feshp</em>. This can be copied to <em>~oper/bin</em> and
customized to print other files.</p>
</div>
<div class="paragraph">
<p>Thanks to Kiah Imai (KPGO) for suggesting this.</p>
</div>
</li>
<li>
<p>Add <code>-S</code> option to <em>fesh</em> to skip downloading.</p>
<div class="paragraph">
<p>This allows <em>fesh</em> to trigger the normal <em>drudg</em> processing when the
schedule is already on the disk. This might be useful for example, if
the schedule was generated locally by shifting the schedule (<em>drudg</em>
option <code>10</code>).</p>
</div>
</li>
<li>
<p>Map station code to lower case (closing
<a href="https://github.com/nvi-inc/fs/issues/136">#136</a>).</p>
<div class="paragraph">
<p>Before the station code was expected to be lower case. If it wasn&#8217;t,
this could cause a conflict with <em>drudg</em>, which maps it to lower case.
This could result in a mismatch on the file names for deleting <em>.snp</em>
and <em>.prc</em> files with the <code>-f</code> option. <em>fesh</em> now maps the station
code, from both the <code>STATION</code> environment variable and <code>-s</code> option, to
lower case.</p>
</div>
<div class="paragraph">
<p>Thanks to Eskil Varenius (Onsala), for reporting this issue.</p>
</div>
</li>
<li>
<p>Add new environment variables.</p>
<div class="paragraph">
<p>Support for new environment variables <code>FESH_GEO_USE_SETUP_PROC</code> and
<code>FESH_GEO_VDIF_SINGLE_THREAD_PER_FILE</code> were added. These variables can
be used to supply fixed answers to the new optional <em>drudg</em> prompts as
described in <a href="#_drudg_changes">drudg changes</a> below. For more details about the use
of the new variables, please see the <code><strong>fesh&#160;-h</strong></code> output.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Improve <em>msg</em> to always pick-up a new log file name (closing
<a href="https://github.com/nvi-inc/fs/issues/118">#118</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Previously <em>msg</em> only read the log file (and session) name on start-up
and when sending messages. It was modified to reread the log file (and
session) name whenever a new form is displayed. As a result, selecting
any form or send a sending a message from one will cause the log file
name to be reread (and session name reset), in other words, this will
occur for any significant user action. This should provide more
intuitive behavior, primarily because it is no longer necessary to
restart <em>msg</em> for each session. The setting of the session name when
reading the log file name can be turned off by disabling the <code>Setup</code>
selection <code>Get session name from log</code> if it is not desired.</p>
</div>
<div class="paragraph">
<p>Thanks to Jonathan Quick (HartRAO) for reporting the issue, providing
feedback on the changes, and testing the fix.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add <code>setup_proc</code> command</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>This command is used to identify the setup procedures in the <em>.snp</em> files, e.g.:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>setup_proc=setup01</pre>
</div>
</div>
<div class="paragraph">
<p>The setup procedure (in this example, <code>setup01</code>) will be executed if
it is the first <code>setup_proc=&#8230;&#8203;</code> command since the schedule was
started or if a different procedure was used in the previous instance
of the command in a schedule. This can be useful to avoid executing
setup procedures more than necessary, especially if they take very
long to execute, as is the case the DBBC3, or if they may disturb the
equipment.</p>
</div>
<div class="paragraph">
<p>Use of this command in <em>drudg</em> generated <em>.snp</em> files is controlled
with the <code>use_setup_proc</code> option in <em>skedf.ctl</em>. The default is to not
use it, which is the same as the previous behaviour.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The previous behavior of re-executing a setup procedure for
each recording can provide some &#8220;self-healing&#8221; of the equipment
setup if there errors occurred during the previous setup or if the
equipment malfunctioned. The use of this command will eliminate this
added robustness. Each site will need to evaluate whether to use the
option in <em>drudg</em> for this command based on their equipment&#8217;s
performance. It is typically necessary for DBBC3 systems.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <code><strong>help=setup_proc</strong></code> for more information.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add <code>mk5init</code> command to reinitialize the Mark 5 or Flexbuff
connection without restarting the FS (closing
<a href="https://github.com/nvi-inc/fs/issues/164">#164</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The <code>mk5init</code> command will close the current connection to the Mark 5
or FlexBuff recorder, reread the <em>mk5ad.ctl</em> control file, and
establish a new connection based on the contents. This may be useful
for changing which recorder is used without restarting the FS.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Another change, <a href="#fbsyns">FlexBuff synonyms</a>, in this document,
makes <code>mk5init</code> available with the synonym <code>fb_init</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This feature is considered experimental. It appears to work
well, but more extensive field testing may reveal issues.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
The function of this command may be revised or the command
may be removed in the future.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks to Jun Yang (Onsala) for suggesting this.</p>
</div>
</div>
</details>
</li>
<li>
<p>Expand setup of Mark 5C and Flexbuff recorders</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The <code>mk5c_mode</code> command sends configuration commands, beyond <code>mode</code>,
depending on which recorder is selected in <em>equip.ctl</em>, <code>mk5c</code> or
<code>flexbuff</code>, the total data rate, and the data type, VDIF or
5B/Ethernet. The updated default configuration is described in the
<a href="dbbc3_ops.html#_default_configuration">Default configuration</a>
subsection of the <a href="dbbc3_ops.html">FS DBBC3 Operations Manual</a>.</p>
</div>
<div class="paragraph">
<p>All the settings can be overridden by the <code>mk5c_config</code> (or
<code>fb_config</code>, depending on the recorder type selected when running
<em>drudg</em>) local procedure. See the
<a href="dbbc3_ops.html#_overriding_the_defaults">Overriding the defaults</a>
subsection of the <a href="dbbc3_ops.html">FS DBBC3 Operations Manual</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Another change, <a href="#fbsyns">FlexBuff synonyms</a> in this document,
makes <code>mk5c_mode</code> available with the synonym <code>fb_mode</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks to Marjolein Verkouter (JIVE) for extensive discussions about
what the correct settings should be.</p>
</div>
</div>
</details>
</li>
<li>
<p><a href="#fbsyns">FlexBuff synonyms</a>:<a id="fbsyns"></a> Add FlexBuff synonyms for
all Mark 5 commands except <code>mk5b_mode</code>, which is not used with a
FlexBuff recorder</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The following synonyms for FlexBuff recorders (listed with their
corresponding Mark 5 versions) were added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fb</code>&#8201;&#8212;&#8201;<code>mk5</code> (<code>jive5ab</code> is also a synonym)&#8201;&#8212;&#8201;low-level recorder
communication</p>
</li>
<li>
<p><code>fb_close</code>&#8201;&#8212;&#8201;<code>mk5close</code>&#8201;&#8212;&#8201;close connection to recorder</p>
</li>
<li>
<p><code>fb_init</code>&#8201;&#8212;&#8201;<code>mk5init</code>&#8201;&#8212;&#8201;initialize connection after rereading
<em>mk5ad.ctl</em> control file</p>
</li>
<li>
<p><code>fb_mode</code>&#8201;&#8212;&#8201;<code>mk5c_mode</code>&#8201;&#8212;&#8201;set recording mode</p>
<div class="paragraph">
<p>This command tailors it behaviour depending on what type of recorder
is specified in <em>equip.ctl</em>  control file, not by the name of the
command.</p>
</div>
</li>
<li>
<p><code>fb_relink</code>&#8201;&#8212;&#8201;<code>mk5relink</code>&#8201;&#8212;&#8201;relink to recorder after closing
connection</p>
<div class="paragraph">
<p>This command is used after <code>fb_close</code>/<code>mk5close</code> to reestablish the
connection.</p>
</div>
</li>
<li>
<p><code>fb_status</code>&#8201;&#8212;&#8201;<code>mk5_status</code>&#8201;&#8212;&#8201;report recorder errors</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no differences in the function of the commands when the
FlexBuff synonyms are used. They may be used to make the meaning of
procedure files and log entries clearer.</p>
</div>
</div>
</details>
</li>
<li>
<p>Split <code>equip</code> log header line into three parts</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The <code>equip</code> line in the log header has been broken into three lines,
<code>equip</code>, <code>equip2</code>, and <code>equip3</code>. The <code>equip</code> line now contains just
the rack, recorders, and decoder information. The remaining
information from the <em>equip.ctl</em> control file is listed, in order, on
the <code>equip2</code> and <code>equip3</code> lines. Those lines break between the Mark 4
Decoder Transmission Terminator Character value and the DBBC DDC
Firmware Version value. Except for the clock rate value, the values in
the <code>equip3</code> line are only DBBC related values. The clock rate value
is also used for Mark 5B recorders.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add features to <em>rdbemsg</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add command line options to <em>rdbemsg</em>.</p>
<div class="paragraph">
<p>Two command line options were added to <em>rdbemsg</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-f</code>&#8201;&#8212;&#8201;which takes an integer argument to set the font size,
default is <code>14</code></p>
</li>
<li>
<p><code>-g</code>&#8201;&#8212;&#8201;which takes a string argument to set the window geometry,
default is not to set it</p>
<div class="paragraph">
<p>Only the position part of the geometry should be set with <code>-g</code>, e.g.,
<code>-g&#160;-0-0</code>. The useful way to control the size is with <code>-f</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>mci-version</code> parameter to <em>rdbemsg.ctl</em> control file.</p>
<div class="paragraph">
<p>This was added to allow distinguishing the early version of MCI node
at Westford, which requires different handling. Specifically, the MCI
logs are in the directory <em>~oper/node_software/V0</em>, the file names do
not contain the station code, the fields in the file are space
delimited, and the fields are in a different order. The correct form
for Westford is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mci-version:0</pre>
</div>
</div>
<div class="paragraph">
<p>Other stations do not need this parameter and can either not include
it or comment it out.</p>
</div>
<div class="paragraph">
<p>The example control file, <em>/usr2/fs/st.default/control/rdbemsg.ctl</em>
was updated accordingly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As with other  <em>rdbemsg.ctl</em> parameters, this one should not
have any white space on its (non-comment) line.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Show incorrect times DOT time in inverse video for the RDBE monitor
display (<em>monit6</em>) window.</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Although in principle there is nothing wrong with recording data from
RDBEs that have slightly different times (unlike having different VDIF
epochs, which makes recording impossible with Mark 6 recorders), the
recovery is too costly to use in most cases. As a result, to bring the
operator&#8217;s attention to the conflict, <em>monit6</em> was modified to show
DOT values that are not the current time in inverse video. This change
could have been limited to using inverse video to just show times that
don&#8217;t agree with the majority since only a disagreement causes a
problem. However, there did not seem to be a use case for recording
with the time intentionally set wrong.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add use of <code>FS_RDBE_MCAST_DISABLE</code> environment variable
(closing <a href="https://github.com/nvi-inc/fs/issues/167">#167</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>If set to <code>1</code>, this will suppress attempting to receive RDBE multicast
data. This is useful for systems with R2DBEs to eliminate the (not
useful in this case) multicast errors from the log and the display.
They could already be eliminated from just the display with the <code>tnx</code>
command.</p>
</div>
<div class="paragraph">
<p>Thanks to Alex Burns (Westford) for suggesting that we have a way to
eliminate these errors entirely.</p>
</div>
</div>
</details>
</li>
<li>
<p>Fix issues with zooming, large numbers of detectors, and debug
output in <em>gnplt</em> and <em>gndat</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fix plotting of working file T<sub>cal</sub>(K) curve on zoomed T<sub>cal</sub>(K)
versus frequency plots in <em>gnplt</em> (closing
<a href="https://github.com/nvi-inc/fs/issues/117">#117</a>).</p>
<div class="paragraph">
<p>Previously, if you zoomed in the T<sub>cal</sub>(K) versus frequency plot and
selected display of the working file T<sub>cal</sub>(K) curve, it would reset
the left plot edge to the un-zoomed value when drawing the curve.
This was caused by an interaction of two issues:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The program tried to draw the entire T<sub>cal</sub>(K) curve, not just the
part in the zoomed frequency range.</p>
</li>
<li>
<p>The function, <code>drawValues</code>, that adds T<sub>cal</sub>(K) or T<sub>rec</sub> lines to
plots, reset any plot limit, except the right edge one, if any data to
be plotted was beyond that edge. This was apparently to allow showing
the vertical axis intercept of the T<sub>rec</sub> fit and to make sure that
all vertical extents of T<sub>rec</sub> and T<sub>cal</sub>(K) curves were not off the
visible plot area.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This was fixed by limiting the T<sub>cal</sub>(K) curve plotted to just
segments within the zoomed area. In addition for consistency, the
<code>drawValues</code> function was change to reset any plot limit that is
exceeded by the data. Since all other uses of <code>drawValues</code> already
limited the horizontal values to be plotted to the zoomed area, there
was no impact on those other uses.</p>
</div>
<div class="paragraph">
<p>Thanks to Eskil Varenius (Onsala), for reporting this issue and
testing the fix.</p>
</div>
</li>
<li>
<p>Correct bad T<sub>sys</sub> data in <em>gnplt</em> (closing
<a href="https://github.com/nvi-inc/fs/issues/107">#107</a> and
<a href="https://github.com/nvi-inc/fs/issues/104">#104</a>).</p>
<div class="paragraph">
<p>This was caused by an incorrectly sized array in <em>gndat</em> that was
introduced in commit <code>f84a2bb9</code> dated June 2003. This error was benign
unless more than 20 detectors were used in a single <code>onoff</code> run.
Before the advent of RDBEs and DBBC3s, this was unlikely, but not
impossible.</p>
</div>
<div class="paragraph">
<p>Due to the layout of the automatic variables, this error should only
have impacted \(\mathit{T_{sys}}\) and
\(\mathit{T_{sys}-T_{spill}}\) data in <em>gnplt</em> and only when there
were more than 20 detectors used. However, also considering the layout
of the automatic variables, it is unclear why there were not
catastrophic program failures in such a case. It would be prudent to
reanalyze any current data sets that used more than 20 detectors with
the fixed version to see if the results change.</p>
</div>
<div class="paragraph">
<p>Thanks to Beppe Maccaferri (Medicina), and subsequently Eskil Varenius
(Onsala), for reporting this issue.</p>
</div>
</li>
<li>
<p>Remove extraneous <em>gndat</em> debug output for the processing of
weather data.</p>
<div class="paragraph">
<p>The debug output was not visible when <em>gndat</em> was run from <em>gnplt</em>,
which is normally the only way it is run.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Fix continuous calibration T<sub>sys</sub> calculations for DBBC and DBBC3
racks (closing <a href="https://github.com/nvi-inc/fs/issues/157">#157</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>For the direct sample of count data by <em>tpicd</em> for monitoring T<sub>sys</sub>
for DBBC and DBBC3 racks with continuous calibration, the value of
T<sub>sys</sub> was being underestimated by about
\(\mathit{\frac{T_{cal}}{2}}\). This was because the CAL<sub>on</sub> counts
were being ignored for determining the count level of T<sub>sys</sub>. This has
been fixed.</p>
</div>
<div class="paragraph">
<p>For the DBBC, this error has been occurring since continuous cal was
first supported in 2012, FS <em>9.11.0</em>, commit <code>f5817f65</code>. For the
DBBC3, it has been present since the rack was first supported in 2018,
FS <em>9.12.12</em>, commit <code>19a69540</code>. However, the T<sub>sys</sub> monitoring for
the DBBC3 was largely unused before the current release because the
device communication rate made it difficult to work with.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The fix for the DBBC3 is now irrelevant. As of this release,
T<sub>sys</sub> for the DBBC3 is calculated, correctly, from the multicast
data.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This error is fairly small and probably did not have an impact on
routine local performance monitoring. However, if some specialized
measurements were being made, they may have been affected. If this
error had a significant effect for you, please contact Ed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Downstream amplitude calibration data should not have been
affected as long as it uses the raw count data, which is how it was
designed to be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks to Jun Yang (Onsala) for discovering and reporting this. Thank
to Jun and Eskil Varenius (also at Onsala) for making systems
available to verify the fixes.</p>
</div>
</div>
</details>
</li>
<li>
<p>Fix continuous calibration T<sub>sys</sub> calculations in <code>fivept</code> (closing
<a href="https://github.com/nvi-inc/fs/issues/131">#131</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>For continuous calibration systems, T<sub>sys</sub> was being underestimated
in <code>fivept</code> by about \(\mathit{\frac{T_{cal}}{2}}\). This was
because the CAL<sub>on</sub> counts were being ignored for determining the
count level of T<sub>sys</sub>. This has been fixed.</p>
</div>
<div class="paragraph">
<p>This made the point-by-point T<sub>ant</sub> values larger by the same amount.
This should not have biased the fitted peak source T<sub>ant</sub> since the
fitting process removes a background level. Nor should it have
affected the pointing offsets. Perhaps it actually had some benefit
since it made it less likely that the point-by-point T<sub>ant</sub> would be
negative, which is always a little unpleasant. It does affect the
T<sub>sys</sub> derived values of the <code>#fivpt#perform</code> output, but those values
are mostly a curiosity and typically not used for any significant
work.</p>
</div>
<div class="paragraph">
<p>For the DBBC, this error has been occurring since continuous cal was
first supported in 2012, FS <em>9.11.0</em>, commit <code>f5817f65</code>. For the RDBE,
this error has been occurring since continuous cal was first supported
in  2016, FS <em>9.12.5</em>, commit <code>217940c1</code>. For the DBBC3, it has been
present since the rack was first supported in 2018, FS <em>9.12.12</em>,
commit <code>19a69540</code>.</p>
</div>
<div class="paragraph">
<p>Thanks to Eskil Varenius (Onsala) for making a system available to
verify the fix.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve refraction calculations</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="#refrw_bad">refrw_bad()</a>:<a id="refrw_bad"></a> Rename <em>poclb.a</em> routine
<code>refrw()</code> to <code>refrw_bad()</code></p>
<div class="paragraph">
<p>This change is intended to make it apparent that the calculation used
in old <code>refrw()</code> routine is incorrect and encourage use of the correct
<code>refrwn()</code> routine. The error in the old <code>refrw()</code> routine has been
known about since 2006. The error is generally small above 5&deg;
elevation.</p>
</div>
<div class="paragraph">
<p>The old routine can still be used by changing calls to the new name.
This may be preferable in the short term if the effect of this error
is built into current point models. To get consistent results, station
code can be converted to use <code>refrwn()</code> and a new model can be
determined, when it is convenient.</p>
</div>
<div class="paragraph">
<p>Thanks to Jon Quick (HartRAO) for pointing out this error and
supplying the corrected <code>refrwn()</code> in 2006.</p>
</div>
</li>
<li>
<p>Add new refraction calculations to <em>poclb.a</em> (includes references
for them and <code>refrwn()</code>)</p>
<div class="paragraph">
<p>Two additional refraction calculations are now available in the C
language <em>poclb.a</em> library:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sbend()</code>&#8201;&#8212;&#8201;from A. L. Berman and S. T. Rockwell, &#8220;A New Radio
Frequency Angular Tropospheric Refraction Model,&#8221; JPL DSN Progress
Report 42-25, pp. 142-153, November and December 1974
(<a href="https://ipnpr.jpl.nasa.gov/progress_report/42-25/25V.PDF" class="bare">https://ipnpr.jpl.nasa.gov/progress_report/42-25/25V.PDF</a>) and A. L.
Berman, &#8220;Modification of the DSN Radio Frequency Angular Tropospheric
Refraction Model,&#8221; JPL DSN Progress Report 42-38, pp. 184-186,
January and February 1977
(<a href="https://tmo.jpl.nasa.gov/progress_report2/42-38/38V.PDF" class="bare">https://tmo.jpl.nasa.gov/progress_report2/42-38/38V.PDF</a>).</p>
</li>
<li>
<p><code>lanyi()</code>&#8201;&#8212;&#8201;from G. Lanyi, &#8220;Atmospheric Refraction Corrections to
Antenna Pointing at 1 Millidegree Level,&#8221; JPL IOM 335.3-89-026, 24
March 1989, with corrections, and T. D. Moyer, &#8220;Formulation for
Observed and Computed Values of Deep Space Network Data Types for
Navigation,&#8221; Section 9.3.2.2.1 (pp. 295-297), John Wiley, 2003
(<a href="https://descanso.jpl.nasa.gov/monograph/series2/Descanso2_S09.pdf" class="bare">https://descanso.jpl.nasa.gov/monograph/series2/Descanso2_S09.pdf</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Change <code>onoff</code> and <code>holog</code> to use <code>refrwn()</code> in place of
(incorrect) <code>refrw()</code>.</p>
<div class="paragraph">
<p>This should not be a significant effect above 5° elevation. Refraction
is only applied to estimate an approximate value of the antenna
elevation; great accuracy is not required. In any event, fixed values
are used for the meteorological parameters, which limits the accuracy.
For <code>fivept</code>, the FORTRAN <code>refr()</code> function is used, which also has
fixed meteorological parameters.</p>
</div>
</li>
<li>
<p>Locate references for <code>refrwn()</code></p>
<div class="paragraph">
<p>The older <code>refrwn()</code> is apparently from W. R. Iliff and J.  M. Holt,
&#8220;Use of Surface Refractivity in the Empirical Prediction of Total
Atmosphere Refractions,&#8221; J. Research NBS 67D (Radio Prop.), No.  1,
pp. 31-35, January-February, 1963
(<a href="https://www.semanticscholar.org/paper/Use-of-surface-refractivity-in-the-empirical-of-Iliff-Holt/1ddcd0e4e672dd890198539361c5237c033001f7" class="bare">https://www.semanticscholar.org/paper/Use-of-surface-refractivity-in-the-empirical-of-Iliff-Holt/1ddcd0e4e672dd890198539361c5237c033001f7</a>)
and C. A. Clark, &#8220;Haystack Pointing System: Radar Coordinate
Correction,&#8221; MIT LL Technical Note 1966-56, 24 October 1966
(<a href="https://www.semanticscholar.org/paper/HAYSTACK-POINTING-SYSTEM%3A-RADAR-COORDINATE-Clark/bf564e4ebc49a4ae8d69333b267a97cc320109a0" class="bare">https://www.semanticscholar.org/paper/HAYSTACK-POINTING-SYSTEM%3A-RADAR-COORDINATE-Clark/bf564e4ebc49a4ae8d69333b267a97cc320109a0</a>).</p>
</div>
<div class="paragraph">
<p>Thanks to Ludwig Schwardt (SKA, South Africa) for tracking down these
references.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Increase buffer size for recovering a deleted log</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>If there is no file with the name of the current log (it has been
deleted or renamed) when a user command would close it, the FS will
attempt to recover the file and give it its original name. The buffer
used to recopy the file was increased to 2 Mib (512 sectors) so it is
faster, particularly for very large experiment logs with multicast
data.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The recovery will not work if in the meantime a file has
been created with the same name. The FS will think that is the log and
give up. In that case, The log file contents will be lost. Using
<code>log=<em>name</em></code> or <code>schedule=<em>name</em></code> will not cause this.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As part of this change, the variables for handling file sizes and
positions in the recovery function, <em>ddout/recover_log.c</em>,  were
changed to be <code>off_t</code> or <code>ssize_t</code>, as appropriate. They were <code>int</code>
variables, having been changed from <code>long</code> variables by the bulk
<em>unlongify</em> before <em>10.0.0-beta1</em>, but hadn&#8217;t been changed back.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add test utilities: <em>precess</em>, <em>move</em>, and <em>refrac</em></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>This utilities are available in sub-directories in <em>misc/</em> with the
names of the programs. They are intended for testing and
experimentation.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The <em>precess</em> program can be used to precess mean coordinates
between epochs B1950 and J2000. Two options approaches are available:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The method used by the FS in <em>fslb/prefr.f</em>. This is the same
method used by <em>drudg</em> (which has its own copy of <em>prefr.f</em>).</p>
</li>
<li>
<p>The method provided by the SOFA library.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>See the <em>README.txt</em> file in the directory for more information.</p>
</div>
</li>
<li>
<p>The <em>move</em> program can be used to calculate apparent coordinates of
date and apparent topocentric coordinates of date.</p>
<div class="paragraph">
<p>This uses the same method as the FS <code>source=&#8230;&#8203;</code> command.</p>
</div>
<div class="paragraph">
<p>See the <em>README.txt</em> file in the directory for more information,</p>
</div>
</li>
<li>
<p>The <em>refrac</em> program can be used to compare different refraction
algorithms at different elevations and under different meteorological
conditions.</p>
<div class="paragraph">
<p>This is program has a set of comparisons hard-coded, but could be
modified to test other situations.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Prevent <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span> from causing the FS to abort when the
display server is not in use and other cleanup of signal handling</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Remove redundant ignoring of signals in <em>ddout</em> and <em>oprin</em>
(partially closing <a href="https://github.com/nvi-inc/fs/issues/100">#100</a>).</p>
</li>
<li>
<p>Re-enable suppression of signals (partially closing
<a href="https://github.com/nvi-inc/fs/issues/100">#100</a>).</p>
<div class="paragraph">
<p>As of <em>10.0.0-beta1</em>, the previous practice of disabling receipt of
certain signals, in particular <code>SIGINT</code> (for <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>) had been
removed. It has been reinstated. When the FS is run without the
display server, this assures that no FS programs will be aborted if a
<span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span> is accidentally entered in the terminal session where
the FS is running. However, this does not prevent a <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>
from killing an <em>xterm</em> that is wrapped around a FS program (typically
only <em>oprin</em>) in the FS terminal session from being killed.
Preventing that is discussed next.</p>
</div>
</li>
<li>
<p>Use <code>setsid()</code> to shelter <em>xterm</em>s from keyboard generated
<span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>.</p>
<div class="paragraph">
<p>To prevent <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span> killing an <em>xterm</em> in the FS terminal
session all <code>x</code> programs in <em>fspgm.ctl</em> (just <em>oprin</em>) and <em>stpgm.ctl</em>
are now run under <code>setsid()</code> when the display server is not being
used. This disconnects the programs from the terminal session that the
FS is being run in, thereby preventing a <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span> from reaching
them, but not otherwise affecting them.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If you have been using <em>setsid</em> in your <em>stpgm.ctl</em>,
possibly to insulate <em>xterm</em>s from <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>, you should
remove it. If it is used on an <code>x</code> line in the file, it will prevent
the FS from starting successfully when the display server is not in
use and is not needed when the server is in use.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>With these changes, it should no longer be possible to kill the FS
with a <span class="keyseq"><kbd>Control</kbd>+<kbd>C</kbd></span>, even when the display server is not being
used.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
An FS <em>xterm</em> window can still be terminated abnormally using
the decorations for the window. When the FS is not being running with
the display server, this will kill the FS <em>abnormally</em>. The decoration
button that includes the <code>Delete</code> and <code>Destroy</code> options can be removed
if desired. In the <em>~/.fvm2rc</em> file include <code>NoButton 1</code> in the
window&#8217;s <code>Style</code> (see the <code>Style "oprin" &#8230;&#8203;</code> line in
<em>st.default/oper/.fvwm2rc</em> for an example).
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The FS, run without the display server, can still be
terminated <em>abnormally</em> by using the <em>kill</em> command to send a <code>SIGINT</code>
(<code>2</code>) or <code>SIGKILL</code> (<code>9</code>) signal to an <em>xterm</em> run by the FS.
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
<li>
<p>Record <em>fsserver</em> error messages (closing
<a href="https://github.com/nvi-inc/fs/issues/105">#105</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The display server now makes a file with a name of the form
<em>~/fsserver.&lt;time-stamp&gt;.err</em> each time it is started. It is used to
collect server error information. The file will be deleted if
<em>fsserver</em> terminates normally. If you experience a server crash,
please send this file to Ed or post it as part of an issue on
<em>github</em>. The <em>&lt;time-stamp&gt;</em> portion of the name will correspond to
the time when the server was last started before the crash. That is
usually when the FS was first started after the last boot. Any file of
this type with non-empty contents is worth reporting.</p>
</div>
<div class="paragraph">
<p>Thanks to Dave Horsley (Hobart) for suggesting this and contributing
to the implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The FS also makes a file with a name of the form
<em>~/fs.&lt;time-stamp&gt;.err</em> each time it is started. It is used to collect
FS error information. The FS will attempt to delete this file if it
terminates normally. If you experience a FS crash, please send this
file to Ed or post it as part of an issue on <em>github</em>. The
<em>&lt;time-stamp&gt;</em> portion of the name will correspond to the time when
the FS was last started before the crash.
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
<li>
<p>Add explanatory comments to the example <em>flux.ctl</em> control file (closing
<a href="https://github.com/nvi-inc/fs/issues/121">#121</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Although the data used in the file came from other sources, for many
years the code that read the <em>flux.ctl</em> file was the complete
documentation for the format. The example file in
<em>/usr2/fs/st.default/control/</em> now includes the details in an easier
to read form. You can merge these comments, which are at the end of
the example file, into your local copy or refer to the example.</p>
</div>
<div class="paragraph">
<p>Thanks to Stuart Weston (Warkworth) for suggesting this and
contributing some of the information in the comments.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve error messages when reading <em>flux.ctl</em> (closing
<a href="https://github.com/nvi-inc/fs/issues/124">#124</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The error messages when reading <em>flux.ctl</em> were confusing and
uninformative. This has been the situation since the file was first
added in October 2002, for version <em>9.5.15</em> (commit <code>1b68b90f</code>).
Apparently, this was not a significant issue because, apparently,
modifying the default contents was uncommon. If you have been having
trouble with this, we apologize.</p>
</div>
<div class="paragraph">
<p>The error messages have been more explicit about the cause of any read
error and the offending line is printed to aid in correcting the
problem.</p>
</div>
<div class="paragraph">
<p>Thanks to Stuart Weston (Warkworth) for reporting this.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve error messages when reading <em>.rxg</em> files</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Make error messages more informative (closing
<a href="https://github.com/nvi-inc/fs/issues/83">#83</a>).</p>
<div class="paragraph">
<p>The error messages when reading <em>.rxg</em> files were confusing and
uninformative. This has been the situation since <em>.rxg</em> files were
first added in October 2002, for version <em>9.5.15</em> (commit <code>1b68b90f</code>).
Apparently, this was not a significant issue because <em>.rxg</em> files were
usually updated by <em>gnplt</em>, which wrote correctly formatted lines. If
you have been having trouble with this, we apologize.</p>
</div>
<div class="paragraph">
<p>The error messages have been more explicit about the cause of any read
error. Unfortunately, it is not possible to show the offending line
without more significant changes. However, the messages are fairly
explicit about where the error occurred.</p>
</div>
<div class="paragraph">
<p>The same reading routine is used in <em>gnplt</em> (which uses <em>gndat</em> to
read the <em>.rxg</em> files) for consistency. Unfortunately, the error
messages for <em>gnplt</em> will still not be as informative, but restarting
the FS should provide a more explicit error message that help make it
clear what the problem is. If it is not possible to use the FS for
this, another strategy is to use the error number reported in status
line at the bottom of <em>gnplt</em> to identify the corresponding <code>RG</code> error
in <em>/usr2/fs/control/fserr.ctl</em>.</p>
</div>
</li>
<li>
<p><a id="additional_rxg_errors"></a><a href="#additional_rxg_errors">Additional .rxg
file errors</a>: Report five additional errors in <em>.rxg</em> files (closing
<a href="https://github.com/nvi-inc/fs/issues/134">#134</a>):</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The third field on the LO line is missing for type <code>range</code>.</p>
</li>
<li>
<p>If a third field exists on the LO line, but does not decode as a
number.</p>
</li>
<li>
<p>The second field on the FWHM line is missing for type <code>constant</code>.</p>
</li>
<li>
<p>If a second field exists on the FWHM line, but does not decode as a
number.</p>
</li>
<li>
<p>A field exists after the gain curve coefficients, but is not
<code>opacity_corrected</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>While it is unlikely, if any of your <em>.rxg</em> files have these errors,
they will be reported the first time you run the FS after the update.
You can correct them at that time. The error messages should identify
the problem clearly enough.</p>
</div>
<div class="paragraph">
<p>A few other, minor, errors are still not being caught. In particular,
if a character that cannot be part of a numeric field appears
<em>within</em>, or at the end of, a numeric field, that error will not be
reported. In that case, the field up to the out-of-place character will
be used as the value. Hopefully this is an unlikely error. A leading
character that cannot be part of a numeric field will be reported as
an error.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Remove extra comma in T<sub>cal</sub>(K) table log entires (closing
<a href="https://github.com/nvi-inc/fs/issues/160">#160</a>)</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The contents of the <em>.rxg</em> selected by an <code>lo=&#8230;&#8203;</code> command are logged
the first time the file is selected since the log was last opened.
There was a redundant comma in the T<sub>cal</sub>(K) table log entries after
the <em>.rxg</em> file name.</p>
</div>
</div>
</details>
</li>
<li>
<p>Improve web documents</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Improve font conventions.</p>
<div class="paragraph">
<p>These conventions are covered in the
<a href="../../../misc/font_conventions.html">FS Document Font Conventions</a>
document. The following descriptions refer to sections in that
document. The conventions themselves are covered in the
<a href="../../../misc/font_conventions.html#_conventions">Conventions</a>
subsection. Examples are in the
<a href="../../../misc/font_conventions.html#_source_examples">Source
examples</a> section.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Add description of using inline anchors.</p>
<div class="paragraph">
<p>These can be used to make linking references to arbitrary text in
the documents. This convention is covered as &#8220;other anchors&#8221; in the
<a href="../../../misc/font_conventions.html#_links">Links</a> subsection.
The document also shows how to make the anchor visible in
the text. This is described in the example
<a href="../../../misc/font_conventions.html#_linking_to_inline_anchors">Linking
to inline anchors</a> subsection.</p>
</div>
</li>
<li>
<p>Improve description of code blocks.</p>
<div class="paragraph">
<p>Add use of bold for user input and bold italic for replaceable user
input. This convention is described in the
<a href="../../../misc/font_conventions.html#_code_blocks">Code blocks</a>
subsection.  The example is covered in the subsection
<a href="../../../misc/font_conventions.html#_italics_and_bold_in_code_blocks">Italics
and bold in code blocks</a>.</p>
</div>
</li>
<li>
<p>Add description for using appendices.</p>
<div class="paragraph">
<p>This convention is covered in the
<a href="../../../misc/font_conventions.html#_links">Links</a> subsection. The
example is covered in the subsection
<a href="../../../misc/font_conventions.html#_appendices">Appendices</a>.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Improve wording for setting geometry values in <em>~/.Xresources</em>.</p>
<div class="paragraph">
<p>Using differently named <em>~/.Xresources</em> files that are used by
different aliases for different displays is described in the final
<strong>NOTE</strong> of the
<a href="../../misc/install_reference.html#_setting_geometry_values_in_xresources">Setting
geometry values in .Xresources</a> section of the
<a href="../../misc/install_reference.html">Installation Reference</a>
document.</p>
</div>
</li>
<li>
<p>Change cut-and-paste phrasing in documents to copy-and-paste</p>
<div class="paragraph">
<p>This is technically more accurate. The change primarily affects the
(now)
<a href="../../misc/install_reference.html#_copy_and_paste_installation_tips">Copy-and-paste
installation tips</a> in the
<a href="../../misc/install_reference.html">Installation Reference</a> document
and references to it.</p>
</div>
</li>
<li>
<p>Improve presentation of FS and <em>drudg</em> change lists in the update notes</p>
<div class="paragraph">
<p>In the update notes for FS <em>10.1.0</em> (this document) the list of FS and
<em>drudg</em> changes now show a summary line and a <em>toggle</em> to open a more
detailed description. This should make the list of changes easier to
review while allowing a reader to view more details for items they
find interesting. We hope this will make the update notes easier to
read.</p>
</div>
<div class="paragraph">
<p>There are some downsides, primarily:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is extra white space when a toggle is closed.</p>
</li>
<li>
<p>If you return &#8220;back&#8221; to the document after following a link to a
<em>different</em> document, previously opened toggles will be closed because
the web page has been reloaded. This makes it a little more difficult
to return to where you were reading in the original document if it was
within opened text.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is a consensus that this is overall an improvement, its use
will continue for future updates.</p>
</div>
</li>
<li>
<p>Add explanation of setting environment variables.</p>
<div class="paragraph">
<p>Section
<a href="../../../misc/env_vars.html#_setting_environment_variables">Setting environment variables</a>
was added to the
<a href="../../../misc/env_vars.html">FS environment variables</a>
document.</p>
</div>
<div class="paragraph">
<p>The preamble of the
<a href="../../../misc/env_vars.html#_runtime_variables">Runtime variables</a>
section in the same document was expanded to include the additional
steps needed to update environment variables when using the display
server.</p>
</div>
</li>
<li>
<p>Make numerous wording fixes.</p>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Update example <code>station</code> procedure libraries</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The example libraries can be found in <em>/usr2/fs/st.default/proc</em>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add standard procedures for (rack/recorder): DBBC/Mark 5C,
DBBC/Flexbuff, DBBC3/FlexBuff.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. New example station.prc libraries</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Equipment - Rack/Drive1/Drive2</th>
<th class="tableblock halign-left valign-top">Prefix letters</th>
<th class="tableblock halign-left valign-top">Example <code>station</code> Library</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbbc/mk5c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d5c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>d5cstation.prc</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbbc/flexbuff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dfb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dfbstation.prc</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbbc3/flexbuff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d3fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>d3fbstation.prc</em></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Add <code>check_ntp</code> procedure.</p>
<div class="paragraph">
<p>An example <code>check_ntp</code> procedure is provided in <em>check_ntp.prc</em>. It is
slightly improved from the original version. It has also been
incorporated into the example <code>station</code> libraries for the current most
commonly used rack/recorder combinations: DBBC/Mark5B, DBBC/FlexBuff,
DBBC/March 5C, DBBC3/Flexbuf, and VLBA5/Mark 5B. Please see the table
in the
<a href="../../misc/install_reference.html#_example_standard_procedure_libraries">Example standard procedure libraries</a> section of the
<a href="../../misc/install_reference.html">Installation Reference</a> document
to identify which files are for which combinations.</p>
</div>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Add other miscellaneous fixes</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Generalize the <code>bbcgain</code> command read back to handle DBBC3s.</p>
</li>
<li>
<p>Allow <code>0</code> for DBBC3 BBC frequencies.</p>
</li>
<li>
<p>Add the missing <code>bbc110</code> command for DBBC3.</p>
</li>
<li>
<p>Add useful default IF sources for DBBC3 <code>bbc<em>nnn</em></code> commands, when
<code><em>nnn</em></code> is <code>064</code> or larger.</p>
</li>
<li>
<p>Add <code>0</code> MHz BW for display of DBBC3 BBCs that are not configured.</p>
</li>
<li>
<p>Add the missing <code>formbbc</code> and <code>formif</code> detector groups in <code>onoff</code>
for DBBC3 racks.</p>
<div class="paragraph">
<p>Before the current release there was no way to know which BBCs or IFs
were being recorded to implement these groups. Now that the
<code>core3h_mode</code> command is implemented, it is possible.</p>
</div>
</li>
<li>
<p>Add missing <code>64</code> MHz BW for <code>fivept</code> and <code>onoff</code> with DBBC BBCs.</p>
</li>
<li>
<p>Fix a bug that caused DBBC3 BBC frequencies to be ignored when
calculating T<sub>cal</sub>(K) and frequency dependent FWHM.</p>
<div class="paragraph">
<p>For T<sub>cal</sub>(K), this generated incorrect values, which impacted T<sub>sys</sub>
values by a proportional amount. The incorrect values were for a
frequency in the band or nearby, so typically not entirely
unreasonable.</p>
</div>
<div class="paragraph">
<p>Since T<sub>sys</sub> calculated by the FS is only a station diagnostic, this
had limited impact. Before the current release with DBBC3&#8217;s, T<sub>sys</sub> could
effectively only be calculated in <code>fivept</code> and <code>onoff</code> and to spot
check T<sub>sys</sub> outside of schedule execution. Pointing offsets (from
<code>fivept</code>) and SEFDs/T<sub>cal</sub>(J)s (from <code>onoff</code>) were not affected. The
T<sub>cal</sub>(K) values were probably adequate for verifying consistency of
station performance with T<sub>sys</sub> spot checks, if they were used at all.</p>
</div>
<div class="paragraph">
<p>For frequency dependent FWHM, this should have been an insignificant
error in most cases.</p>
</div>
</li>
<li>
<p>Fix the RDBE monitor display (<em>monit6</em>) to use the <code>time_t</code> type
when calculating the nominal VDIF epoch.</p>
<div class="paragraph">
<p>The <code>mout6()</code> function was using an <code>int</code> to hold the time instead of
a <code>time_t</code>, resulting in incorrect values for the nominal VDIF epoch
on 64-bit systems. This had very limited impact. The nominal VDIF
epoch was only used to apply inverse video to epochs that weren&#8217;t
nominal, if <em>all</em> RDBEs had different epochs, a rather unlikely case.
If it occurred, all the VDIF epochs would have been shown in inverse
video as &#8220;wrong,&#8221; which would have been &#8220;incorrect&#8221; for at most
one epoch. This has been fixed.</p>
</div>
<div class="paragraph">
<p>The error was introduced by the bulk <em>unlongify</em> for conversion to the
32/64-bit compatibility for version <em>10.0.0</em>. It only would have
impacted 64-bit systems.</p>
</div>
</li>
<li>
<p>Correct RDBE VDIF epoch increment command hint line in <em>fmset</em>.</p>
<div class="paragraph">
<p>The VDIF epoch increment command (<code>&gt;</code>) hint line, which only appears
if the RDBE&#8217;s VDIF is before the current epoch, was displayed twice.
Additionally, if it became no longer useful, it was not removed. In
the version <em>9.12.13</em>, the hint lines dynamically adjusted depending
on whether an increment was possible. This behavior was not correctly
preserved in the merge of versions <em>9.13.2</em> (old &#8220;main&#8221;) branch and
<em>9.12.13</em> (old &#8220;vgos&#8221; branch). The fixed version uses statically
placed hints lines for simplicity, only showing the  VDIF epoch
increment line when it could be useful.</p>
</div>
</li>
<li>
<p>Prevent decimation from being specified for 5B/Ethernet in the
<code>mk5c_mode</code> (and <code>fb_mode</code>) command.</p>
<div class="paragraph">
<p>Previously, it was possible to set the 5B/Ethernet sample rate via the
<em>decimation</em> parameter  in the <code>mk5c_mode</code> (and <code>fb_mode</code>) command.
This was a vestige of the <code>mk5b_mode</code> command. The Ethernet recorders
(Mark 5C and FlexBuff, controlled by <em>jive5ab</em>) do not support
decimation. The <em>sample</em> parameter of the <code>mk5c_mode</code> (and <code>fb_mode</code>)
command provides full functionally for specifying the sample rate for
5B/Ethernet and VDIF recording and is the method used by <em>drudg</em>.</p>
</div>
</li>
<li>
<p>Improve sample rate reporting for query responses of commands
<code>fila10g_mode</code>, <code>mk5b_mode</code>, and <code>mk5c_mode</code>/<code>fb_mode</code>.</p>
<div class="paragraph">
<p>None of the devices these commands query report the sample rate. For
<code>fila10g_mode</code> and <code>mk5b_mode</code>, the sample rate <em>implied</em> by the
device decimation response is shown in parentheses. Previously, they
reported the <em>commanded</em> rate in parentheses.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <em>core3h_mode</em> command follows the same improved convention.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For <code>mk5c_mode</code>/<code>fb_mode</code>, the devices also don&#8217;t report the
decimation, so the <em>commanded</em> sample rate is shown in <em>double</em>
parentheses. The device does report the track bit rate, which can be
used for comparison, but this is reported in bits per second instead
of Ms/s.</p>
</div>
</li>
<li>
<p>Update the value of π in the FS copy of <em>prefr.f</em> to agree with the
current value in <em>drudg</em>.</p>
<div class="paragraph">
<p>In FS <em>9.7.0</em>, July 2004, commit <code>acde80ba2</code> the value if π used by
<em>skdrut/prefr.f</em> was updated with a value with more digits. The
current change catches <em>fslb/pref.f</em> up with that previous change.</p>
</div>
<div class="paragraph">
<p>This increased digits changes the value of π by somewhat less than 3
parts in 10<sup>-11</sup>, which should be insignificant. This marginally
improves the consistency of FS precession rotations between B1950 and
J2000 with those in <em>drudg</em>.</p>
</div>
</li>
<li>
<p>Eliminate extraneous <code>(<em>xx</em>)</code> strings in error messages.</p>
<div class="paragraph">
<p>Some error messages were displayed/logged with extraneous <code>(<em>xx</em>)</code>
strings after the error number. This came about because a change was
made (in commit <code>9e9906d9</code> for version <em>9.12.2</em> released in March of
2016), to report the so-called <code>LWHAT</code> two character Hollerith values
(or up to four character representation of numbers) for an error even
if there was no <code>?W</code> (or `?WWW) string in the message to be replaced
with the value.  The principle being that it was more important to
report the information to help solve a problem than to adhere to
incorrect formatting of the error message.</p>
</div>
<div class="paragraph">
<p>This did not seem to cause much of a problem. However, some programs,
in particular <em>aquir</em>, <em>fivpt</em>, <em>onoff</em>, were incorrectly setting the
<code>LWHAT</code> value.  Other programs, in particular <em>mk5cn</em>, <em>dbbcn</em>, and
<em>rdbcn</em>, were carelessly setting the <code>LWHAT</code> value when there was no
error. The latter problem caused extraneous strings in error messages
from unrelated commands. We believe all cases of this have been fixed.
If you see any now, please report them.</p>
</div>
</li>
<li>
<p>Allow less white space for numeric <code>LWHAT</code> values in error
messages.</p>
<div class="paragraph">
<p>Previously, if an error message had a runtime determined numeric
value, there had to be a four character <code>?WWWW</code> placeholder in the
error message for it to replace to avoid overwriting. This was changed
to allow shorter placeholders, down to <code>?W</code>, to be used. A <code>?W</code> can be
used to show a one digit number with one space in front of it. To do
this, the <code>?W</code> must be directly appended to the previous word in the
message, for example <code>word?W</code>, which may be a little hard to read in
the <em>fserr.ctl</em> or <em>sterr.ctl</em> file.</p>
</div>
</li>
<li>
<p>Corrected `error number for reporting trouble opening <em>time.ctl</em>.</p>
</li>
<li>
<p>Correct erroneous Ethernet transaction error messages</p>
<div class="paragraph">
<p>Previously, the message for reporting errors when sending data to the
Ethernet devices (Mark 5s, DBBCs, RDBEs, Mark 6s), incorrectly stated
that the connection was closed. The connection is not closed. Perhaps
it should be, but the incorrect statements have been removed until the
functionality is changed.  The affected errors are:
<code>DB</code>/<code>M5</code>/<code>M6</code>/<code>RA</code> <code>-102</code>.</p>
</div>
</li>
<li>
<p>Correct <code>bbc_gain</code> command error codes</p>
<div class="paragraph">
<p>If an error occurred in the monitor form of the command, the error was
reported as <code>di</code> instead of <code>dg</code>.</p>
</div>
</li>
<li>
<p>Add instructions to the example <em>.xsession</em> files for how to
make them work correctly when <em>tcsh</em> is the login shell</p>
<div class="paragraph">
<p>Instructions for implementing this were added to the
<a href="../0/10.0.0.html">FS 10.0.0 Update Notes</a> document as the
<a href="../0/10.0.0.html#xsession">Updating ~/.xsession</a> sub-step in the
<a href="../0/10.0.0.html#_miscellaneous_fslx_changes">Miscellaneous FSLx
changes</a> step.</p>
</div>
</li>
<li>
<p>Improve default <em>.fvwm2rc</em> files</p>
<div class="paragraph">
<p>The <em>.fvwm2rc</em> files in the <em>auid</em>, <em>oper</em>, and <em>prog</em> sub-directories
of <em>/usr2/fs/st.default</em> were updated. These changes  only affect
behavior on the console GUI.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Add use of <code>NeverFocus</code> for the <code>scnch</code> and <code>erchk</code> windows.</p>
<div class="paragraph">
<p>This was previously added in <em>10.0.0-beta1</em>, but removed on <em>10.0.0</em>
because it was thought to prevent scrolling of those windows. However,
that turned out to not be the case. Using this setting prevents the
focus from accidentally being given to these windows, which don&#8217;t
accept input.</p>
</div>
</li>
<li>
<p>Improve consistency of hot key definitions.</p>
<div class="paragraph">
<p>Previously the handling of <em>msg</em>, <em>rdbemsg</em>, <em>monpcal</em>, and <em>monit6</em>
were not consistent. Now the default configuration is for
<span class="keyseq"><kbd>Control</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd></span> to open <em>msg</em> and <span class="keyseq"><kbd>Control</kbd>+<kbd>Shift</kbd>+<kbd>6</kbd></span> to open
<em>monpcal</em> and for these programs to be displayed in the <code>Button 2</code>
menu. Immediately below the configuration lines for these programs are
commented out lines for <em>rdbemsg</em> and <em>monit6</em>, which can be used
instead by sites with RDBEs.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Don&#8217;t read the <em>rdbe.ctl</em> control file, or log its contents, unless
the rack type is RDBE.</p>
</li>
<li>
<p>Correct error in FORTRAN calls to get FiLa10G time for <em>setcl</em></p>
<div class="paragraph">
<p>An argument was missing. This was a bug from the VGOS branch, which
technically do not support using <em>setcl</em> for FiLa10G. The bug
apparently did not affect versions since the merge since there was a
relatively low, not quite 1 in 2<sup>32</sup> chance of it being excited.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>setcl</em> only works for the first FiLa10G if there are two. A
second is only used for VGOS. <em>fmset</em> works for both.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>When sending a target level for the DBBC3 IFs, always send <code>1</code> for
the filter selection, and ignore the filter selection on read back.</p>
<div class="paragraph">
<p>Currently, this parameter is used in the syntax for the device, but is
meaningless.</p>
</div>
</li>
<li>
<p>Fix <code>tpicd</code> to only use direct sampling DBBC3 of side-bands that are
recorded instead of all of them.</p>
<div class="paragraph">
<p>Before the current release, there was no way to know what channels
were being recorded. Additionally, direct sampling was too slow to be
useful. Only recorded channels would be sampled now, but direct
sampling is no longer supported in favor of multicast.</p>
</div>
</li>
<li>
<p>Reorganize and cleanup the <code>help</code> file for <code>onoff</code>.</p>
</li>
<li>
<p>Improve the description of the decimation parameter in the <code>help</code>
files for <code>fila10g_mode</code> and  <code>mk5b_mode</code>/<code>mk5c_mode</code>/<code>fb_mode</code>.</p>
</li>
<li>
<p>Add missing <code>32</code> and <code>64</code> MHz BWs in <code>help</code> for DBBC <code>bbc<em>nn</em></code>
commands.</p>
</li>
<li>
<p>Add missing <code>help</code> page for <code>jive5ab</code> command.</p>
</li>
<li>
<p>Fix <code>mk5_status</code> command to get its command name for logging from
the parsed command line instead of being hard-coded.</p>
<div class="paragraph">
<p>This is the normal structure of SNAP commands, which <code>mk5_status</code> did
not have. It enables only updating <em>control/fscmd.ctl</em> to either
change the name or create a synonym. Fixing this was necessary in
order to make the <code>fb_status</code> synonym work correctly.</p>
</div>
</li>
<li>
<p>Remove <code>e</code> rack type in <code>help</code> files.</p>
<div class="paragraph">
<p><code>help</code> for the <code>pcald</code> and <code>tpicd</code> commands now works for all systems.</p>
</div>
</li>
<li>
<p>Correct a few compile warnings, but certainly not a significant number.</p>
</li>
</ol>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_drudg_changes">3.2. drudg changes</h3>
<div class="paragraph">
<p><em>drudg</em> opening message date is 2022-02-10.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add support for DBBC3 DDC racks</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p><em>drudg</em> will handle VEX schedules, <em>.vex</em>, with up to 256 channels
(128 BBCs) and eight IFs. It will handle Mark IV schedules, <em>.skd</em>,
with up to 32 channels (16 BBCs, <code>001</code>-<code>016</code>) and up to two IFs (<code>a</code>
and <code>b</code>). In all cases, the number of channels per IF must be a power
of two.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>At this time it is only considered safe to set the configuration of
then Core3H boards with the DBBC3 boot configuration file. As a result
the <em>drudg</em> generated setup procedures only <em>check</em> the configuration
of the Core3H boards. Once it is possible to set the Core3H boards
remotely. The setup procedure can be run with <code>force</code> as its argument
set the configuration manually. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>setup01=force</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>A full check (or setup) of the Core3H boards will take longer than
schedules allow for setup procedures to execute. As a result, it is
strongly recommended that the new <code>use_setup_proc</code> <em>drudg</em> option in
<em>skedf.ctl</em> (see <a href="#use_setup_proc">use_setup_proc</a> below) be enabled
for use with DBBC3s. This will cause the mode to be checked only at
the start of the schedule. If the schedule is started at least a few
minutes ahead of time, there should be no delays in schedule
execution due to the setup procedure.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
<li>
<p>Replace use of all <code>mk5&#8230;&#8203;</code> commands with <code>fb_&#8230;&#8203;</code> commands in
generated procedures when the selected recorder is FlexBuff</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>The following substitutions are made:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fb</code> for <code>mk5</code></p>
</li>
<li>
<p><code>fb_mode</code> for <code>mk5c_mode</code></p>
</li>
<li>
<p><code>fb_status</code> for <code>mk5_status</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As a general rule, <em>drudg</em> will use the <code>fb</code> versions of <code>mk5</code>
commands and procedures when the selected recorder is FlexBuff. The
procedures are discussed in next two items below.
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
<li>
<p>Replace use of the <code>checkmk5</code> procedure with <code>checkfb</code> in <em>.snp</em>
files when the selected recorder is FlexBuff</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>This change was made for naming consistency, but also because the
typically the contents of these procedures are  different.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add <code>mk5c_config</code> or <code>fb_config</code> procedure calls to setup
procedures for Mark 5C and Flexbuff recorders, respectively</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>These procedures can be used to override the default configuration of
Mark 5C and FlexBuff recorders. They are called after the <code>mk5c_mode</code>
or <code>fb_mode</code> commands (and after the <code>thread&#8230;&#8203;</code> procedure if
present). They are local procedures intended to provide tuning for the
recorder configuration.</p>
</div>
<div class="paragraph">
<p>For more information see the
<a href="dbbc3_ops.html#_mk5c_configfb_config_procedure">mk5c_config/fb_config
procedure</a> subsection of the <a href="dbbc3_ops.html">FS DBBC3
Operations Manual</a>.</p>
</div>
</div>
</details>
</li>
<li>
<p>Add, optionally, <code>thread&#8230;&#8203;</code> procedures to setup procedures
for Mark 5C and FlexBuff recorders</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>This procedure controls whether VDIF data is recorded multithreaded or
single thread per file. Its use is described in
<a href="dbbc3_ops.html#_thread_procedure">Thread procedure</a> subsection of
the <a href="dbbc3_ops.html">FS DBBC3 Operations Manual</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Although it is expected that only one thread selection will be
used for an entire experiment, a separate <code>thread&#8230;&#8203;</code> procedure is
created for each mode. This allows them to be customized by mode if
that should prove useful.
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
<li>
<p>Enhancements to summary listings, option <code>5</code></p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The <code>GB</code> positions and totals are now also listed when the recorder
is <code>none</code> (closing <a href="https://github.com/nvi-inc/fs/issues/166">#166</a>).</p>
</li>
<li>
<p>The <code>GB</code> fields were expanded to allow for larger data volumes.</p>
</li>
<li>
<p>The <code>Info</code> column and the captions in the header describing it were
cleaned-up.</p>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Changes to <em>skedf.ctl</em> options</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Please see the <em>/usr2/fs/st.default/control/skedf.ctl</em> for details
about the use of these options.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add <code>e-vlbi_override</code> option</p>
<div class="paragraph">
<p>If enabled and if the <code>target_correlator</code> parameter in a VEX schedule
includes the string <code>e-vlbi</code> (case insensitive), <em>drudg</em> will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>automatically convert the recorder to <code>none</code></p>
</li>
<li>
<p>for racks type that include a FiLal0G, the <code>/fila10g</code> will be
removed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The equipment selection can subsequently be changed with <em>drudg</em>
option <code>11</code>.</p>
</div>
</li>
<li>
<p>Add <code>scan_close</code> option</p>
<div class="paragraph">
<p>If enabled, <em>drudg</em> will detect gaps in the schedule at least as long
as a user settable <code>max_gap_time</code>, say an hour, and wait to start the
next scan a user settable <code>pre_time</code> time before it is scheduled. The
<code>pre_time</code> should probably be short, but at least as long as the worst
case slewing time of the antenna. The concept is that the scan at the
start of gap is <em>closed</em>, i.e., <code>check&#8230;&#8203;</code> procedure is run before
slewing to the next source. Then there is a wait until the <code>pre_time</code>
before the next scan will begin for the <code>scan_name=&#8230;&#8203;</code> and
<code>source=&#8230;&#8203;</code> to be commanded.</p>
</div>
<div class="paragraph">
<p>This can be useful for intensive schedules. The antenna won&#8217;t slew
needlessly to a new source or setup for new scan at the start of the
gap. The schedule can be broken into while it is waiting for the next
scan to start, the intensive schedule run, and then the original
schedule rejoined for the next scan.</p>
</div>
</li>
<li>
<p><a href="#use_setup_proc">use_setup_proc</a><a id="use_setup_proc"></a>: Add <code>use_setup_proc</code> option</p>
<div class="paragraph">
<p>If enabled, <em>drudg</em> prefixes each setup procedure with <code>setup_proc=</code>
to invoke that command. For more information see the
<a href="dbbc3_ops.html#_minimizing_the_use_of_setup_procedures">Minimizing
the use of setup procedures</a> subsection of the <a href="dbbc3_ops.html">FS
DBBC3 Operations Manual</a>.</p>
</div>
</li>
<li>
<p>Add <code>vdif_single_thread_per_file</code> option</p>
<div class="paragraph">
<p>This option allows control of whether the VDIF files created by Mark
5C and FlexBuff recorders are multi-threaded or single threaded.</p>
</div>
<div class="paragraph">
<p>For more information see the <a href="dbbc3_ops.html#_thread_procedure">Thread
procedure</a> subsection of the <a href="dbbc3_ops.html">FS DBBC3
Operations Manual</a>.</p>
</div>
</li>
<li>
<p><a href="#fix_equipment">Fix drudg equipment options</a><a id="fix_equipment"></a>: Fix
<code>equipment</code> and <code>equipment_override</code> options in <em>skedf.ctl</em>.</p>
<div class="paragraph">
<p>These bugs apparently first appeared in version <em>10.0.0</em>.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fix a bug that prevented applying <code>equipment</code> if equipment was not
specified in the schedule and <code>equipment_override</code> was not selected.</p>
</li>
<li>
<p>Fix a bug that caused <code>equipment</code> to be applied if there was
equipment in the schedule even if <code>equipment_override</code> was not
selected.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If you used <em>equipment_override</em>, these bugs did not affect you. Since
no one reported these bugs, presumably at least one of the following
was always true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>equipment_override</code> option was selected.</p>
</li>
<li>
<p>The schedule had correct equipment.</p>
</li>
<li>
<p>The <code>equipment</code> option was selected and had correct values.</p>
</li>
<li>
<p>The equipment was adjusted with option <code>11</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The features of these options now agree with the original design,
which was:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User by itself, the values specified by <code>equipment</code> will only be
applied if there is no equipment in the schedule.</p>
</li>
<li>
<p>If <code>equipment_override</code> is also selected, the values specified by
<code>equipment</code> will be forced.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Expand <code>default_dbbc_if_inputs</code> option</p>
<div class="paragraph">
<p>Defaults for up to eight IF inputs can be specified for DBBC3s.</p>
</div>
</li>
<li>
<p>Expand <code>dbbc_if_targets</code> option</p>
<div class="paragraph">
<p>Values for up to eight IF inputs can be specified for DBBC3s.</p>
</div>
</li>
<li>
<p>Expand <code>dbbc_bbc_target</code> option to also support DBBC3s.</p>
</li>
</ol>
</div>
</div>
</details>
</li>
<li>
<p>Add other miscellaneous enhancements:</p>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Make the recorder type in <em>.vex</em> schedules case insensitive (bug fix)</p>
</li>
<li>
<p>Add missing final scan <code>checkmk6</code> call in <em>.snp</em> files for VGOS
<em>.skd</em> schedules using a Mark 6 recorder (bug fix)</p>
</li>
<li>
<p>Support slewing model acceleration in <em>.skd</em> files</p>
</li>
<li>
<p>Use ISO  format for opening message date</p>
</li>
<li>
<p>Remove trailing spaces in <em>.prc</em> files</p>
</li>
<li>
<p>Remove some obsolete variables</p>
</li>
<li>
<p>Remove obsolete <code>Makefile</code>s from the <em>vex/</em> subdirectory</p>
</li>
<li>
<p>Make various other clean-ups</p>
</li>
</ol>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cleaning_up_rxg_file_comments">Appendix A: Cleaning up .rxg file comments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As described in <a href="#stop_adding_extra_comments">Stop adding extra
comments when updating .rxg files</a> change in the <a href="#_fs_changes">FS changes</a>
sub-section above, <em>gnplt</em> has been adding extra comments, in some
cases a lot of them, to your <em>.rxg</em> files. With this update, that
behavior has been fixed. However, there may already be many extra
comments in your <em>.rxg</em> fies. This appendix provides an optional
process for cleaning up any extra comments. This cleanup is entirely
optional. If it is not performed, there will be no loss of
functionality. There will just be some extraneous comments in your
<em>.rxg</em> files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have been curating your <em>.rxg</em> files to fix the issues
with the comments, you may not want to use this process. You may still
wish to review it to see if any of it might be helpful.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The cleanup process is broken into two sequential steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_remove_extra_comments">Remove extra comments</a>&#8201;&#8212;&#8201;which makes a backup of your current
<em>.rxg</em> files and the removes all the extra comments.</p>
</li>
<li>
<p><a href="#_cleanup_trailing_comments">Cleanup trailing comments</a>&#8201;&#8212;&#8201;which uses the backup of your
<em>.rxg</em> files to produce a set of trailing comments with all redundant
comments removed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first is relatively easy to apply. It may have some benefit even
if you don&#8217;t bother with the second step, ever. The second can be
deferred until later, if you do want to apply it.</p>
</div>
<div class="sect2">
<h3 id="_remove_extra_comments">A.1. Remove extra comments</h3>
<div class="paragraph">
<p>The sub-steps here are designed to be as simple as possible when
applying the FS update this appendix is part of, but preserve the
opportunity for a full cleanup, whether it is done now or at a later
date. As <em>oper</em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="backup"></a> <a href="#backup">Make a backup of your current .rxg files</a>:</p>
<div class="paragraph">
<p>This will give you a backup to recover from in case something goes
wrong and will simplify cleaning up the trailing comments if you defer
that to a later date. Enter these commands as <em>oper</em>, using current
values for <code><em>year</em></code>, <code><em>month</em></code>, and <code><em>day</em></code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/control/rxg_files
mkdir BACKUP.<em>year</em>.<em>month</em>.<em>day</em>
cp -a *.rxg BACKUP.<em>year</em>.<em>month</em>.<em>day</em></pre>
</div>
</div>
</li>
<li>
<p>Reduce the <em>.rxg</em> files to just the active calibration.</p>
<div class="paragraph">
<p>This will remove leading comments added by <em>gnplt</em> and all trailing
comments. This will not disturb the active calibration or its
interspersed comments.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
The trailing comments may be a complicated hash unless you
have been curating them. If you have, you probably do not want to use
the <code>-c</code> option with the <em>rxgfix3</em> script below, if you use the script
at all. If you have not been curating them, it may be a laborious
process to straighten them out. Removing them now will help make that
process a little easier.
</td>
</tr>
</table>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a id="check"></a> <a href="#check">Check what changes would be made</a>:</p>
<div class="paragraph">
<p>This sub-step uses the <em>rxgfix3</em> script. Its default behavior is to
remove &#8220;extra&#8221; leading comments that <em>gnplt</em> may have added. It has
several options that may also be useful. This sub-step uses the
recommended options along with the <code>-t</code> option, which runs the script
in &#8220;test&#8221; mode to just show what changes would be made. The
recommended options are explained below. To see what changes would be
made, as <em>oper</em> enter:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/control/rxg_files
/usr2/fs/misc/rxgfix3 -cdrt *.rxg</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If the output is too large to work with, you can simplify it by
running <em>rxgfix3</em> on any subset of files, even a single file, at a
time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The meanings of the recommended options used with <em>rxgfix3</em> script
above are:</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Help text and a complete listing of available options can be
viewed with <code><strong>/usr2/fs/misc/rxgfix3&#160;-h</strong></code>.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-c</code>&#8201;&#8212;&#8201;Delete trailing comments. This will make it easier to update
your trailing comments to the correct form. You should drop this
option if you want to keep your trailing comments the way they are.</p>
</li>
<li>
<p><code>-d</code>&#8201;&#8212;&#8201;Delete existing <em>.bak</em> files before processing. If old
<em>.bak</em> files are left over from using <em>rxgfix&lt;n&gt;</em> scripts in the past,
this will delete them. If you prefer to keep them, you can rename them
before running <em>rxgfix3</em> without <code>-t</code>.</p>
</li>
<li>
<p><code>-r</code>&#8201;&#8212;&#8201;Use the date in the first <code>GnPlt2</code> leading comment to
replace the date on the date line in the active calibration. This will
not be needed if you have updated all your <em>.rxg</em> files with <em>gnplt</em>
since FS version <em>10.0.0-beta3</em>, but is benign in that case. If you
have manually changed the date line in your <em>.rxg</em> file(s) you may
prefer to use the <code>-k</code> option to keep the current date line. (Omitting
both <code>-r</code> and <code>-k</code> will cause <em>rxgfix3</em> to not process a file if the
date comment and the date line don&#8217;t agree.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If some of these changes are unacceptable, you can change the actions
by dropping some options or making changes, such as using <code>-k</code> in
place of <code>-r</code>. You can always process the files in subsets with
different options if that is needed.</p>
</div>
</li>
<li>
<p>Apply the changes:</p>
<div class="paragraph">
<p>If the changes shown in <a href="#check">Check what changes would be made</a>
sub-step above are acceptable or you have figured out how you want to
modify them, you can re-run <em>rxgfix3</em> with the options you decided on,
but without the <code>-t</code>, in order to apply them.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the &#8220;extra&#8221; comments have been removed you can decide how and
when to deal with reinstalling the trailing comments. This may be
quite involved and can be deferred until convenient. It is covered in
the next step, <a href="#_cleanup_trailing_comments">Cleanup trailing comments</a>, below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cleanup_trailing_comments">A.2. Cleanup trailing comments</h3>
<div class="paragraph">
<p>The procedure for cleaning-up the trailing comments is covered in the
<a href="#_cleanup_procedure">Cleanup procedure</a> sub-section below. After that there is an
<a href="#_explanation_of_procedure">Explanation of procedure</a> sub-section that may make what is being
done clearer and includes a small additional procedure for files that
have been updated previously by <em>gnplt1</em>. When applying these
procedures, there are a few points worth considering:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Depending on the size of your <em>.rxg</em> files, cleaning up the trailing
comments could be very laborious. Using this procedure is entirely
optional. It is provided only in case you are interested in using it.
If your trailing comments are in the form you want or if you do not
want to clean them up, you can skip this procedure. If you don&#8217;t want
to clean them up, you can either keep them in the backup you made (in
sub-step <a href="#backup">Make a backup of your current .rxg files</a> above) or
append all the trailing comments from the backups into the
corresponding <em>.rxg</em> files (the latter case would be equivalent to not
using the <code>-c</code> option in the <a href="#check">Check what changes would be
made</a> sub-step and following sub-step above). Future updates with
<em>gnplt</em> will add comments in reverse chronological order.</p>
<div class="paragraph">
<p>If you do append them and they are not in reverse chronological order,
they will not be consistent with new updates made with <em>gnplt</em>, which
will add new comments in reverse chronological order. As a result,
straightening out the trailing comments at a later date will be more
complicated. It is probably best to avoid this unless you are not
worried about the older trailing comments. Keeping the trailing
comment cleanup simpler is the reason that it is recommended to delete
the trailing comments (with <em>rxgfix3</em> option <code>-c</code>) in the
<a href="#_remove_extra_comments">Remove extra comments</a> step above. The procedure here assumes that
no new comments have been inserted in the backup copy in reverse
chronological order.</p>
</div>
</li>
<li>
<p>This approach for cleaning up the trailing comments will work
correctly if your <em>.rxg</em> files have <em>only</em> been updated with <em>gnplt</em>
and not modified otherwise. If they have been modified otherwise, the
following procedure may not work, but it may be possible to adapt it
to your situation.</p>
<div class="paragraph">
<p>If your <em>.rxg</em> files have only been updated by <em>gnplt</em>, it may be
possible to automate this step. If you would like to have a script to
implement this procedure, please mail Ed. If there is sufficient
interest, we will look into developing it.</p>
</div>
</li>
<li>
<p>The procedure makes use of the added <code>GnPlt2</code> date comment lines in
the file. Although the date encoded will typically be different, the
lines will be of the form:</p>
<div class="literalblock">
<div class="content">
<pre>* RXG file updated by GnPlt2 on 2021-4-19</pre>
</div>
</div>
<div class="paragraph">
<p>The procedure identifies particular instances of these comments and
then locates the next matching instance.</p>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_cleanup_procedure">A.2.1. Cleanup procedure</h4>
<div class="paragraph">
<p>This procedure should be applied <em>after</em> the <a href="#_remove_extra_comments">Remove extra comments</a>
step above. Using the following procedure to cleanup the trailing
comments. As <em>oper</em>, for each individual <em>.rxg</em> file:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make a temporary copy, to work on, of the backup of the file you
created in the <a href="#_remove_extra_comments">Remove extra comments</a> step above. Working with the
temporary copy will allow for easy recovery in case there is problem,
including an error in this procedure. To make a working copy for
<em>&lt;name&gt;.rxg</em>, where <code><em>year</em></code>, <code><em>month</em></code>, and <code><em>day</em></code> are the values
you used in the <a href="#backup">Make a backup of your current .rxg files</a>
sub-step above, enter:</p>
<div class="literalblock">
<div class="content">
<pre>cp /usr2/control/rxg_files/BACKUP.<em>year</em>.<em>month</em>.<em>day</em>/<em>&lt;name&gt;</em>.rxg /tmp</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
For the remainder of these steps, work on the copy you just
made.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Find the uncommented calibration data set at the top of the file.</p>
</li>
<li>
<p>The first two lines in the file should be <code>GnPlt2</code> date comments.
Note the date in the second date comment. Ignore any date comments
that follow the second one.</p>
<div class="paragraph">
<p>If there are no <code>GnPlt2</code> date comments, delete from the start of the
file to (and including) the <code>end_spillover_table</code> line at the end of
the active calibration, then go to the <a href="#save_file">Save file</a> step
below.</p>
</div>
<div class="paragraph">
<p>If only the first line is a <code>GnPlt2</code> date comment, delete from the
start of the file to (and including) the <code>end_spillover_table</code> line at
the end of the active calibration, then go to the <a href="#finish">Finish</a>
step below.</p>
</div>
</li>
<li>
<p>Search for the <em>next</em> occurrence of a date comment with the date
you noted above.</p>
</li>
<li>
<p>Call the line before that location <em>B</em>. It should be
<code>end_spillover_table</code>.</p>
</li>
<li>
<p>Delete from the beginning of the file to <em>B</em>, inclusive.</p>
</li>
<li>
<p><a id="loop"></a> <a href="#loop">Loop</a>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the line after <code>GnPlt2</code> date comment that you found is another
<code>GnPlt2</code> date comment, note the date in that comment.</p>
<div class="paragraph">
<p>Otherwise go to the step labeled <a href="#finish">Finish</a> below.</p>
</div>
</li>
<li>
<p>Find the last line of the commented out calibration set at this
point. It should be <code>*end_spillover_table</code>.</p>
</li>
<li>
<p>Call the next line location <em>A</em>.</p>
</li>
<li>
<p>Search for the next occurrence of the date you noted above in
<a href="#loop">Loop</a>.</p>
</li>
<li>
<p>Call the previous line location <em>B</em>. It should be
<code>*end_spillover_table</code>.</p>
</li>
<li>
<p>Delete from <em>A</em> to <em>B</em>, inclusive.</p>
</li>
<li>
<p>Repeat the above steps above starting with the step labeled
<a href="#loop">Loop</a> above until you reach a commented out calibration that
doesn&#8217;t have a second <code>GnPlt2</code> date comment at the start.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="finish"></a> <a href="#Finish">Finish</a>: If your <em>.rxg</em> file was updated with
<em>gnplt1</em> in the past, please consider using the <a href="#gnplt1">gnplt1</a>
additional procedure in the <a href="#_explanation_of_procedure">Explanation of procedure</a> sub-section
below. Then continue with the next step here, <a href="#save_file">Save file</a>.</p>
</li>
<li>
<p><a id="save_file"></a><a href="#save_file">Save file</a>: Save the file.</p>
</li>
<li>
<p>Append the saved file to what is now in the <em>.rxg</em> file its
contents originally came from.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Any trailing comments that were added by <em>gnplt</em> after applying
the <a href="#_remove_extra_comments">Remove extra comments</a> step above, will be in the correct
order. As a result, appending after those will maintain the correct
order.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_explanation_of_procedure">A.2.2. Explanation of procedure</h4>
<div class="paragraph">
<p>To understand how this process works, consider two cases: (1) only the
<em>gnplt2</em> has been used to update the file, and (2) the file was
previously updated by <em>gnplt1</em>. In the former case, the growth of the
file follows the pattern (where the integers indicate the sequential
versions of the calibration, the leftmost is the active one, all the
others are commented out):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>0
1 0
2 0 1 0
3 0 1 0 2 0 1 0
4 0 1 0 2 0 1 0 3 0 1 0 2 0 1 0
...</pre>
</div>
</div>
<div class="paragraph">
<p>For each new version, <em>gnplt2</em> inserted a new data comment at the
start. The previous date comments were preserved after it. After the
above procedure, the content is reduced to (for the case of <code>4</code> being
the active calibration):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>4 3 2 1 0</pre>
</div>
</div>
<div class="paragraph">
<p>The other case is if the file was updated with <em>gnplt1</em> before
switching to <em>gnplt2</em>. In this case the progression is (where <code>A</code>
represents <em>all</em> the trailing comments before the first <em>gnplt2</em>
update):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>0 A
1 A 0 A
2 A 0 A 1 A 0 A
3 A 0 A 1 A 0 A 2 A 0 A 1 A 0 A
4 A 0 A 1 A 0 A 2 A 0 A 1 A 0 A 3 A 0 A 1 A 0 A 2 A 0 A 1 A 0 A
...</pre>
</div>
</div>
<div class="paragraph">
<p>After the above procedure, the content is reduced to (for the case of
<code>4</code> being the active calibration):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>4 3 2 1 A 0 A</pre>
</div>
</div>
<div class="paragraph">
<p><a id="gnplt1"></a><a href="#gnplt1">gnplt1</a>: In this case, there is an extra <code>A</code>
section between the final <code>1</code> and <code>0 A</code> at the end of the file. This
can be found and removed with these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the end of the <code>1</code> comments,
which is the <em>first</em> <code>*end_spillover_table</code> line after the <em>last</em>
<code>GnPlt2</code> date comment.</p>
</li>
<li>
<p>Call the <em>next</em> line <em>A</em>.</p>
</li>
<li>
<p>Find the <em>next</em> commented out calibration with the <em>latest</em> date
line (commented out) and <em>no</em> <code>GnPlt2</code> date comment line. This is last
update made by <em>gnplt1</em> (<code>0</code>).</p>
</li>
<li>
<p>Find the <em>previous</em> <code>*end_spillover_table</code> line. It should be the
last line before the <code>0</code> calibration set.</p>
<div class="paragraph">
<p>If your <em>.rxg</em> file was started before opacity corrections were
supported (version <em>9.6.7</em> in September 2003), the last line before
the <code>0</code> calibration set will be a commented out Tcal table entry (with
three fields after the leading <code>*</code>, i.e.,
<code>*&#160;<em>polarization&#160;frequency&#160;Tcal</em></code>). In this case,
you should find that line instead.</p>
</div>
</li>
<li>
<p>Call that location <em>B</em>.</p>
</li>
<li>
<p>Delete from <em>A</em> to <em>B</em>, inclusive.</p>
</li>
<li>
<p>If you executed this as part of the <a href="#_cleanup_procedure">Cleanup procedure</a> step
above, you can continue with the sub-step labeled
<a href="#save_file">Save file</a> in that step.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-07-11 09:12:53 -0400
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
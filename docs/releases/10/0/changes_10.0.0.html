<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Version 2.0 - April 2024">
<title>Changes from FS9</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Changes from FS9</h1>
<div class="details">
<span id="author" class="author">Version 2.0 - April 2024</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_fs_changes">2. FS changes</a>
<ul class="sectlevel2">
<li><a href="#_fs_changes_that_are_in_common_since_fs9">2.1. FS changes that are in common since FS9</a></li>
<li><a href="#_fs_changes_relative_to_the_main_branch">2.2. FS changes relative to the main branch</a></li>
<li><a href="#_fs_changes_relative_to_the_vgos_branch">2.3. FS changes relative to the VGOS branch</a></li>
</ul>
</li>
<li><a href="#_drudg_changes">3. drudg changes</a>
<ul class="sectlevel2">
<li><a href="#_drudg_changes_that_are_in_common_since_fs9">3.1. drudg changes that are in common since FS9</a></li>
<li><a href="#_drudg_changes_relative_to_the_main_branch">3.2. drudg changes relative to the main branch</a></li>
<li><a href="#_drudg_changes_relative_to_the_vgos_branch">3.3. drudg changes relative to the VGOS branch</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document covers changes in FS <em>10.0.0</em> compared to the latest
versions of FS9. There are separate sections for the changes in the FS
and <em>drudg</em>. Each section is divided into three sub-sections:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changes that are in common since FS9</p>
<div class="paragraph">
<p>These parts cover changes compared to both FS9 branches, main and
VGOS. These are changes that have been introduced in version <em>10.0.0</em>.</p>
</div>
</li>
<li>
<p>Changes relative to the main branch</p>
<div class="paragraph">
<p>These parts cover changes in comparison to the old main branch,
specifically version <em>9.13.2</em>. These are primarily features that were
in the VGOS branch but not in the main branch.</p>
</div>
</li>
<li>
<p>Changes relative to the VGOS branch</p>
<div class="paragraph">
<p>These parts cover changes in comparison to the VGOS branch, typically
version <em>9.12.13</em>. The VGOS branch diverged from the main branch at
<em>9.11.2</em>. These parts primarily cover features that were introduced
into the main branch after <em>9.11.2</em>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Clickable links such as
<a href="https://github.com/nvi-inc/fs/issues/36">#36</a> connect to specific issues
reported at <a href="https://github.com/nvi-inc/fs/issues" class="bare">https://github.com/nvi-inc/fs/issues</a>.</p>
</div>
<div class="paragraph">
<p>A complete history of changes can be found using the <code>git log</code> command
from within the FS <em>git</em> archive directory, usually <em>/usr2/fs-git</em>.</p>
</div>
<div class="paragraph">
<p>The file <em>/usr2/fs/misc/changes.txt</em> contains the old history of
changes in FS9. The file <em>/usr2/fs/misc/VENIX_changes.txt</em> contains
the old history of changes in FS8. However these two files have been
merged into the history given by <code>git log</code>.</p>
</div>
<div class="paragraph">
<p>The history of <em>drudg</em> is also described in more detail in
<em>/usr2/fs/drudg/change_log.txt</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fs_changes">2. FS changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section is divided into three sub-sections. Please see the
<a href="#_introduction">Introduction</a> section above for an explanation of the sub-sections.</p>
</div>
<div class="sect2">
<h3 id="_fs_changes_that_are_in_common_since_fs9">2.1. FS changes that are in common since FS9</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="unified"></a> One unified version for all FS users.</p>
<div class="paragraph">
<p>Both non-VGOS and VGOS operations are supported by the new version.
Previous installations of the main (non-VGOS) branch will need to have
some new local control files added.</p>
</div>
<div class="paragraph">
<p>The most significant change for users is that previous main branch
users will find that input is case sensitive, as it was already in the
VGOS branch.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
While it is possible to have different SNAP commands or
procedures with names that differ only in case, it is strongly
discouraged. In the future, case insensitivity may be introduced for
command and procedure names.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="bit3264"></a> Support for use on both 32- and 64-bit systems.</p>
<div class="paragraph">
<p>The new version should run on 32-bit systems that currently support
the FS (we support as far back as FSL8, we have not yet been able to
test with FSL7 or other even older systems), as well as on 64-bit
systems. The <a href="../../../misc/64-bit_conversion.html">Converting to a
64-bit System</a> document contains instructions for transitioning to a
64-bit system.</p>
</div>
<div class="paragraph">
<p>The key change to the source code to make this compatibility possible
is removing use of <code>long</code>s as 32-bit <code>int</code>s in C, particularly in
fixed length data structures. Note that  some system calls do require
<code>long</code>s. A tool, <em>unlongify</em> was developed by Dave Horsley to help
convert the FS code.  It is available to help convert station code.
Its use is described in the
<a href="../../../misc/64-bit_conversion.html#_conversion_of_c_code">Conversion
of C code</a> sub-step of the
<a href="../../../misc/64-bit_conversion.html">Converting to a 64-bit System</a>
document.</p>
</div>
<div class="paragraph">
<p>A second important issue is that pointers and <code>time_t</code> variables in C
are 64-bits on 64-bit systems and 32-bits on 32-bit systems. Care must
be taken if these are passed back to FORTRAN callers or used in fixed
length data structures.</p>
</div>
</li>
<li>
<p><a id="usegit"></a> Version control with <em>git</em>.</p>
<div class="paragraph">
<p>The FS source is now managed using <em>git</em> and <em>github</em> is used for
distribution. The source code is now under the GPL3 license.</p>
</div>
<div class="paragraph">
<p>The details of the model used for FS releases under <em>git</em> are
described in the <a href="../../misc/release_model.html">Release Model</a> document.</p>
</div>
<div class="paragraph">
<p>We expect updates in the future to require fewer steps, typically less
than in FS9 updates. This is in part due to the fact that distributing
the FS via <em>github</em> will make it easier to have smaller incremental
updates instead of having to collect lots of changes for infrequent
updates.</p>
</div>
<div class="paragraph">
<p>This change increases the importance of not modifying the
<em>/usr2/fs</em> directory tree since such changes will make it more
difficult to simply <code>pull</code> updates to install bug fixes and new
features.</p>
</div>
</li>
<li>
<p><a id="server"></a> The FS display server is now recommended for
normal use.</p>
</li>
<li>
<p><a id="adoc"></a> Reorganize update notes as HTML viewable on the web
(closing <a href="https://github.com/nvi-inc/fs/issues/71">#71</a>).</p>
<div class="paragraph">
<p>Hopefully, this change will make the update notes easier to read and
navigate.  Among other improvements, there are clickable links to
other sections within a document, as well as to sections in other
related documents, and a clickable table of contents. The major points
of the change are:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Reorganized update notes as <em>.adoc</em> files in the <em>docs/</em>
sub-directory.</p>
</li>
<li>
<p>All of the <em>.adoc</em> files are viewable as HTML, and are hierarchically
indexed, at <a href="https://nvi-inc.github.io/fs/" class="bare">https://nvi-inc.github.io/fs/</a>.</p>
</li>
<li>
<p>The first update notes available in HTML were for
<a href="beta2.html">10.0.0-beta2</a>.</p>
</li>
<li>
<p>Add <a href="../../../misc/font_conventions.html">FS Document Font
Conventions</a> document. These conventions are similar to the ones in
the traditional printed FS manuals.</p>
</li>
<li>
<p>Add <a href="../../misc/release_model.html">Release Model</a> document  describing
steps in making a release.</p>
</li>
<li>
<p>Add <a href="../../../misc/env_vars.html">FS Environment Variables</a>
document. This document describes user settable environment variables
for both <em>make</em> time and runtime.</p>
</li>
<li>
<p>Convert the old "Installation Reference Appendix" into the
<a href="../../misc/install_reference.html">Installation Reference</a>
document. Additionally:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Update
<a href="../../misc/install_reference.html#_making_a_back_up_before_installing">Making a back-up before installing</a>
section to include using symbolic links for switching back-and-forth
between operational and test installs.</p>
</li>
<li>
<p>Update
<a href="../../misc/install_reference.html#_copy_and_paste_installation_tips">Copy-and-paste installation tips</a>
section for working from HTML or PDF instructions.</p>
</li>
<li>
<p>Add strategy for setting the <code>geometry</code> resource for an <em>xterm</em>
window (and others with a <code>name</code> property) in the
<a href="../../misc/install_reference.html#_setting_geometry_values_in_xresources">Setting
geometry values in .Xresources</a> section.</p>
</li>
<li>
<p>Add section covering how to configure opening of new windows in the
<a href="../../misc/install_reference.html#_opening_additional_windows">Opening additional windows</a>
section.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Improve structure and correct some errors from original <em>.txt</em> version.</p>
</li>
<li>
<p>Make many typo/wording fixes.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Change the name of the <em>go</em> program to <em>rte_go</em>.</p>
<div class="paragraph">
<p>The <em>go</em> program emulates a facility of the RTE operating system that
was used to support passing control from SNAP back to an external
program (typically <em>aquire</em>, <em>fivpt</em>, <em>holog</em>, and <em>onoff</em>) after it
had suspended itself to wait for FS commands to be executed. The
program was renamed to <em>rte_go</em> to make room for the <em>go</em> compiler,
which is now being used for some software.</p>
</div>
<div class="paragraph">
<p>Instructions for updating local <em>.prc</em> files for this change are
included in the <a href="10.0.0.html#_convert_from_go_to_rte_go">Convert from
go to rte_go</a> sub-step of the <a href="10.0.0.html#_update_prc_files">Update
.prc files</a> step of the
<a href="10.0.0.html#_upgrading_from_an_fs9_version">Upgrading from an FS9
version</a> section of the <a href="10.0.0.html">FS 10.0.0 Update Notes</a>
document.</p>
</div>
</li>
<li>
<p><a id="fesh"></a> Update and expand <em>fesh</em>.</p>
<div class="paragraph">
<p>These changes include support for encrypted access to <em>cddis</em>, support
for other data centers, respecting <em>skedf.ctl</em>, and answering optional
<em>drudg</em> prompts for geodesy schedules.  Please see the
<a href="fesh_changes.html">FS 10.0.0 fesh Changes</a> document for full
details.</p>
</div>
</li>
<li>
<p><a id="logrxg"></a> Add <em>.rxg</em> file logging to <code>lo</code> command.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Summary information logging.</p>
<div class="paragraph">
<p>When an LO is configured (or monitored) with the <code>lo</code> command, a
summary of information from the matching <em>.rxg</em> file is displayed and
logged.  Details of the format are available with <code><strong>help=lo</strong></code>.  This
is intended to give the operator feedback that the correct version of
the <em>.rxg</em> file is in use. The format of these lines may be adjusted
in future releases based on feedback from users about what is most
useful.  Thanks to Alastair Gunn (Jodrell Bank) for suggesting this.</p>
</div>
</li>
<li>
<p>Full logging of <em>.rxg</em> file non-comment lines.</p>
<div class="paragraph">
<p>When an LO is configured with the <code>lo</code> command, the contents of the
corresponding <em>.rxg</em> file are logged, but not displayed. This only
occurs the first time this <em>.rxg</em> file matched an LO being configured
since the most recent opening of the current log. After the time-tag,
each logged line starts with <code>:rxg_file,</code> followed by the name of the
<em>.rxg</em> file, and then the values from a single non-comment line in the
file. The lines are logged in the order from the <em>.rxg</em> file. This is
intended to provide historical information about the values being used
in FS calculations.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="lohooks"></a> Add hooks for local LO control to <code>lo</code> and <code>lo_config</code>
commands.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Hook in <code>lo</code> command.</p>
<div class="paragraph">
<p>While the FS has an option for any built-in command to have a local
version, having such a local overriding command can create a
maintenance burden if the FS command is updated.  Some commands very
rarely change, but others change fairly often. The more often they
change, the more maintenance burden there is.  Unfortunately the <code>lo</code>
command changes fairly often.</p>
</div>
<div class="paragraph">
<p>To address this issue, a hook has been added to the FS version of the
<code>lo</code> command to run <em>antcn</em> in a particular local mode to configure an
LO when it is commanded.  This is triggered with the environment
variable <code>FS_LO_ANTCN_MODE</code>.  The details of the interface are
available in the <code>Comments</code> section shown with <code><strong>help=lo</strong></code>.</p>
</div>
<div class="paragraph">
<p>Using the hook may remove the need to have a local version of the <code>lo</code>
command. This may not be a suitable solution for all stations. If you
have (or need) a local <code>lo</code> command you can continue to use it (or
implement one), but it will need to be updated to get new capabilities
such as new racks, which occurs in this update, and the
<a href="#logrxg">logging .rxg files</a> change, described above, when they come
along.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This feature does not currently provide a way to read back
information from the device for display.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Hook in <code>lo_config</code> command.</p>
<div class="paragraph">
<p>The <em>drudg</em> program provides a means to include the calling of a
<code>lo_config</code> command at the end of each IF setup procedure it
generates. This is intended to provide stations that implement
commanding the LO configuration to device(s) with a way to do it in
one step for a mode as to opposed individually with
<code>lo=&#8230;&#8203;</code> commands. It can also be used to implement command of the
LO setup for a mode instead of with the <code>lo</code> command to reduce (but not
eliminate) the maintenance burden that is  needed if a local <code>lo</code>
command is used.  See the example
<em>/usr2/fs/st.default/control/skedf.ctl</em> file for how to trigger
<code>drudg</code>'s use of this command (also see the related
<a href="#skedf.ctl">skedf.ctl fix</a> change in this sub-section.</p>
</div>
<div class="paragraph">
<p>Until now the <code>lo_config</code> command has been a station only command,
i.e., it had to be implemented as a local command. With this update,
there is now a built-in command that can used for this functionality,
if it is suitable. If it is not suitable, the local command can still
be used or implemented.</p>
</div>
<div class="paragraph">
<p>By default the built-in <code>lo_config</code> command is a no-op. However,
it has a hook that can used to run <em>antcn</em> in a particular local mode
to implement configuring the LOs.  This is triggered with the
environment variable <code>FS_LO_CONFIG_ANTCN_MODE</code>. The details of the
interface are available in the <code>Comments</code> section shown with
<code><strong>help=lo_config</strong></code>.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="fsserver"></a> Add <em>fsserver</em> improvements and log support.</p>
<div class="paragraph">
<p>These changes introduce new functionality to <em>fsserver</em>, including an
FS log stream, as well as simplifying some use cases. Please see
<a href="fsserver_changes.html">FS 10.0.0 fsserver Changes</a> document for
more details.</p>
</div>
</li>
<li>
<p><a id="client"></a> <em>fsclient</em> fixes</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Make <em>fsclient</em> honor the <code>-n</code> flag properly.</p>
<div class="paragraph">
<p>This eliminates opening &#8220;double&#8221; windows if <em>fsclient</em> is run with
<code>-n</code> under an already running <em>fsclient</em> (closing
<a href="https://github.com/nvi-inc/fs/issues/48">#48</a>).</p>
</div>
</li>
<li>
<p>Make <em>fsclient</em> ignore prompt in no-X11 mode.</p>
<div class="paragraph">
<p>If an <em>fslcient</em> was in no-X11 mode, it created a <em>fs.prompt</em> when
instructed by the server. This change removes that behaviour (closing
<a href="https://github.com/nvi-inc/fs/issues/49">#49</a>), though it may cause an
issue if no other clients exist to dismiss a blocking prompt, as
discussed in issue <a href="https://github.com/nvi-inc/fs/issues/49">#49</a>. If
this is a problem for anyone&#8217;s use case we will need a new feature
here.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="gnplt"></a> Improve <em>gnplt</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fix labels in <em>gnplt</em> windows that display the gain curve
coefficients (closing <a href="https://github.com/nvi-inc/fs/issues/51">#51</a>).</p>
<div class="paragraph">
<p>Previously the labels, when displayed were in reverse order. In one
window, there were no coefficient labels at all. Thanks to Beppe
Maccaferri (Medicina) for reporting this and testing the solution.</p>
</div>
</li>
<li>
<p><em>gnplt</em> now updates the date in updated <em>.rxg</em> files (closing
<a href="https://github.com/nvi-inc/fs/issues/72">#72</a>).</p>
<div class="paragraph">
<p>The original developer, (Tomas Gille), did very good work developing
this second version of <em>gnplt</em>, but ran out of time in his internship
and was unable to include this minor but important feature. Thanks to
Beppe Maccaferri (Medicina) for reporting this.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Improvements to <em>msg</em>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add checking in <em>msg</em> for the FS being active just before writing to
the log (closes <a href="https://github.com/nvi-inc/fs/issues/86">#86</a>).</p>
<div class="paragraph">
<p>This allows <code>msg</code> to send its output to the log if it is started
before the FS. Previously, it had to be started after the FS. Thanks
to Jon Quick (HartRAO) for suggesting this.</p>
</div>
</li>
<li>
<p>Add feature to <em>msg</em> to allow switching from &#8220;manual start&#8221; to
&#8220;auto-start&#8221; (closes
<a href="https://github.com/nvi-inc/fs/issues/87">#87</a>).</p>
<div class="paragraph">
<p>By design, <em>msg</em> only allowed &#8220;auto-start&#8221; to be entered from the
<code>Ready</code> form. If the connection to the FS computer is lost (killing
<em>msg</em>) while waiting for &#8220;auto-start&#8221; to complete, it was difficult
to re-enter &#8220;auto-start&#8221; without sending a new <code>Ready</code> message. To
help with this an <code>Auto-start</code> button was added to &#8220;manual start&#8221;.
When <em>msg</em> is restarted, the user can go to the <code>Start</code> form and use
the <code>Auto-start</code> button to re-enter &#8220;auto-start&#8221;. The log must
already be open to the experiment log when <em>msg</em> restarted for this to
work.  Thanks to Jon Quick (HartRAO) for suggesting this.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="helpsh"></a> Move X resources for <em>helpsh</em> to <em>~/.Xresources</em>.</p>
<div class="paragraph">
<p>This allows the geometry and other parameter of the FS <code>help</code> display
<em>xterm</em> to be controlled locally.</p>
</div>
</li>
<li>
<p>Change default <em>.Xresource</em> files to prevent overwriting of <code>login
shell</code> window title by <em>bash</em>.</p>
<div class="paragraph">
<p>This maintains consistent window naming for agreement with existing
documentation. This only affects <em>bash</em> users.</p>
</div>
</li>
<li>
<p><a id="day248"></a> Always check for &#8220;day 248&#8221; issue in <em>setcl</em>.</p>
<div class="paragraph">
<p>Previously <em>setcl</em> only checked for this issue (which is due to use of
32-bit arithmetic in the time handling code), if the time model was
<em>not</em> <code>computer</code>. In principle, when the model is <code>computer</code> there is
no need to check for this issue.  However, since the time is still
managed with the same 32-bit arithmetic (on both 32- and 64-bit
systems) as for the non-<code>computer</code> models, it is still necessary to
check.  Not doing so was an oversight. The result was that there were
no warnings of an impending 248 day time issue if the model was
<code>computer</code>.  This is now fixed (closing
<a href="https://github.com/nvi-inc/fs/issues/56">#56</a>). Thanks to Richard
Blaauw (WSRT), and subsequently Jon Quick (HartRAO) for reporting
this.</p>
</div>
</li>
<li>
<p><a id="prc"></a> Add checking for a procedure or schedule file before
attempting to open it.</p>
<div class="paragraph">
<p>This change is to avoid accidentally closing an active procedure or
schedule file if the new one specified in the <code>proc=&#8230;&#8203;</code> or
<code>schedule=&#8230;&#8203;</code> commands, respectively, does not exist or has incorrect
permissions (closing
<a href="https://github.com/nvi-inc/fs/issues/45">#45</a>).  Previously, if the new
file did not exist, or did not have the correct permissions, the old
file would still be closed.  Thanks to Jon Quick (HartRAO) for
pointing out this inconsistency.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
This is a non-backward compatible change in how the SNAP
commands behave.  Previously supplying a non-existent procedure or
schedule file name would cause the closure of the corresponding file.
Now to close an open procedure or schedule without opening a new one,
a null parameter must be supplied, i.e., <code>proc=</code> or <code>schedule=</code>.  As
before, the latter will not close an open schedule procedure library.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The old behavior was partly a consequence of how the original
file handling worked on HP-RTE systems, but is not sensible for how
the SNAP commands should work.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="help"></a> Improve <code>help</code> command.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Remove usage of <code>system()</code> call to find <code>help</code> files (closing
<a href="https://github.com/nvi-inc/fs/issues/3">#3</a>, and
<a href="https://github.com/nvi-inc/fs/issues/40">#40</a>).</p>
</li>
<li>
<p>Update <code>help</code> pages for <em>onoff</em> and <em>fivpt</em>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Add section on switching between continuous and non-continuous
cal.</p>
</li>
<li>
<p>Remove <code>if=cont_cal,,</code> in <code>calon</code>/<code>off</code>-<code>nf</code>/<code>fp</code> procedures.</p>
</li>
<li>
<p>Add recovery method for misconfigured cal.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Improve DBBC2 <code>if<em>x</em></code> command help files.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>The fact that the IF target level is not command as the default was added.</p>
</li>
<li>
<p>The range for IF filter 3 was corrected to 1536-2048.</p>
</li>
<li>
<p>The description of the scaling of the IF power measurements was
brought up to date.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="plog"></a> Improve <em>plog</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Use of an environment variable <code>NETRC_DIR</code> was added to support not
having the <em>.netrc</em> file in the user&#8217;s home directory.</p>
<div class="paragraph">
<p>Please see <code><strong>plog -h</strong></code> for details on how to use this.  The same
variable is used by the <em>fesh</em> script for the same purpose.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Normally, the <em>.netrc</em>  file would be in the user&#8217;s home
directory.  However, some systems have security policies that forbid
that. This variable provides a way to have the <em>.netrc</em> file in a
different directory, perhaps <em>/usr2/control</em>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The format of the version print-out was changed.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="popen"></a> Add <em>popen</em> time-out feature.</p>
<div class="paragraph">
<p>There is a now a <code>-t &#8230;&#8203;</code> time-out option. If the command being run by
<em>popen</em> has a time-out feature, it is generally better to use that
command&#8217;s feature. See <code><strong>help=sy</strong></code> for more details.</p>
</div>
</li>
<li>
<p><a id="prc2"></a> Fix the remaining case of attempting to execute a procedure
from a closed library causing a crash.</p>
<div class="paragraph">
<p>There are very few cases in the code where a procedure library is
closed; one was overlooked in the previous fix of this issue in
<em>9.13.1</em>. This case could happen if the schedule that was opened was
named <em>station</em>, which would lead to the automatic closure of an
already open schedule procedure library (there cannot be a <em>station</em>
schedule procedure library since <em>station</em> is already the station
procedure library).</p>
</div>
</li>
<li>
<p><a id="year"></a> Fix year wrap error message in procedure logging.</p>
<div class="paragraph">
<p>This fixed a benign and spurious error message if a log was kept open
past the end of the year and any procedures that had last been logged
in the previous year were executed again (closing
<a href="https://github.com/nvi-inc/fs/issues/23">#23</a>). Thanks to Eskil
Varenius (Onsala) and Alexander Neidhardt (Wettzell) for reporting
this.</p>
</div>
</li>
<li>
<p><a id="header_lines"></a>  Add more log header lines.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A log header line was added for <code>uname()</code> system information.</p>
</li>
<li>
<p>A log header line was added for the compile time value of the <code>FC</code>
environment variable.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="holog"></a> Improve <em>holog/MASK</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The elevation spacing was corrected for the example in step (3)
of <em>mask-HOWTO.txt</em>.</p>
</li>
<li>
<p>Axis titles were added to <em>plot_mask.m</em>.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="saterrors"></a> Fix ignoring <em>antcn</em> errors in the <code>satellite</code> and
<code>satoff</code> commands.</p>
<div class="paragraph">
<p>This bug caused errors from <em>antcn</em> to be ignored for <em>only</em> these
commands. It has been fixed (closing
<a href="https://github.com/nvi-inc/fs/issues/82">#82</a>).</p>
</div>
</li>
<li>
<p><a id="cls_chk"></a> Eliminate <code>cls_chk</code> error from <code>inject_snap -w &#8230;&#8203;</code>
command when an error occurs (partly closing
<a href="https://github.com/nvi-inc/fs/issues/50">#50</a>).</p>
<div class="paragraph">
<p>This was caused by <em>inject_snap</em> not implementing the new linkage that
was added for <em>fserr</em>. To correctly retrieve the error message would
have required making a new interface to <em>fserr</em> or subsuming it into a
library routine that both <em>ddout</em> and <em>inject_snap</em> could use. It was
not possible to do either in the available time. Instead <em>inject_snap</em>
was modified to output the error without the message, but pointing out
that the message can be found in the log and display. This is covered
in more detail in issue <a href="https://github.com/nvi-inc/fs/issues/50">#50</a>.
Thanks to Dave Horsley (Hobart) for reporting this.</p>
</div>
</li>
<li>
<p><a id="fixmess"></a> Fix some errors in <em>control/fserr.ctl</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Errors in some double double-quote (<code>""</code>) lines and some
incorrectly reused error codes were fixed (closing
<a href="https://github.com/nvi-inc/fs/issues/43">#43</a>).  Thanks to Alexander
Neidhardt (Wettzell) for reporting these.</p>
</li>
<li>
<p>The error messages for a error not being found when attempting to
manipulate its display setting (with <code>tnx</code>) were clarified (closing
<a href="https://github.com/nvi-inc/fs/issues/22">#22</a>).  Thanks to Jon Quick
(HartRAO) for reporting this.</p>
</li>
<li>
<p>Obsolete errors for the, no longer used, <em>sw.ctl</em> control file were
removed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Improve start-up error message from <em>fserr</em> if an error message line
is too long in <em>fsser.ctl</em> or <em>sterr.ctl</em>.</p>
<div class="paragraph">
<p>Previously, it reported the error as being in the following <code>""</code> line.</p>
</div>
</li>
<li>
<p><a id="skedf.ctl"></a> Fix example <em>/usr2/fs/st.default/control/skedf.ctl</em>.</p>
<div class="paragraph">
<p>The example <em>sked.ctl</em> file incorrectly identified the <code>lo_config</code>
keyword as <code>if_config</code>. This has been fixed (closing
<a href="https://github.com/nvi-inc/fs/issues/81">#81</a>). It is recommended that
you check and, if needed, update your local copy in
<em>/usr2/control/skedf.ctl</em> appropriately, including the comments.</p>
</div>
</li>
<li>
<p><a id="makefile"></a> The FS uses a new <em>Makefile</em> scheme.</p>
<div class="paragraph">
<p>This is accomplished by including the <em>/usr2/fs/include.mk</em> file in
every <em>Makefile</em> except for <em>drudg</em>, its libraries, and
<em>third_party/</em>.  The scheme is <em>opt-in</em> so it is not necessary for
every program or station programs to participate.  An explanation of
the new scheme is provided in <em>/usr2/fs/misc/fs10_makefile.md</em>.</p>
</div>
<div class="paragraph">
<p>For programs that are opted-in, the most significant consequence of
this is that a <em>make</em> at the top-level  will re-compile anything that
depends on a library or include file that has changed. Since <em>drudg</em>
has not yet opted-in, updates to it, and its libraries and include
files, will require remaking all of the libraries and <em>drudg</em> to be
sure they are consistent. The <em>drudg</em> program has its own separate
ecosystem within the FS source tree, consisting of the <em>skdrincl/</em>,
<em>skdrlnfch/</em>, <em>skdrutil/</em>, <em>vex/</em>, and <em>drudg/</em> sub-directories</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Since <em>third_party/</em> has no FS dependencies, it is not
affected by this issue.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="noserver"></a> Add option to not build the display server into the FS.</p>
<div class="paragraph">
<p>The latest version of the server may not <em>make</em> successfully on some
older Linux distributions such as FSL7. To help users in that
situation, an option was added to disable inclusion of the server by
setting the <code>FS_DISPLAY_SERVER_NO_MAKE</code> environment variable before
<em>make</em>-ing the FS (partially closing
<a href="https://github.com/nvi-inc/fs/issues/76">#76</a>). Follow the steps below
to remove the server.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>As <em>prog</em>:</p>
<div class="ulist">
<ul>
<li>
<p>If you use <em>tcsh</em>, add the following to <em>~/.login</em>:</p>
<div class="literalblock">
<div class="content">
<pre>setenv FS_DISPLAY_SERVER_NO_MAKE 1</pre>
</div>
</div>
</li>
<li>
<p>If you use <em>bash</em>, add the following to <em>~/.profile</em>:</p>
<div class="literalblock">
<div class="content">
<pre>export FS_DISPLAY_SERVER_NO_MAKE=1</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Logout of and then back into the <em>prog</em> account before
<em>make</em>-ing the FS.</p>
</li>
<li>
<p>It is also necessary to also make sure that users running the FS do
not have the <code>FS_DISPLAY_SERVER</code> environment variable set.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>As  <em>oper</em>:</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>Delete or comment out any lines in the <em>~/.login</em>
file (if using <em>tcsh</em>) or <em>~/.profile</em> (if using <em>bash</em>) setting
the variable.</p>
</li>
<li>
<p>Logout and back in before attempting to run the FS.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Repeat the above steps as <em>prog</em>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Add <code>save</code> to all <em>fslb/novas.f</em> routines.</p>
<div class="paragraph">
<p>This is defensive in case local variable are changed to being
automatic. The NOVAS routines seem to require static variables.</p>
</div>
</li>
<li>
<p><a id="symlinks"></a> No longer set <em>/usr2/fs</em> and <em>/usr2/st</em> to be owned by
<em>prog</em>.</p>
<div class="paragraph">
<p>This was a long standing but benign error in the <em>misc/fsinstall</em>
script.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_fs_changes_relative_to_the_main_branch">2.2. FS changes relative to the main branch</h3>
<div class="paragraph">
<p>This update merges the VGOS branch into the main branch. The VGOS
branch diverged from the main branch just after <em>9.11.2</em>. This
sub-section covers FS changes that were introduced in the VGOS branch
and have been incorporated into the main branch as of <em>10.0.0</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="case"></a> Input is now case sensitive.</p>
<div class="paragraph">
<p>As was the case for the VGOS branch, input from the operator,
schedules, and procedures is now case sensitive. This change should
present no difficulties if all normal input is in lower case.  All
SNAP commands and most parameters are lower case.</p>
</div>
<div class="paragraph">
<p>The change was made because in some cases it necessary to send upper
or mixed case input to devices and other computers from SNAP commands.
For MAT and GPIB communication, all communications sent to the devices
is still mapped to upper case.</p>
</div>
<div class="paragraph">
<p>The biggest consequence of this change is perhaps that strings sent in
<code>antenna=&#8230;&#8203;</code> commands to the antenna are not by default mapped to
upper case. If this an issue for your antenna, it may require
changes to your <em>antcn</em> program. This is covered in the
<a href="10.0.0.html#_case_sensitive_strings_in_antenna_commands">Case sensitive strings in antenna= commands</a>
sub-step of the
<a href="10.0.0.html">FS 10.0.0 Update Notes</a> document.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
While it is possible to have different SNAP commands or
procedures with names that differ only in case, it is strongly
discouraged. In the future, case insensitivity may be introduced for
command and procedure names.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="tpicdno"></a> <code>tpicd=no</code> now requires a running (not halted) schedule
to log data.</p>
<div class="paragraph">
<p>This was added to avoid logging very large amounts of data for RDBE
systems if the schedule ends or is halted while <em>tpicd</em> is recording
data i.e., when <code>data_valid</code> is <code>on</code>. It is probably beneficial for
all back-ends, so has been made a general feature. Data can still be
logged when a schedule is not running using <code>tpicd=yes</code> (which does
not depend on <code>data_valid</code>).</p>
</div>
</li>
<li>
<p><a id="parallel"></a> Parallel execution of commands for multiple instances
of a few specific devices.</p>
<div class="paragraph">
<p>Currently this is only supported for RDBE racks and Mark 6 recorders.
Please see the <a href="rdbe.html#_parallel_command_execution">Parallel
command execution</a> sub-section of the <a href="rdbe.html">FS RDBE support</a>
document and the <a href="mk6.html#_parallel_command_execution">Parallel
command execution</a> sub-section of the <a href="mk6.html">FS Mark 6 support</a>
document for more details.</p>
</div>
</li>
<li>
<p><a id="rdbe"></a> Partial support for RDBE racks.</p>
<div class="paragraph">
<p>This support does not provide the complete command set and
functionality usually provided by the FS for a rack. However, it is
sufficient for normal FS operations for VGOS observations if the
schedule procedure library is provided by a specially crafted <em>.skd</em>
schedule file (see the <a href="#procs">$PROCS block</a> change in the
<a href="#_drudg_changes_relative_to_the_main_branch">drudg changes relative to the main branch</a>
sub-section below for more details).</p>
</div>
<div class="paragraph">
<p>The details of RDBE features are described in the
<a href="rdbe.html#_fs_rdbe_support_features">FS RDBE support features</a>
section of the
<a href="rdbe.html">FS RDBE support</a> document.</p>
</div>
</li>
<li>
<p><a id="dbbc3"></a> Partial support for DBBC3 racks.</p>
<div class="paragraph">
<p>This support does not provide the complete command set and
functionality usually provided by the FS for a rack. However, it is
sufficient for normal FS operations for VGOS observations if the
schedule procedure library is provided by a specially crafted <em>.skd</em>
schedule file (see the <a href="#procs">$PROCS block</a> change in the
<a href="#_drudg_changes_relative_to_the_main_branch">drudg changes relative to the main branch</a> sub-section below for
more details).</p>
</div>
<div class="paragraph">
<p>The details of DBBC3 features are described in the
<a href="dbbc3.html#_fs_dbbc3_support_features">FS DBBC3 support features</a>
section of the
<a href="dbbc3.html">FS 10.0 DBBC3 support</a> document.</p>
</div>
</li>
<li>
<p><a id="mk6"></a> Partial support for Mark 6 recorders</p>
<div class="paragraph">
<p>This support does not provide the complete command set and
functionality usually provided by the FS for a recorder. However, it
is sufficient for normal FS operations for VGOS observations. (see
the <a href="#mk6drudg">Mark 6</a> change in the
<a href="#_drudg_changes_relative_to_the_main_branch">drudg changes relative to the main branch</a>
sub-section below for more details).</p>
</div>
<div class="paragraph">
<p>The details of the FS Mark 6 features are described in the
<a href="mk6.html#_fs_mark_6_support_features">FS Mark 6 support features</a>
section of the
<a href="mk6.html">FS Mark 6 support</a> document.</p>
</div>
</li>
<li>
<p>The <em>scnch</em> window was added to provide a display of the
<code>scan_check</code> results.</p>
<div class="paragraph">
<p>This was originally developed for Mark 6 recorders in the VGOS branch,
but has now been expanded to support Mark 5 recorders as well (closing
<a href="https://github.com/nvi-inc/fs/issues/61">#61</a>).</p>
</div>
</li>
<li>
<p><a id="dbbc2"></a> Limited support for a second DBBC2 and Fila10G.</p>
<div class="paragraph">
<p>To support VGOS operations with two DBBC2s, limited support for a
second DBBC2 was added. This consists of the low-level device
communication commands <code>dbbc2</code> and <code>fila10g2</code> and time and
configuration setting of a FiLa10G attached to the second DBBC2 with
<em>fmset</em>.</p>
</div>
<div class="paragraph">
<p>This support is sufficient for normal FS operations for VGOS
observations with two DBBC2/FiLa10G units if the schedule procedure
library is provided by a specially crafted <em>.skd</em> schedule file (see
the <a href="#procs">$PROCS block</a> change in the
<a href="#_drudg_changes_relative_to_the_main_branch">drudg changes relative to the main branch</a>
sub-section below for more details).</p>
</div>
<div class="paragraph">
<p>A second instance, <em>dbbc2</em>, of the DBBC2 control program, <em>dbbcn</em>, is
used for communication with the second DBBC2. The <em>dbba2.ctl</em> control
file is used for the second DBBC2.</p>
</div>
</li>
<li>
<p><a id="argspaces"></a> Ignore leading spaces in keyword parameters for C
based FS commands.</p>
<div class="paragraph">
<p>This allows leading spaces in parameters that are parsed as strings to
be ignored, as they were already for integer and real numbers.  Since
FORTRAN commands already had this feature, it should be universal now.</p>
</div>
</li>
<li>
<p><a id="outputorder"></a> Error messages from commands are now printed after
command responses when both are present.</p>
<div class="paragraph">
<p>This change was made so that the last output from a command will
always be the error message, if an error occurred. This should make
the error more visible when the command also produces non-error log
responses. This is particularly import for parallel execution commands
for RDBE racks and Mark 6 recorders, but should be beneficial in
general.</p>
</div>
</li>
<li>
<p><a id="devicelogging"></a> Remove carriage returns (<code>0x13</code>) and line-feeds
(<code>0x10</code>) from responses in the commands <em>form4</em>, <em>decode4</em>, <em>hpib</em>, and
<em>mat</em>, even if there was error.</p>
<div class="paragraph">
<p>Previously the responses were handled by the general processing (in
<em>boss</em>) which did not remove these characters. Instead the responses
are now processed with the code that would handle this if there were no
error, which does remove these characters.</p>
</div>
</li>
<li>
<p><a id="recurse"></a> Recursive average calculation in <em>onoff</em> updated.</p>
<div class="paragraph">
<p>The order of operations was changed to provide better fractional
accuracy for very large numbers of samples.</p>
</div>
</li>
<li>
<p>Increase some limits:</p>
<div class="ulist">
<ul>
<li>
<p>The maximum number of LOs was increased to eight.</p>
<div class="paragraph">
<p>This change was made to accomodate having eight IFs for VGOS.</p>
</div>
</li>
<li>
<p>Increase number of possible commands to 1024.</p>
</li>
<li>
<p>Increase the number of command subroutines available to 1000.</p>
<div class="paragraph">
<p>This impacted the format of the <em>control/fscmd.ctl</em> and
<em>/usr2/st/stcmd.ctl</em>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a id="scripts"></a> A few experimental, <em>user beware</em>, utilities were
added.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
These may not work well for their intended purpose or at all.
They are only intended for developers.  They may change in the future.
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In <em>misc/</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>ntpmon</em>&#8201;&#8212;&#8201;Simple NTP monitoring</p>
</li>
<li>
<p><em>time_delay</em>&#8201;&#8212;&#8201;Simple source acquisition time delay listing</p>
</li>
<li>
<p><em>tpcont_rdbe</em>&#8201;&#8212;&#8201;Simple RDBE continuous TP extraction</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>In <em>chk_time</em>/:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>chk_time</em> a simple utility for checking for NTP time jumps.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="bugfixes"></a> Some bugs inherited from the main branch were fixed in
the VGOS branch.  These fixes have now been included in the main
branch.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Missing argument in <code>int2str()</code> for TPI value logging supplied.</p>
<div class="paragraph">
<p>This was occurring for VLBA, LBA, DBBC, and user detectors, but
apparently was relatively benign. Incorrect behavior, if any, was
probably limited to using leading zeros, instead of blanks, in some
fields.</p>
</div>
</li>
<li>
<p>For the DBBC, incorrect logging of errors if there was a problem
retrieving class buffers of TPI data.</p>
</li>
<li>
<p>The DBBC2 <code>cont_cal</code> error responses were incorrectly using the <code>df</code>
code instead of <code>dd</code>.</p>
</li>
<li>
<p>The <code>disk_record</code>, <code>disk2file</code>, <code>in2net</code> commands incorrectly
cleared the class number of responses twice if there was an error
retrieving them when the recorder was commanded.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>disk_pos</code> command still has this error.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Fixed checking uninitialized variable for an error when returning
to nominal position after an error in <em>fivpt</em>.</p>
<div class="paragraph">
<p>This was apparently a benign bug.</p>
</div>
</li>
<li>
<p>Fixed Tsys always being 100 for continuous cal in <em>fivpt</em>.</p>
<div class="paragraph">
<p>This bug did not affect the ability of <em>fivpt</em> to find pointing
offsets. In addition to the Tsys value being wrong, it caused Tsys
derived values (Tant, fitted peak Tant values, and Tsys related values
in the <code>perform</code> records) to be displayed in terms of a percentage of
Tsys. This was basically the same effect as having a Tcal value of
<code>-100</code>. Only DBBC racks had continuous cal in FS9. While not entirely
a cosmetic issue, it was fairly benign.</p>
</div>
</li>
<li>
<p>Corrected the order of <code><em>wait</em></code> and <code><em>cal</em></code> response fields in
<code>fivept</code> <code>help</code> page,</p>
</li>
<li>
<p>Report errors decoding times for <code>schedule</code> command and ignore
relative waits</p>
<div class="paragraph">
<p>When the <code>schedule</code> command was looking for the next scan to start at,
it was ignoring errors when decoding the times in the <em>.snp</em> file.
This could lead to some confusion about why no scans were found to
start at. This was especially true if there were relative waits
(<code>!+&#8230;&#8203;</code>) in the file which would cause errors. Relative waits are now
ignored.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_fs_changes_relative_to_the_vgos_branch">2.3. FS changes relative to the VGOS branch</h3>
<div class="paragraph">
<p>This update merges the VGOS branch into the main branch. The VGOS
branch diverged from the main branch at <em>9.11.2</em>. Except for the first
nine items below, this sub-section covers FS changes that occurred in
the main branch from <em>9.11.2</em> through <em>9.13.2</em>. These changes are
covered extensively in several update notes in the <em>misc/</em>
subdirectory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>fs9116up.txt</em></p>
</li>
<li>
<p><em>fs9118up.txt</em></p>
</li>
<li>
<p><em>fs91119up.txt</em></p>
</li>
<li>
<p><em>fs9132up.txt</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rather that cover them fully here as well, only a brief summary is
provided below. Please check the files listed above for the full
details. The first nine items below are changes to VGOS branch
features, the remainder are the changes inherited from the main
branch.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="addrdbemsg"></a> Add <em>rdbemsg</em> utility for RDBE VGOS users.</p>
<div class="paragraph">
<p>This utility was developed by Jason Soohoo (Haystack) as
<em>vgos-msg-gui.py</em>. It is an RDBE oriented version of the FS <em>msg</em>
utility for sending operations emails. Originally it ran on a
different back-end computer. It was ported to the FS computer,
expanded to provide pointing data, and generalized to support more
systems. For more informaion, please see the
<a href="rdbe.html#_rdbemsg_utility">rdbemsg utility</a> sub-section of the
<a href="rdbe.html">FS RDBE support</a> document.</p>
</div>
</li>
<li>
<p><a id="scnch"></a> Generalize the <em>scnch</em> window to cover Mark 5 recorders.</p>
<div class="paragraph">
<p>The <em>scnch</em> window was initially developed for Mark 6 recorders. The
form has now been generalized to cover Mark 5 recorders as well
(closing <a href="https://github.com/nvi-inc/fs/issues/61">#61</a>).</p>
</div>
</li>
<li>
<p><a id="sclient"></a> Replace deprecated TCP clients with <em>s_client</em>.</p>
<div class="paragraph">
<p>The <em>s_client</em> script should be used to replace other similar, new but
now deprecated, TCP scripts from the VGOS branch: <em>be_client</em> and
<em>mcicn</em>.</p>
</div>
<div class="paragraph">
<p>The <em>s_client</em> script was already present in both the main and VGOS
branches. It is a generalization of the <em>be_client</em> script written by
Chet Ruszczyk (Haystack). Errors are reported as <code>lg   -1</code> errors in
the log if the FS is running.  The details on its use are available
from <code><strong>help=sy</strong></code>.</p>
</div>
</li>
<li>
<p><a id="new_ifdbb"></a> Add <em>new_ifdbb</em> script for VGOS stations.</p>
<div class="paragraph">
<p>This script is intended as a tool to allow stations, and schedule
writers, a way to update schedules for changes in the <em>ifdbb</em>
procedure used by VGOS stations, particularly those with RDBE
back-ends. For RDBE stations, the attenuation used in the signal
chain, which is set by the schedule, depends on the observing mode
being used and the conditions at the station. The provides a way to
incorporate needed changes into schedules. If the script is run
without other command line arguments, it will output &#8220;help&#8221;
information.</p>
</div>
</li>
<li>
<p><a id="cont_cal"></a> Add support for DBBC3 to <code>if=cont_cal,&#8230;&#8203;</code> (closing
<a href="https://github.com/nvi-inc/fs/issues/54">#54</a>).</p>
<div class="paragraph">
<p>Thanks to Eskil Varenius (Onsala) for reporting that this was missing.</p>
</div>
</li>
<li>
<p>Improve <code>help</code> command.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Improve <code>help</code> page for <em>tpicd</em>.</p>
<div class="paragraph">
<p>Made it clearer that when in the <code>no</code> mode, <code>data_valid=on</code> will only
start logging of <em>tpicd</em> data when a schedule is running and
not-blocked.  Accidentally leaving <em>tpicd</em> logging RDBE multi-cast
data after closing or halting a schedule creates a lot of extra log
entries. This is probably beneficial for all back-ends.</p>
</div>
</li>
<li>
<p>The <code>help</code> file for the <code>ddbc</code> command was expanded to also
describe the <code>dbbc2</code> and <code>dbbc3</code> commands and now includes a
description of the output for multi-line responses for all of these
commands (closing <a href="https://github.com/nvi-inc/fs/issues/75">#75</a>). The
<code>help</code> command now works for the <code>dbbc2</code> and <code>dbbc3</code> commands.</p>
</li>
<li>
<p>The <code>help</code> file for the <code>fila10g</code> command was expanded to also
support the <code>fila10g2</code> command. The <code>help</code> command now works for the
<code>fila10g2</code> command.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="monx"></a> Change the flags for the <em>mon&lt;x&gt;</em> programs in <em>clpgm.ctl</em>
from <code>a</code> to <code>d</code>.</p>
<div class="paragraph">
<p>Since these external programs do not depend on the FS, they can
continue running (<code>d</code>etached) after the client is closed.</p>
</div>
</li>
<li>
<p><a id="dbbcn"></a> Improve error logging for <em>dbbcn</em> initialization.</p>
<div class="paragraph">
<p>The instance of the program is now correctly reported. It can be
<em>dbbcn</em> or <em>dbbc2</em>.</p>
</div>
</li>
<li>
<p>Fix some errors in <em>control/fserr.ctl</em>.</p>
<div class="paragraph">
<p>Error messages that should refer to the <code>active_rdbes</code> and
<code>active_mk6s</code> commands were corrected to no longer incorrectly refer
to the <code>rdbe_active</code> and <code>mk5_active</code> commands, respectively.</p>
</div>
</li>
<li>
<p>Fix Tsys to work if the recorder type is <code>none</code>.</p>
</li>
<li>
<p>Prevent changing schedules while recording.</p>
</li>
<li>
<p>Fix a bug that caused <em>tpicd</em> to crash for DBBC2.</p>
</li>
<li>
<p>Add a time-out feature in the <code>onsource</code> command to enable waiting
for the source to be reached.</p>
</li>
<li>
<p>Add support for FSL9.</p>
</li>
<li>
<p>Change format of DBBC2 CoMo line in <em>equip.ctl</em>.</p>
</li>
<li>
<p>Update minimum version of DBBC2 PFB firmware in <em>equip.ctl</em>.</p>
</li>
<li>
<p>Add FiLa10G input select line to  <em>equip.ctl</em>.</p>
</li>
<li>
<p>Add <code>128</code> as a clock rate and add new <code>nominal</code> cases to
<em>equip.ctl</em>.</p>
</li>
<li>
<p>Add support for FlexBuff recorders.</p>
</li>
<li>
<p>Add partial support for VLBAC and CDAS racks.</p>
</li>
<li>
<p>Change <code>dbbc</code> rack type to <code>dbbc_ddc</code>.</p>
</li>
<li>
<p>Add support for DBBC2 racks with FiLa10G units, rack type:
<code>dbbc_ddc/fila10g</code>.</p>
</li>
<li>
<p>Add support for the DBBC2 PFB personality, rack types: <code>dbbc_pfb</code>
and <code>dbbc_pfb/fila10g</code>.</p>
</li>
<li>
<p>Add support for two VSI outputs from a DBBC2 rack feeding a
FiLa10G.</p>
</li>
<li>
<p>Add support for DBBC2 <code>geo2</code> mode.</p>
</li>
<li>
<p>Add a new <em>termination</em> mode in <em>antcn</em>.</p>
</li>
<li>
<p>Make use of the <code>mk5_status</code> command standard in place of
<code>mk5=status?</code>.</p>
</li>
<li>
<p>Fix a bug that prevented <em>scan_check</em> from reporting an error for
non-zero missing bytes for Mark 5B.</p>
</li>
<li>
<p>Add unification of station procedures for DBBC2 DDC with continuous
and non-continuous calibration, as well as with PFB (non-continuous
calibration).</p>
</li>
<li>
<p>Add new <code>if</code> command for conditional execution of SNAP commands.</p>
</li>
<li>
<p>Change the <em>scan_check</em> command to only give a warning if there are
missing bytes from 5C and FlexBuff recorders.</p>
</li>
<li>
<p>Add improvements in the <em>holog</em> program (some VGOS branch versions
had these improvements).</p>
</li>
<li>
<p>Fix a bug that caused local versions of <em>sterp</em> to fail if an
error message was longer than 256 characters.</p>
</li>
<li>
<p>The <em>s_client</em> utility was made Python 2.5 (FSL8, <em>Lenny</em>) compatible.</p>
</li>
<li>
<p>Change the <em>fmset</em> programs to offer a set of (station defined)
FiLa10G configurations to send as part of syncing.</p>
</li>
<li>
<p>Add support for DBBC2 DDC firmware versions <em>v105</em>, <em>v105_1</em>, <em>v105E</em>,
<em>v105F</em>, <em>v106</em>, and <em>v107</em>.</p>
</li>
<li>
<p>Add the FS display server (some VGOS branch versions also had this
feature).</p>
</li>
<li>
<p>Provide support in the <code>mk5c_mode</code> command for the full range of
total data rates that can be specified in a 64-bit integer for
<em>jive5ab</em> with VDIF and 5B/Ethernet recording.</p>
</li>
<li>
<p>Add a case specific error message to <em>fmset</em> if <em>jive5ab</em> complains
that there has been no <code>dot_set=&#8230;&#8203;</code> yet for a Mark 5B recorder.</p>
</li>
<li>
<p>Improve <em>gnplt</em> to allow more Tcal points per band, support user
define font sizes, and use better plot axis labels for large values.</p>
</li>
<li>
<p>Add support for user devices that can&#8217;t (or don&#8217;t need to) measure a
<em>zero</em> level for Tsys.</p>
</li>
<li>
<p>In <em>metserver</em>, add command line argument for suppressing errors
from specific devices, if broken; add support for <code>FS_SERIAL_CLOCAL</code>
<em>make</em> time environment variable for FSL9 and later.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_drudg_changes">3. drudg changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section is divided into three sub-sections. Please see the
<a href="#_introduction">Introduction</a> section above for an explanation of the sub-sections.</p>
</div>
<div class="sect2">
<h3 id="_drudg_changes_that_are_in_common_since_fs9">3.1. drudg changes that are in common since FS9</h3>
<div class="paragraph">
<p><em>drudg</em> opening message date is <code>2021Feb18</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="bit3264_drudg"></a> Source code now works on 32- and 64-bit platforms.</p>
<div class="paragraph">
<p>For 64-bit use of FORTRAN, eight-byte integers are needed to support
some calls in the VEX library. As a result, <em>drudg</em> and its libraries
are configured to automatically use four byte integers for 32-bit and
eight byte integers for 64-bit.  The rest of the FS uses four byte
integers for both.  This made it necessary to give <em>drudg</em> it own
version of <em>lnfch/</em>, in <em>skdrlnfch/</em>.</p>
</div>
</li>
<li>
<p><a id="git_drudg"></a> Source version control is maintained with <em>git</em>.</p>
<div class="paragraph">
<p>The <em>drudg</em> program source is maintained external to the FS. For each
<em>drudg</em> update the source in imported into the FS <em>git</em> repo for
distribution with the FS. This does not provide the same level of
tracking as having <em>drudg</em> itself in <em>git</em> but it is still useful.</p>
</div>
</li>
<li>
<p><a id="uninit"></a> Fix uninitialized variables.</p>
<div class="paragraph">
<p>Several previously uninitialized variables are now initialized. As
part of this <code>implicit none</code> was added to all FORTRAN routines that
did not have it before, except for <em>xat.f</em>.</p>
</div>
</li>
<li>
<p><a id="comment"></a> Update comment on line three of <em>.snp</em> files.</p>
<div class="paragraph">
<p>Previously at the end of line, the number of passes and the tape
length were listed. Since there is no tape support, these fields were
replaced with the recorder type.</p>
</div>
</li>
<li>
<p><a id="head"></a> Fix crash if <code>$HEAD</code> is the last block in a <code>.skd</code> file.</p>
<div class="paragraph">
<p>Fixed bug in <em>reads.f</em>.</p>
</div>
</li>
<li>
<p><a id="mask"></a> Fix crash due to an  error in a mask (closing
<a href="https://github.com/nvi-inc/fs/issues/74">#74</a>).</p>
<div class="paragraph">
<p>A particular error in the mask format intermittently excited an
uninitialized variable bug.  Thanks to Beppe Maccaferri (Medicina) for
reporting this. He discovered it while testing with <em>r1971.skd</em> (which
was not an experiment that included Medicina).</p>
</div>
</li>
<li>
<p>Allow the <code>$PARAMS</code> block to occur after other blocks in <em>.skd</em>
files.</p>
<div class="paragraph">
<p>Previously it has to be the first block.</p>
</div>
</li>
<li>
<p><a id="drudgsource"></a> Clean-up source.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Remove references to pass, headstacks, and S2.</p>
</li>
<li>
<p>Add the GPL to files it was missing from.</p>
</li>
<li>
<p>Remove source files no longer used.</p>
</li>
<li>
<p>Unify source between <em>sked</em> and the FS.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_drudg_changes_relative_to_the_main_branch">3.2. drudg changes relative to the main branch</h3>
<div class="paragraph">
<p>This update merges the VGOS branch into the main branch. The VGOS
branch diverged from the main branch just after  <em>9.11.2</em>. Except for
the first item, this sub-section covers <em>drudg</em> changes that were
introduced in the VGOS branch and have been incorporated into the main
branch as of <em>10.0.0</em>. The first item is a fix for a bug that
originated on the main branch.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="preob"></a> Fix missing <code>preob</code> when <code>EARLY</code> start is non-zero.</p>
<div class="paragraph">
<p>This was broken in the implementation of staggered start for FS
<em>9.13.0</em> and has been restored.</p>
</div>
</li>
<li>
<p><a id="broadband"></a> Effective support for <em>broad band</em> racks</p>
<div class="paragraph">
<p><em>drudg</em> provides effective, but not complete, support for broad band
(VGOS) systems with <em>.skd</em> schedule files. The support is not complete
because the FS commands for the broad band systems are under
development. As a result, <em>drudg</em> does not currently generate the
schedule procedures. Instead they are provided verbatim by the <em>.skd</em>
schedule file. Additionally, <em>drudg</em> only provides preliminary support
for Mark 6 recorders (see the <a href="#mk6drudg">Mark 6 recorder support</a>
change below) for use with RDBEs.  The features for broad band support
are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New <code>$BROADBAND</code> block in <em>.skd</em> file.</p>
<div class="paragraph">
<p>This block has one line with four fields for each broad band station
in the schedule:</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The eight character, upper case, station name.</p>
</li>
<li>
<p>The IF bandwidth used per band.</p>
</li>
<li>
<p>The total data rate used for observing</p>
</li>
<li>
<p>The <em>drain rate</em>, the rate at which data is recorded.</p>
<div class="paragraph">
<p>If smaller than the total rate, it is necessary to allow time after
scan for the record buffer to drain.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In version <em>10.0.0</em>, an optional fifth field was added for the
number of extra seconds to allow after the record or buffer time for
slow disks.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="procs"></a> New <code>$PROCS</code> block in <code>.skd</code> file.</p>
<div class="paragraph">
<p>This block holds verbatim copies of the procedures for each broad band
station.  They are used if the rack type in <em>drudg</em> is set to <code>BB</code>.
For this case, the setup procedure&#8217;s name in the <em>.snp</em> file is
<code>setupbb</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The procedures in <code>$PROCS</code> block must use <code>setupbb</code> as the
name of the setup procedure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>$PROCS</code> block has a section for procedures that are the same at
all broad band stations and a section for procedures that are unique
to each station.  The procedures that are common to all the stations
are delimited by lines: <code>BEGIN COMMON</code> and <code>END COMMON</code>.  All lines
between those two are included in every broad band station&#8217;s schedule
procedure file.</p>
</div>
<div class="paragraph">
<p>For each station there are sections for procedures that are unique to
that station. They are delimited by lines: <code>BEGIN <em>STATION</em></code> and <code>END
<em>STATION</em></code>, where <code><em>STATION</em></code> is the eight character, upper case,
station name.  All lines between those two are included in the
station&#8217;s schedule procedure library.</p>
</div>
<div class="paragraph">
<p>The procedures between the <code>BEGIN</code> and <code>END</code> lines must be complete
procedures, starting with <code>define</code> line, including the time stamp
field, and the <code>enddef</code> line. Both lines are required parts of the
structure of a SNAP <em>.prc</em> procedure library for each procedure.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a id="mk6drudg"></a> Mark 6 recorder support</p>
<div class="paragraph">
<p>The <em>drudg</em> Mark 6 support is selected by using the <code>Mark6</code> recorder
type in <em>drudg</em>. Currently this is only for use with RDBE racks. It is
implemented using low-level <code>mk6</code> device communication commands in the
<em>.snp</em> file. These are direct commands to the recorder using its
communication protocol. It is assumed that the recorder had been
initialized and modules mounted and grouped before the schedule
starts. <em>drudg</em> inserts commands at the following points for each
scan:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>After the setup procedure</p>
<div class="paragraph">
<p>The start time and duration of the next recording, as well as the
information needed to form the scan label, are sent. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mk6=record=2020y357d18h00m00s:30:30:357-1800:vo0357:gs;</pre>
</div>
</div>
</li>
<li>
<p>After the call to the <code>preob</code> procedure</p>
<div class="paragraph">
<p>The remaining recording capacity at the total bit rate is queried. For
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mk6=rtime?8192;</pre>
</div>
</div>
</li>
<li>
<p>After <em>data_valid=on</em></p>
<div class="paragraph">
<p>The remaining recording capacity is queried.</p>
</div>
</li>
<li>
<p>After the next <code>source=&#8230;&#8203;</code> command, but also after the end of the
data buffering period if there is one</p>
<div class="paragraph">
<p>The remaining recording capacity is queried.</p>
</div>
</li>
<li>
<p>After the third recording capacity query</p>
<div class="paragraph">
<p>A call to <code>checkmk6</code> is inserted. This would be just before the next
setup procedure. The <code>checkmk6</code> procedure comes from the station or
schedule procedure library and usually contains:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mk6=record=off;
!+2s
mk6=scan_check?;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>record=off</code> command is sent to make sure the recording or
buffering is stopped before the <code>scan_check?</code> and, more importantly,
before the next scan, in case there are slow disks. The two second
wait (<code>!+2s</code>) is intended to give the Mark 6 more time to close the
scan files, in case there are slow disks. Finally, the <code>scan_check?</code>
is used to check the recording quality.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_drudg_changes_relative_to_the_vgos_branch">3.3. drudg changes relative to the VGOS branch</h3>
<div class="paragraph">
<p>This update merges the VGOS branch into the main branch. The VGOS
branch diverged from the main branch just after <em>9.11.2</em>.  Except for
the first three items, this sub-section covers <em>drudg</em> changes that
occurred in the main branch from <em>9.11.2</em> through <em>9.13.2</em>. Those
changes are covered extensively in several update notes in the <em>misc/</em>
subdirectory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>fs9116up.txt</em></p>
</li>
<li>
<p><em>fs9118up.txt</em></p>
</li>
<li>
<p><em>fs91119up.txt</em></p>
</li>
<li>
<p><em>fs9132up.txt</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rather that cover them fully here as well, only a brief summary is
provided below. Please check the files listed above for the full
details. The first three items below are improvements to support for
VGOS.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="wait"></a> Add support for an additional wait at the end of recording
for broadband.</p>
<div class="paragraph">
<p>This allows schedules to include a fixed amount of additional wait for
buffering per station. This seems to be needed for Mark 6 recorders in
configurations that otherwise would require no buffer time for disks
that are slower than nominal.</p>
</div>
</li>
<li>
<p>Fix the GB shown in <em>drudg</em> listings (closes
<a href="https://github.com/nvi-inc/fs/issues/88">#88</a>). The values had been
incorrectly scaled by 1000/1024 in the VGOS branch. This was fixed.</p>
<div class="paragraph">
<p>The size of the GB being recorded in <code>mk6=record=&#8230;&#8203;</code> commands had the
same issue in the VGOS branch as well. This was also fixed. This error
had no impact since the value is only used by the recorder to
determine whether the disk module has enough room for the recording
and the Mark 6 modules were not being used near their capacity limit.</p>
</div>
</li>
<li>
<p>Correct the name of the setup procedure used for <code>BB</code> racks to
always be <code>setupbb</code> regardless of the recorder selected (closes
<a href="https://github.com/nvi-inc/fs/issues/57">#57</a>).</p>
<div class="paragraph">
<p>This makes schedules more useful with other recorders, particularly
<code>none</code> (which is used for single dish tests).</p>
</div>
</li>
<li>
<p>Fix for a bug that caused the IF configuration to be lost if the
schedule specified an unrecognized rack type.</p>
</li>
<li>
<p>Allow different stations to use different BWs.</p>
</li>
<li>
<p>Avoid failing if some stations have unsupported rack and recorder
types in the schedule.</p>
</li>
<li>
<p>Allow more than 16 phase-cal tones in a channel.</p>
</li>
<li>
<p>Fix Tsys to work if the recorder type is <code>none</code>.</p>
</li>
<li>
<p>Add support for FlexBuff recorders.</p>
</li>
<li>
<p>Add partial support for VLBAC and CDAS racks.</p>
</li>
<li>
<p>Add support for DBBC2 racks with FiLa10G units.</p>
</li>
<li>
<p>Change to using DBBC2 rack types <code>dbbc_ddc</code> and <code>dbbc_ddc/fila10g</code>,
but accepting old types <code>dbbc</code> and <code>dbbc/fila10g</code>, respectively, in
schedules for backward compatibility.</p>
</li>
<li>
<p>Add support for the DBBC2 PFB personality, rack types: <code>dbbc_pfb</code>
and <code>dbbc_pfb/fila10g</code>.</p>
</li>
<li>
<p>Add support for two VSI outputs for DBBC2 racks feeding a FiLa10G.</p>
</li>
<li>
<p>Add support for DBBC2 use of the <em>VSI2</em> output by itself.</p>
</li>
<li>
<p>Add support for DBBC2 <code>geo2</code> mode.</p>
</li>
<li>
<p>Change to always treating equipment types as case insensitive.</p>
</li>
<li>
<p>Fix bugs preventing use of  <em>.skd</em> schedules that used non-Nyquist
sampling rates.</p>
</li>
<li>
<p>Add ad hoc support for so-called &#8220;staggered start&#8221; mode.</p>
</li>
<li>
<p>Use only the <em>skedf.ctl</em> control file in <em>/usr2/control/</em>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-29 19:38:04 -0400
</div>
</div>
</body>
</html>
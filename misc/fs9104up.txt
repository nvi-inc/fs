File: /usr2/fs-9.10.4/misc/fs9104up.txt  Version: 1.4  Date: 081015

I. Introduction

This memo is divided into six sections:

   I.   Introduction.
   II.  Changes Since Version 9.9.2
   III. Installation
   IV.  Transferring The Update Archive By DOS Floppy

Please print this notice and read it carefully before installing the
new version.

This patch version is a minor update to 9.10.3

This update is intended for all stations. We encourage all stations to
update as soon as convenient.  This version has been tested with both
Mark 5A and Mark 5B recorders and found to work well.  For Mark 5B
(and 5B+) recorders, the recorder must be controlled with Mark5A
software version 2007y206d or later, run as "dimino".  For more
information on this, please see item (1) in the detailed explanation
of the FS changes below.

This version contains support for Field System Linux 7 (FSL7), based
on Debian Etch.

II. Changes Since Version 9.9.2

This section is divided into three sub-sections: A. Changes in the FS,
B. Changes in DRUDG, and C. Known FS Bugs.  Each sub-section starts
with a summary of the items covered followed by a more detailed
description.

			 A. Changes in the FS

The following is a summary of FS changes.  Items numbered 15 and
larger were added beginning with FS 9.10.1.  Items numbered 25 and
larger were added beginning with FS 9.10.2.  Items numbered 26 and
larger were added beginning with FS 9.10.3.  Items numbered 39 and
larger were added beginning with FS 9.10.4.

1. Support for Mark 5B Recorder added.
2. Support for Mark 5B Sampler Module added.
3. Reduced likelihood of Class I/O race condition.
4. GNPLT Tcal vs frequency plot bug fixed.
5. Standard procedure "greplog" made case insensitive.
6. Systest improvements and update.
7. Method to deny focus to monit and xconsole and to keep "Field System
   Prompt" on top has been added.
8. The "/usr2/fs/misc/stndet.txt" station detector documentation
   brought up to date.
9. Beamwidth scale factor in .rxg files no longer ignored.
10. IF3 command help page includes documentation of standard switch
    wiring.
11. VC command help page has better external filter documentation.
12. Typical gpib device names added to
    /usr2/fs/st.default/control/ibad.ctl comments.
13. Extra delay added for Mark IV decoder communication to improve
    robustness.
14. FS Linux 6 RAID operations notes included.
15. Created missing k42k5station.prc default procedure.
16. Fixed bug in 's' in fmset for "rack=none".
17. Corrected bug for previous (*) values in vsi4=... command
    parameters.
18. Updated standard procedures for new checkmk5.
19. Fixed bank_check to work for Mark5A again.
20. Minor update to mk5b_ops.txt.
21. Fixed "setcl" to generate error if Mark5B has no sync or
    syncerr_gt_3.
22. Source code updated to compile on more modern gcc.
23. Added device specific no_write_ren for ibcon.
24. Fixed parsing error with BBC frequencies with more than three
    digits after the decimal place.
25. Updated "ready_disk" procedure.
26. The "msg" program was enhanced.
27. VEX parser fixed again for modern versions of flex/compilers.
28. The oprin Makefile made compatible with more recent systems.
29. The "fmset" program sends "tvr=0" to Mark 5B regardless of rack
    type.
30. New "-No_X option for "fs" program.
31. TNX command expanded to support multiple instances of the same
    error mnemonic-number pair.
32. Support for the Field System Linux 7 (FSL7) distribution.
33. Fix to .fvw2mrc to make Ctrl-Shift-Esc and Shift-Esc cycle the
    focus without stopping on windows that refuse the focus.
34. Suggested command added to make the bell more audible.
35. Modified disk2file to work around bugs in Mark 5 control program.
36. SNAP procedures can now have more than one argument expansion per
    line.
37. Fix to .fvwm2rc and .xsession to prevent CapsLock, NumLock, and
    ScrollLock from interfering with short-cut keys and ClickToFocus.
38. Added "m5" and "5m" to the "red" list in erchk; "ib" was removed
    from the "red" list.
39. Problems that prevent compilation on some non-FSL distributions
    (particularly RedHat) due to Digiboard headers have been solved.
40. Extraneous Mark5 communication by the bank_check command removed.
41. Error checking for illegal mk5b_mode command parameters added.
42. The 'plotlog' utility expanded with PCal amplitude Tsys
    normalization, improved phase difference plots, K5 PCal plotting,
    and plot selection.
43. New 'monpcal' PCal display utility added.
44. New Python based 'logpl', old logpl re-named 'logpl1'.
45. Bug that prevented 'logpl1' (old 'logpl') command mode from
    working fixed.
46. Obsolete Tsys commands removed from default 'station' SNAP
    procedure files.
47. Some files included that may help with non-CUPS Dymo support.
48. Bug in 'monit5' that caused crash of 'Mark 5 Remaining Capacity'
    display on some systems fixed.
49. Bug in 'setcl' that caused erroneous 'sc  -13' errors at some
    stations fixed.
50. Increase maximum errors in fserr to 5000.

A more detailed discussion of these changes follows.

1. Support for Mark 5B Recorder added.  This version of the FS is the
   first to support the Mark 5B recorder.  The Mark 5B should be
   operated using the "dimino" control program.  The "dimino" program
   name is actually an alias for the "Mark5A" program used with Mark5A
   recorders.  Invoking the program with the name "dimino" changes its
   behavior to support a Mark5B recorder.  Even though some other
   program names for Mark5A will also support the Mark 5A, the FS
   compatibility for Mark 5B operations has only be tested with and is
   only supported when the name "dimino" is used.  The FS requires
   Mark5A software version 2007y206d or later for Mark 5B support.  FS
   operation with a Mark 5B recorder is described in
   /usr2/fs/misc/mk5b_ops.txt.  You are strongly encouraged to read
   this document to get an overview and also a detailed understanding
   of how to use the FS with a Mark 5B recorder.

   The user visible manifestations of Mark 5B support in the FS are:
   new recorder types "mk5b" and "mk5b_bs", new display/control in
   "fmset" program, new SNAP command "mk5b_mode", small changes in
   some existing Mark 5B command outputs, and new operations
   procedures.

   The new recorder types "mk5b" and "mk5b_bs" select simple and FS
   controlled bank switching Mark 5B operation respectively.  These
   types are entirely analogous to the "mk5a" and "mk5a_bs" recorder
   types for Mark 5A.  What is different however is that use of the
   Mark 5A types in the control file is optional ("mk5a_bs" is implied
   if a non-Mark5 recorder type was selected), but for Mark 5B, the
   type must be set explicitly in the control file.

   The "fmset" program now includes addition display information and
   control functions related to the Mark 5B recorder.  The new
   functions include commands to correct errors in the configuration
   based on the hardware in use.  The use a rack with a Mark 5B
   Sampler module with a Mark5B recorder affects the behavior of
   "fmset" because there are stricter checks that are possible on the
   timing configuration of the Mark 5B recorder.  The "setcl" program
   will report errors if the timing configuration is not correct based
   on the selected equipment types.  This is all described more fully
   in /usr2/fs/misc/mk5b_ops.txt.

   A new command "mk5b_mode" was created to allow the setting of the
   Mark 5B recorder.  It is not sufficient to set the mode with a
   "mk5=..." command because the FS needs to know the details of the
   set-up and the "mk5b_mode" is used to communicate this information
   to the FS.

   Some of the existing Mark 5 commands have changes in their display
   parameters when used with a Mark 5B.  The differences are
   documented in the help pages for the commands.  These changes were
   caused by changes in the underlying syntax of the recorder's
   control program.

   The "data_check" and 'scan_check" commands now work for Mark 5B.

   Documentation on new operation procedures is included in the file
   /usr2/fs/misc/mk5b_ops.txt.  The most important change is that
   whenever the Mark5B control program "dimino" is restarted, it is
   necessary for the user to use "fmset" to verify that the Mark 5B
   has the correct time.  The displayed time of the recorder should
   compared to a hardware clock.  After a power-up of the Mark 5B, a
   "sync" commands must be used in "fmset" before setting the time.

   Other internal changes include: "setcl" being able to set the FS
   time from the Mark 5B; support for mk5_mode selected tracks in
   detector selections: "formvc", formif", and "formbbc", in ONOFF,
   TPICD, and various TSYS related commands.

2. Support for Mark 5B Sampler Module added.  This version of the FS
   is the first to support the Mark 5B Sampler Module.  If a rack with
   a Mark 5B Sampler modules is in use, it must be specified as "mk5"
   or "vlba5" as appropriate, in the "equip.ctl" control file.  The
   Mark 5B Sampler Module contains a VSI4 board, which is controlled
   by the new "vsi4" SNAP command.  The selection of a "5" rack with a
   Mark5B recorder affects the behavior of "fmset" and "setcl",
   because there are stricter checks that are possible on the timing
   configuration of the Mark 5B recorder.  FS operation with a Mark 5B
   Sampler Module is described in /usr2/fs/misc/mk5b_ops.txt.  You are
   strongly encouraged to read this document to get an overview and
   also a detailed understanding of how to use the FS with the Mark 5B
   Sampler Module.

3. Reduced likelihood of Class I/O race condition.  Due to the fact that
   Linux is not a real-time operating system, it is not possible to
   assure that certain sections of code are executed within the same
   processor time-slice.  As a result, in certain situations in
   "matcn", "mcbcn", and "ibcon" a race condition could arise.  This
   would occur when the last of a series of class records had been
   read, thereby normally deallocating the class number.  There is
   normally a subsequent "class clear" operation to clean-up the class
   number.  However, if the process finished it time-slice on the
   processor before the clear, the class number might be re-allocated
   before the class clear finally did occur.  The class clear then
   might deallocate the class number while it was use by another
   program and the other program would abort with "class check" error.
   It is not possible to eliminate the possibility of this happening
   in all cases without significant recoding.  However, the chances of
   it happening have been greatly reduced by moving the class clear
   operation to just after the last class record is read in these
   three programs.  This minimizes the amount of time during which the
   race condition could occur.  Previously this amount of time could
   have been quite significant.  Indications from testing indicate
   that this has greatly reduced the frequency (eliminated as far as
   we know) an already rare problem.

4. GNPLT Tcal vs frequency plot bug fixed.  A bug related to plotting
   the Tcal vs.frequency curve when two points had the same Tcal value
   was fixed.  Thanks to Andrea Orlati (Medicina) for providing this
   fix.

5. Standard procedure "greplog" made case insensitive.  Thanks to
   Michael Lindqvist (Onsala) for suggesting this.

6. Systest improvements and update.  Several improvements were made in
   the "systests" utilities.  In general, the Mark 5B Sampler Module
   and recorder are now supported .  Sample procedure libraries
   systvsi4.prc and systvsi42.prc for use with systems with a vsi4
   board (Mark 5B Sampler Module) are now included.  The systests.txt
   file includes directions on how to install these from scratch or
   change an existing installation to support a vsi4 board.  The
   plotlog utility: plot pcal amplitude versus phase ("-t" option);
   can now handle historical logs with old style time-tags; includes
   more editing features for data plots (cable cal "-c", Tsys "-t",
   and pcal data "-z"); provides a mechanism to plot "tsys" related
   data (tpi, tpical, tpdiff, tpzero, tpgain, and tpdiffgain) with the
   new "-s" option; and separates the "-1anw" and "-p" plots from the
   regular output.  The samplestat, pcalamp, pcalspur, and pcalimage
   utilities now plot only the first iteration of samples in a log
   file and ends with a warning message if it found additional
   samples.  The v/chk1024 procedures, schedule files, and analysis
   utility now: report the decoder firmware version; clear the aux
   data field for easier reading; include "scan_check" as one of the
   checks, have improved raw output listings; fixed an aux data
   parsing bug that made bad tracks look good; added skipping the AUX
   data check as an option; and discard prior results for previous
   set-ups.

7. Method to deny focus to monit and xconsole and to keep "Field System
   Prompt" on top has been added.  An annoyance on the X-display has
   been that sometimes the monit and xconsole windows get the input
   focus.  A method to defeat this has been included.  A method to
   keep the "Field System Prompt" on top so it doesn't get lost has
   also been included.

8. The "/usr2/fs/misc/stndet.txt" station detector documentation
   brought up to date.  This documentation had not been updated to
   reflect the new calibration scheme.  This has been corrected.

9. Beamwidth scale factor in .rxg files no longer ignored.  An error
   in the handling of the beam-width scale factor term causing it to
   ignored has now been corrected.  Thanks to Andrea Orlati (Medicina)
   for pointing this out.

10. IF3 command help page includes documentation of standard switch
    wiring.  This should make it easier for stations to find switch
    documentation.

11. VC command help page has better external filter documentation.
    The handling of the values for external filters is now described
    fully.

12. Typical gpib device names added to
    /usr2/fs/st.default/control/ibad.ctl comments.  This should make
    it easier to know what the useful choices are.

13. Extra delay added for Mark IV decoder communication to improve
    robustness.  An extra delay between consecutive Mark IV Decoder
    communications was added.  It was determined empirically that the
    decoder was not ready for input even though it had responded with
    its prompt.  The FS now makes sure that at least 4 centiseconds
    since the last decoder reply before sending the next command.  No
    more delay is added than is needed if the previous communication
    was not to the decoder.  Thanks to Dan Smythe (Haystack) for
    finding and suggesting a fix to the problem.  Mark IV decoder
    communications are considerably improved with this change.

14. FS Linux 6 RAID operations notes included.  Documentation on disk
    rotation, and other procedures required for using the RAID system
    that is standard in FS Linux 6 (based on sarge) are included in
    the file /usr2/fs/misc/RAID.txt.  Stations running FS Linux 6 with
    the software RAID1 installed should read this document.  It does
    not apply to other stations.

15. Created missing k42k5station.prc default procedure.  The default
    example procedure for the K42 rack with a K5 recorder was missing.

16. Fixed bug in 's' in fmset for "rack=none".  This bug made the Mark
    5B "sync" function unavailable when equip.ctl had the rack set as
    "none".

17. Corrected bug for previous (*) values in vsi4=... command
    parameters.  This bug prevented the "*", used for previously
    commanded values, for command parameters from working.  Note this
    is different from the usage in this command of not specifying a
    value, which is the "default" or null parameter which causes the
    parameter value to not be commanded.  This behavior is different
    from most other SNAP commands, where the default (if it is
    defined) commands that value to the device rather cause no command
    to be issued..

18. Updated standard procedures for new "checkmk5".  Updated for new
    contents which now includes "mk5=get_stats?" and "mk5=status?".
    This was done as part of removing "postob_mk5" from use in the
    .snp file.  The new scheme places the post-observation Mark 5
    checks in a single procedure in a similar fashion to the way
    parity checks were done with tape.  The use of a single
    "mk5=get_stats?" command is compatible with both single and eight
    disk modules.  For eight disk modules, each disk will get sampled
    every eighth observation, which should be more than adequate.

19. Fixed bank_check to work for Mark 5A again. Now Mark 5A is
    supported properly.

20. Minor update to mk5b_ops.txt. The changes include: some typos for
    rack names (..."4v" vs ..."5") were fixed, Changed "DIMino" to
    "dimino", included instructions for updating "matad.ctl" for Mark
    5 Sampler Module, and noted that for FS operations "Mark 5B" and
    Mark 5B+" are the same.

21. Fixed "setcl" to generate error if Mark5B has no sync or
    syncerr_gt_3.  Since "setcl" is run every "midob", this can help
    isolate when a clock jump may have occurred.

22. Source code updated to compile on more modern gcc.  This mainly
    consisted of improvements in include files to support more modern
    version of gcc, such as > 4.0.  Thanks to Sekido Mamoru (NICT) an
    Chris Phillips (CSIRO) for sending changes.

23. Added device specific no_write_ren for ibcon.  If 8 is added to
    the value of the parameter after the device name in the ibad.ctl
    file, the no_write_ren enable feature can be turned on selectively
    for that device (rather than using the no_write_ren global feature
    in the ibad.ctl control file.  Please see the updated and more
    extensively commented example file
    /usr2/fs/st.default/control/ibad.ctl for more details.

24. Fixed parsing error with BBC frequencies with more than three
    digits after the decimal place.  Previously, the bbcXX commands
    (for VLBA type racks) failed to report an error and did nothing
    useful when more than three digits were supplied after the decimal
    point in the frequency.  This is now fixed; an error is reported.

25. Updated "ready_disk" procedure.  The "ready_disk" procedure was
    updated to include the Mark 5 recorder query commands that had
    previously been only in "exper_initi".  This is intended to make
    sure the query information is retrieved for stations that don't
    bother to set-up their Mark 5 until the schedule halts in the
    "ready_disk" procedure.  It is recommended that the Mark 5 be
    set-up before the schedule is started, but this will help make
    operations more robust if it is forgotten.  Please note that
    during a power failure recovery (or other schedule restart), the
    "ready_disk" procedure will not normally be executed
    automatically, therefore the Mark 5 must be set-up prior to
    restarting the schedule.

26. The "msg" program was enhanced. Two changes were made: (1)
    J. Quick (HartRAO) enhanced the program so that it does not report
    "*" as the source if that parameter we used as the source name in
    the most recent "source=..." command. (2) Module sizes F, G, and
    H were added to the disk inventory.  Please note that you can use
    the Tab key to advance through the list.  Normally, every input
    box must be filled, but if you use "na" as your entry in the box
    that is the first for which you have no modules of that size or
    larger, no more input will be required.  For example, if you have
    0 As, 1 B, 2 Cs, and no larger modules, you can put "na" in D
    entry box and skip the rest.

27. VEX parser fixed again for modern versions of flex/compilers. Due
    to an oversight in 9.10.2, the wrong version of vex.yy.l was
    included.  This has been fixed.

28. The oprin Makefile made compatible with more recent systems.  The
    variable "CC" is no longer set to special version of gcc. This
    removed a problem with "Making" oprin on some recent Linux
    distributions.

29. The "fmset" program sends "tvr=0" to Mark 5B regardless of rack
    type.  This was erroneously limited to only Mark 5 racks before.
    This caused some confusion about the Mark 5B recorder TVR LED but
    was otherwise benign.

30. New "-No_X" option for "fs" program.  In order to provide a way to
    run the FS in an environment where an X interface is not
    available, the FS's main program "fs" can now be started with a
    "-No_X" option.  This will cause all programs specified as type
    "x" in the "fspgm.ctl" and "stpgm.ctl" control files to be
    skipped, i.e., not run, at FS start-up. The "x" is intended to be
    mnemonic for 'uses X-windows'.  The program type in the control
    files is the second parameter on the line and is normally "n".
    The version of "fspgm.ctl" that comes with the FS distribution has
    an "x" as the type for "oprin", which is currently the only
    standard "fspgm.ctl" program that uses X.  (Please don't modify
    "fspgm.ctl" to change the type of programs or any other items in
    the file.  This file is internal to the FS.  Modifying this file
    can impair the functioning of the FS.)  Station programs in the
    "stpgm.ctl" control file can also be specified as type "x", which
    extends this functionality to station programs.  Care must be
    taken with this feature to make sure that some necessary
    functionality of a station program is not disrupted.  Other
    mechanisms for suppressing X usage can and will be provided if the
    "x" program type is not sufficient for some application.

    If "oprin" is disabled by using the "-No_X" option, the FS is
    essentially running without a way to make input (and any
    functionality provided "x" type station programs in "stpgm.ctl"
    will also be absent).  Output will continue to appear as usual in
    the window where the FS was started.  The operator will need to
    invoke either the "oprin" or "inject_snap" programs to send
    operator input to the FS.  Both programs can be run either
    interactively in a different window or embedded in a script.

    If an "oprin" program is started separately from the FS. i.e.,
    "stand-alone", it can read its input interactively or from a file.
    The latter using standard UNIX I/O redirection for the input.
    This is a feature that Ari Mujunen added many years ago, but has
    previously not been mentioned.  In the latest version, a
    stand-alone "oprin" will exit without terminating the FS when it
    reaches the end of input file.  When a stand-alone "oprin" is
    being used interactively, it can be stopped without terminating
    the FS by using the new "end_oprin" command.  This command is only
    available in a stand-alone "oprin".  An example of how input
    redirections might be used is to put some commands in a file,
    maybe named "it", and then while the FS is running (with or
    without -No_X), you could using the following command in a shell:

       oprin <it

    to execute the commands in the "it" file.  The FS will continue to
    run after all the commands in the file have been executed (unless
    one of them is "terminate").  If a stand-alone "oprin" receives
    input when the FS is not running, it will terminate silently.

    As a reminder, please note that the "inject_snap" program can
    execute one command at time given to it as an argument and can
    optionally wait (option "-w") for the command to finish.  If it
    waits, it can return the log results of simple SNAP commands,
    which can be captured in scripting languages.  If the
    "inject_snap" command is embedded in a script, the FS can
    effectively be controlled to do almost any normal FS function from
    the script.  In other words, you can embed the FS itself into the
    scripting language.

31. TNX command expanded to support multiple instances of the same
    error code-number pair.  The TNX command is used to suppress the
    display (logging always occurs), of individual error messages if
    the operator determines they cannot be prevented and/or are
    benign. (TNX is an abbreviation for "thanks".)  In previous
    versions of the FS, you could only suppress all of the error
    messages for a given code-number pair, even though there can be
    multiple instances.  For example, the error code-number pair for
    an out of range for Tsys value is qk,-211 for all modules.  If you
    had suppressed this error with "tnx=qk,-211", all Tsys error
    messages for all modules would have been suppressed not just a
    specific module that was known to be broken.  The behavior has
    become more specific with this FS release. If only one, qk,-211
    error instance has occurred, then "tnx=qk,-211" would suppress
    only that instance.  If more than one qk,-211 error instance has
    occurred, i.e., for different modules, the same command would
    generate a prompt for the operator to pick which instance to
    suppress.  This allows the operator to suppress display of
    specific instances of code-number errors that cannot be avoided,
    without suppressing ones that would be unexpected and should be
    investigated.  Please see "help=tnx" help page listing for more
    details.

32. Support for the Field System Linux 7 (FSL7) distribution.  Several
    changes were made to make the FS compatible with the FSL7, which
    is based on Etch.  These changes may also help make the FS
    compatible with other Linux distributions.  Jonathan Quick
    (HartRAO) is to be profusely thanked for his hard work both on the
    FSL7 and modifications he made to ibcon to make it compatible with
    FSL7.  Thanks also to Ari Mujunen (Metashovi) for tips on how to
    detect the new version of readline.  The four most significant
    changes are: (A) changes to oprin and PFMED to make them work with
    readline5.  If readline version on the system is detected to be
    compatible with oprin and PFMED without modification, the system
    version will be used instead of the older modified readline
    included with the FS source. (B) Support for the third version of
    the open source GPIB driver.  Like the older versions, this
    version does NOT with work certain legacy GPIB devices.  However,
    at this time, this is the only driver supported by FSL7.  If your
    station has one or more legacy devices that the open source driver
    does not support, you can consider purchasing an NI 232/GPIB
    converter to use with a serial port.  If you wish to do this,
    please contact Ed (Ed.Himwich@nasa.gov) for more details.  (C) The
    print2dymo script has been revised.  In addition to now including
    options for FSL5, FSL6, and FSL7, it has been restructured
    slightly to make it easier to debug problem cases, if they occur.
    Please see the default version "/usr2/fs/misc/print2dymo" for more
    details. This is also describe under the "Changes in DRUDG"
    section below.  (D) Documentation.  Three files were created or
    updated in /usr2/fs/misc.  The RAID.txt document, which describes
    the usage of RAID1 disks under FSL6 and (now) FSL7 was updated.
    Three new files were added: FSL7_PC_Checkout.txt, FSL7_Upgrade.txt
    and FSL7_End_User.txt were added.  These files describe,
    respectively, the check-out procedure used at GSFC for new PCs,
    the procedure for upgrading a PC to FSL7 in the field, and the
    customization steps for a new or upgraded PC.  They are included
    in the FS distribution as references for stations doing their own
    PC check-out or upgrading their system.

33. Fix to .fvw2mrc to make Ctrl-Shift-Esc and Shift-Esc cycle the
    focus without stopping on windows that refuse the focus.  These
    keyboard short-cuts, which allow the focus to circulated through
    the stack of windows, were partially broken by setting the Monit
    and xconsole windows to to refuse the focus.  A solution for this
    has been found.  We are still looking for a fix to make the window
    that gets the focus in this way to come to the top.  If you have
    any ideas, please sent them to Ed (Ed.Himwich@nasa.gov).  A
    perhaps sufficient alternative, at least under FSL7, is to press
    the Alt key and then use the Tab key to cycle through the list of
    windows.  When the Alt key is released the selected window is moved to
    the top and gets the focus.

34. Suggested command added to make the bell more audible. An "xset b
    ..." command can be added to the oper (and prog) .xsession file to
    make the bell more audible.  An example is included as a comment
    in the default versions of this file,
    "/usr2/fs/st.default/oper/.xsession" (and ".../proc/.xsession").
    This may be helpful if the bell used to report errors is not
    audible in the room where your computer is located.  Please see
    "man xset" for more information on the parameters of the "xset"
    command.

35. Modified disk2file to work around bugs in Mark 5 control program.
    An extra "scan_set=;" is now transmitted to the Mark 5 to work
    around a bug in versions 7y222d and 7y206B of Mark5A.

36. SNAP procedures can now have more than one argument expansion per
    line.  Instead of one, there can now be an arbitrary number of
    argument replacement characters, "$", in SNAP procedure lines.
    Each "$" is replaced with the argument passed to the procedure
    when invoked.  The "arbitrary" limit on the number of replacement
    characters is actually the total maximum command length of the 512
    characters for the resulting command.  The total resulting maximum
    length is also the effective limit on the length of the argument
    passed.  However, the command invoking the procedures is also
    subject to the maximum command length and this may limit the
    length as well.  Note because of log formatting issues, the last
    few characters (maximum of about 34) of the commands that approach
    the limit may not be logged.

37. Fix to .fvwm2rc and .xsession to prevent CapsLock, NumLock, and
    ScrollLock from interferring with short-cut keys and ClickToFocus.
    These changes correct these problems while allowing NumLock to
    still be used for keypad entries in xcalc.  Please note that there
    may still be problems with using the keypad in "msg".  Please see
    the "xmod" command in the default
    "/usr2/fs/st.default/oper/.xsession" and "IgnoreModifiers" command
    in "/usr2/fs/st.default/oper/.fvwm2rc" files for examples.

38. Added "m5" and "5m" to the "red" list in erchk; "ib" was removed
    from the "red" list.

39. Problems that prevent compilation on some non-FSL distributions
    (particularly RedHat) due to Digiboard headers have been solved.
    This fixed an erroneous fix in 9.10.3 for the same problem. That
    fix was not backward compatible with the previous behavior. It may
    be that there are other cases that have not been anticipated.
    Please inform Ed (Ed.Himwich@nasa.gov) if you encounter a problem.

40. Extraneous Mark5 communication by the bank_check command removed.
    When the bank did not need be changed the remaining recording time
    was checked once more than necessary.

41. Error checking for illegal mk5b_mode command parameters added.
    These error checks were missing.

42. The 'plotlog' utility expanded with PCal amplitude Tsys
    normalization, improved phase difference plots, K5 PCal plotting,
    and plot selection.  The new option '-j' can be used to cause Pcal
    data to scale by the square-root Tsys data by channel.  The
    square-root of the lowest non-zero Tsys value for each channel is
    used for the normalization.  The new option '-k' can be used to
    specify an arbitrary Tsys value for normalization of all channels
    if the there is a problem with the value chosen by
    default. Normally the single-side-band (SSB) Tsys that goes with
    the channel of the PCal amplitude is used for normalization.
    However, this data is not normally available for Mark III/IV/5
    channels when dual-side-band (DSB) data is being recorded.  For
    this reason, by default, DSB Tsys data will be used if it is
    available and if not, then the SSB data will be.  Despite the fact
    that this seems backward it is actually usually what is most
    useful.  The new '-b' option can be used to force SSB Tsys data
    use if there is a problem with the DSB data, such as a few
    anomalous DSB points in the log.  The Tsys and Pcal amplitude
    values are matched by finding the values that are closest together
    in time.  The match is then accepted only if the time of the
    values is within 60 seconds.  The new parameter '-u' can be used
    to specify a different maximum time limit.  Regardless if whether
    a match meets the time limit criteria, each value is only matched
    to the single value closest in time, i.e., it cannot appear in
    more than one match.  The matching of Pcal phase values for
    forming phase differences of phases from two different channels
    was improved to use the same new algorithm as is now being used
    for Tsys and Pcal amplitude data, including the time limit being
    modifiable by the '-u' option.  This change improved the results
    more than expected.  K5 format PCal data is now supported.  The
    new '-e' and '-g' options can be used to select which plots are
    generated by excluding or including, respectively, specific plots
    using regular expression matching strings based on the plot titles.
    Simple strings will work, but the strings can also be more
    complicated Perl regular expressions to make more complicated
    selections.  The new (and old) features are also described in the
    help output from plotlog, available using 'plotlog -h'.

43. New 'monpcal' Pcal display utility added.  This X widget provides
    a text display of Pcal amplitude and phase for channels being
    monitored using the "pcsample" SNAP procedure, which uses the Mark
    IV decoder.  The new default configuration for the fvwm2 window
    manager will allow this program to be started from a selection on
    the center mouse button menu or using the short-cut keys
    Control-Shift-6.  Once the window is open, you can move it to
    wherever you find convenient if you want to keep it open.  Like
    other monit windows, it will not received the focus, but we
    haven't yet been able to completely control where it is placed on
    the display automatically.  The utility itself has some menu
    options if you right-click on its window (not on the outside
    decorations provided by the window manager).

    The "python-tk" package must be installed on your system for
    "monpcal" to function.  It should be installed by default on FSL7
    systems.  If you need to install it and your distribution is FSL5
    or later, please be sure that your '/etc/apt/sources.list' file
    lists your specific distribution: 'woody', 'sarge', 'etch'
    etc. and not 'stable'.  Please refer to the installation section
    of '/usr2/fs/systests/systests.txt' for details on setting your
    'sources.list' file including use of the archive server.  If you
    have FSL4 or an earlier FSL distribution or a non-FSL
    distribution, please contact Ed (Ed.Himwich@nasa.gov) for more
    information.

44. New Python based 'logpl', old logpl re-named 'logpl1'. Intern
    Tomas Gille has created a new version of 'logpl' with many new
    features and extensions, including: XY plots, plotting of pcal
    output from decode4 commands, many new plotting capabilities.  The
    program is largely backward compatible with the old version which
    is now called 'logpl1'.  The command file input mode is not
    completely backward compatible, but has similar (expanded)
    capabilities.  We have provided updated versions of the standard
    command files "cover" and "cexper" and a standard 'logpl.ctl'
    control file to run them with.  The old versions are now in
    '/usr2/fs/logpl1'.  If you have any problems translating any
    custom command or control files, please send them to Ed
    (Ed.Himwich@nasa.gov) and we will translate them for you.  The
    interactive menus are different from but have similar capabilities
    to the old 'logpl' (now 'logpl1').  The new 'logpl.ctl' control
    file is backward compatible with the old version but has expanded
    capabilities.  Complete documentation is available in:

     /usr2/fs/logpl/logpl2doc.odt

    and the new program has an extensive help system.  The new version
    requires Python 2.4 (or later) and Tkinter.  If your systems does
    not have these packages and you cannot install them, the old
    version of 'logpl' is still available as 'logpl1'.  You will need
    to rename, or copy, your old control file to 'logpl1.ctl' to use
    it with 'logpl1'.

45. Bug that prevented 'logpl1' (old 'logpl') command mode from
    working fixed.  This bug appears to fairly old, so it may be that
    no one is using the interactive command mode in 'logpl1'.

46. Obsolete Tsys commands removed from default 'station' SNAP
    procedure files.  Before system temperature measurements were
    switched fort using 'caltsys' in 'preob', the necessary commands
    were split between 'reob' an 'midob', some if the commands in
    'midob' had not been removed from the default files in
    '/usr2/fs/st.default/proc/'. Thanks to Andrey Mikhailov (IAA) for
    reporting this.

47. Some files included that may help with non-CUPS Dymo support.
    David Graham (MPIfR) provided some files that may be useful for
    implementing Dymo when the CUPS printing system is not installed
    on the FS PC.  The files are in '/usr2/fs/misc/dymo_non-CUPS'.
    A 'dymo_read.me' file is included.

48. Bug in 'monit5' that caused crash of 'Mark 5 Remaining Capacity'
    display on some systems fixed.  Thanks to Jonathan Quick (HartRAO)
    for pointing this out and identifying the fix.

49. Bug in 'setcl' that caused erroneous 'sc -13' errors at some
    stations fixed.  Thanks to the team at Hobart for reporting this
    problem.

50. Increase maximum errors in fserr to 5000.  This allows additional
    room for station errors and future expansion.

			 B. Changes in DRUDG
				   
DRUDG opening message date is 2008Oct08.

The following is a summary of DRUDG changes.  Items numbered 12 and
larger were added beginning with FS 9.10.1.  Items numbered 17 and
larger were added beginning with FS 9.10.2.  Items numbered 20 and
larger were added beginning with FS 9.10.3.  Items numbered 26 and
larger were added beginning with FS 9.10.4.

1. Support for two new rack types: Mark5 and VLBA5 (racks with Mark5B
   Sampler Modules).
2. Mark5B recorder support.
3. DRUDG option 11 was modified to add these new rack and recorder
   types.
4. New patching algorithm.
5. Overhaul of equipment and equipment_override options in skedf.ctl.
6. "postob_mk5a" changed to "postob_mk5".
7. "checkmk5a" changed to "checkmk5".
8. Change in the naming convention for procedure names where different
   stations have different bandwidths.
9. Support for Dymo printer for the FS Linux 6 (based on "Sarge").
10. Internal change to procs.f
11. Internal change to common blocks.
12. No more "postob_mk5".
13. "Unknown" option removed from option 11.
14. DRUDG now strips all leading spaces and tabs from the "skedf.ctl"
    file.
15. Anomalous behavior with vex files and "preob" fixed.
16. Length and continuous times in scan_name command improved.
17. Rack and recorder type in skedf.ctl are now case insensitive.
18. The "ready_disk" procedure was moved before the first setup
    procedure call.
19. Bug in labels for previous 9.10.x versions fixed.
20. Extraneous "setup" commands while recording removed.
21. Line numbers added to summary listing when recorder is "none".
22. Comment added for VCs/BBCs that are set-up but not used.
23. Additional sample bit-stream mask suggestion for Mark 5B recorders
    when the rack is none
24. Dymo printing bugs in FSL6 fixed and support for FSL7 added.
25. Bug in setting Mark5 equipment from skedf.ctl "equipment" line
    fixed.
26. Pointing files (DRUDG option 2) update for VLBA.
27. Printing Mark5 lables improved for logs with long pre-ambles.
28. A bug was fixed in handling the '$schedule' and the '$tmp'
    parameters in the 'skedf.ctl' control file.

A more detailed discussion of these changes follows.

1. Support for two new rack types: Mark5 and VLBA5 (racks with Mark5B
   Sampler Modules).  These are Mark4 and VLBA4 racks with Mark IV
   formatter replaced with a Mark 5B Sampler Module.  In these cases,
   DRUDG will issue use the new "vsi4" command to set-up the sampler.
   In these case, formatter setup commands (form/trackform/tracks) are
   no longer used.

2. Mark5B recorder support.
   a. no mk5=play_rate command in set-up procedures
   b. no mk5=mode ... or mk5=mode? commands in set-up procedures
   c. for racks with Mark 5B samplers (Mark5, VLBA5), new in set-up
      procedures:

        mk5b_mode=ext, bit_mask, decimation

          "ext" is literal, "bit_mask" is hex, corresponds to tracks
          from vsi4 board to record, decimation is the 32/sample_rate

      If the rack is not Mark5 or VLBA5, the .prc file contains the
      following:

        "please change the following mk5b_mode command to reflect
        "the desired channel assignments and effective sample rate
        mk5b_mode=ext:0xffffffff:1

   d. add mk5b_mode command to monitor configuration after mk5b_mode=...

   e. In sched_initi replace mk5=os_rev1? and mk5=os_rev2? with
      mk5=os_rev?  also for "ss_rev?"

3. DRUDG option 11 was modified to add these new rack and recorder
   types.  They were added at the bottom of the list so that numbers
   associated with equipment types would be preserved, e.g., recorder
   type 4=vlba.  In order to keep all of the text on one screen, the
   output was reformatted.

4. New patching algorithm.  For Mark3/Mark4/Mark5 racks, implemented
   the following patching algorithm which was designed to minimize
   cable changes.

   ! For "geodesy" schedules, use these rules :
   !  0. If on IF3, always High.
   !  1. If the upper edge of the recorded BandPass (which can possibly be
   !     double sideband and is BW dependent) is below 230 MHz, pick low.
   !  2. If the lower edge of the recorded BP is above 210, pick high.
   !  3. For others if the center is of the recorded BP is below 220, pick
   !     low, otherwise high.
   !
   !    For VC1, 2, 3, and 9, 10
   !      apply these tests in order 1,2,3.
   !    For VC4, 11, 12, 13, 14  and 5-8 if IF1 or IF2
   !      apply them 2,1,3
   !
   ! If the schedule is an 'astro' schedule apply the following:
   !
   !    I. Calculate all the patches according to geodesy rules.
   !       A) If frequencies are X/S, use these and stop here;
   !       B) for others go to step II.
   !    II. For each LO:
   !       A) If step (I) results in all high or low for an LO,
   !    use that.
   !       B) If for an LO step (I) results in mixed patching, check which
   !       patch is more common, high or low, then apply one of IIa, IIb,
   !        or IIc:
   !    IIa. If high is more common, check low patches, for any channels
   !    (considering both sidebands if both are recorded) where the lower
   !    edge is above 210, change those VCs to high.
   !    IIb. If low is more common, check high patches, for any channels
   !    considering both sidebands if both are record) where the upper edge
   !    is below 230, change those VCs to low.
   !    IIc. If equal high and low, try IIa and IIb, choose the one that
   !    makes the most patches the same.  If still equal, pick IIa.


5. Overhaul of equipment and equipment_override options in skedf.ctl.
   Code dealing with these options was completely re-written in the
   process of fixing a bug reported by Kokee during rd0705.

   The equipment specified in the 'equipment' line will be used in the
   schedule if one of the following two conditions exist:

     a) The rack and recorder in the schedule are specified as unknown.
     b) The 'equipment_override' option is on.

   If the 'equipment' option is turned on in skedf.ctl, DRUDG will
   check that the equipment specified is valid.  If not, it will exit
   with an error message.

   If 'equipment_override' is turned on, DRUDG will check to make sure
   that equipment has actually been specified, i.e., that the
   'equipment' line is on, and has valid entries.  If not, DRUDG will
   exit with an error message.

6. "postob_mk5a" changed to "postob_mk5".  The procedure called by the
   schedule to execute the local "postob" procedure and collect Mark 5
   recorder disks statistics.  Since DRUDG generates both the call to
   the "postob_mk5" procedure and the default version in the
   experiment procedure library, this change is normally transparent
   to users.

7. "checkmk5a" changed to "checkmk5".  This procedure is used to
   execute the "scan_check" or "data_check" command to check on
   recording quality when the recorder is stopped after an
   observation.  To be compatible with this change, stations must
   rename the "checkmk5a" procedure in their station procedure library
   to "checkmk5".

8. Change in the naming convention for procedure names when different
   stations have different bandwidths.  DRUDG embeds the bandwidth in
   some procedure names such as "vcsx8".  Previously if different
   stations recorded at different bandwidths, DRUDG would use the
   bandwidth of the first station.  For example, in r1284 Fortaleza,
   the first station in the sked file, recorded at 4 MHz, and the
   other stations such as Westford recorded at 8 MHz.  Prior versions
   of DRUDG incorrectly use 4 MHz in the procedure name for Westford.
   This new version uses the correct bandwidth.

9. Support for Dymo printer for the FS Linux 6 (based on "Sarge").
   The CUPS driver in FS Linux 6 behaves differently compared to the
   one in FS Linux 5.  The effect is that Dymo labels in FS Linux
   printed at 1/3 size.  We have included an example command, in the
   new example print2dymo procedure in /usr2/fs/misc/print2dymo, that
   inserts a line in the postscript file to rescale the output.  You
   will need to uncomment this line (and comment out the FS Linux 5
   line) and install this version if you have FS Linux 6.  As a result
   of the FS Linux 6 support, the Dymo "label_size" in skedf.ctl has
   been changed for FS Linux 5 and FS Linux 6 users.

10. Internal change to procs.f.  The large routine procs.f, which
    comprised over 3,000 of code, or roughly 40 pages when printed
    out, was broken into smaller pieces.

11. Internal change to common blocks.  Several items used only by SKED
    were removed from shared common blocks used by DRUDG & SKED and
    put in common blocks used only by SKED.  In the process, several
    obsolete variables which were no longer used were also removed.
    These changes should have no impact on users, but should make the
    code easier to maintain.

12. No more "postob_mk5". Now the .snp file calls the standard
    "postob" procedure; no "postob_mk5" procedure is added to the
    experiment .prc file.  The Mark 5 post-observation checks have
    been merged into the "checkmk5" local procedure.  .

13. "Unknown" option removed from option 11.  DRUDG will still
    indicate if the equipment type is unknown, but users won't be able
    to select "unknown" as an option.

14. DRUDG now strips all leading spaces and tabs from the "skedf.ctl"
    file.  In reading the "skedf.ctl" file DRUDG kept leading spaces
    and tabs.  This could lead to problems in specifying directories.
    For example, if the user specified the schedule directory as:

      <TAB>/usr2/sched

    DRUDG would complain that it couldn't find the schedule.

15. Anomalous behavior with vex files and "preob" fixed.  Cormac
    Reynolds (JIVE) noticed that some schedules did not generate
    "preob" commands in .snp files as expected.  It turned out that
    this was due to two issues interacting together.

      A) The problem schedule specified the VLBA correlator.
      B) DRUDG implicitly assigns 25 seconds early start to sessions
         processed at the VLBA.

    The behavior of DRUDG was modified as follows:

      1) DRUDG no longer implicitly assigns 25 seconds early start to
         sessions processed at the VLBA.

16. Length and continuous times in scan_name command improved.  As
    before, the length parameter reflects the "data valid" time for
    the scan (as before).  The continuous parameter now properly
    reflects the actual continuous recording time that is scheduled.
    The continuous time maybe longer than length for a single scan if
    early start is in use.  It is the entire recording time for the
    first of several scans that are recorded continuously.  After the
    first one, the continuous parameter is the time from the
    "data_valid=on" to the end of the multi-scan recording.

17. Rack and recorder type in skedf.ctl are now case insensitive.  The
    rack and recorder specified with the "equipment" keyword no longer
    need to be specified with the correct case.

18. The "ready_disk" procedure was moved before the first setup
    procedure call.  This is intended to make operation more robust in
    case a station forgets to set-up their Mark 5 before the schedule
    is started and only remembers to do it during the halt in the
    "ready_disk" procedure.  This way the Mark 5 set-up is not lost
    because the Mark 5 was not ready to accept it.

19. Bug in labels for previous 9.10.x versions fixed.  The bug caused
    a portion of the labels to be printed off the page.  The labels
    should be properly positioned again.

20. Extraneous "setup" commands while recording removed.  These extra
    commands occurred in certain pathological cases.

21. Line numbers added to summary listing when recorder is "none".
    The listing of line previous relied on recorder starting and
    stopping information which isn't present for recorder "none".

22. Comment added to set-up procedures to identify VCs/BBCs that are
    set-up but not used.  This is intended to make it clearer which
    converters are not being recorded in set-ups that don't use the
    full set of converters in the rack.

23. Additional sample bit-stream mask suggestion for Mark 5B recorders
    when the rack is "none".  In addition to default bit-stream mask
    of all bits on, the appropriate bit mask for use with a Mark5
    sampler module is included as a comment for reference, in case
    this would be useful.

24. Dymo printing bugs in FSL6 fixed and support for FSL7 added.  The
    positioning the of the printing on Dymo label for FSL6 was
    improved.  In addition, the script "print2dymo" was modified to
    provide guidance comments for making it work under FSL7 and
    changed to make it easier to debug difficult cases, if they occur.

25. Bug in setting Mark 5 equipment from skedf.ctl "equipment" line
    fixed.  This bug caused the "equipment" line to be reject when
    Mark 5 equipment was specified.

26. Pointing files (DRUDG option 2) update for VLBA.  Several bugs
    were fixed in the generation of pointing files.  Currently this
    option is only used to generate files used by the VLBA.

27. Printing Mark5 logs improved for logs with long pre-ambles.
    Previously, in version 9.10.x, if DRUDG did not find station and
    schedule information within the first 100 lines of a file, it
    would assign default values of "STATION" for the station name "X"
    for the station code.  This was done to 'fix' a problem where this
    information was absent.  However, some station logs have this
    information present, but just not in the first 100 lines.  The
    present version of DRUDG will read through the entire file to find
    this information.  If the information is missing, it will then
    rewind the file, and use the default station name and station
    code.  Thanks to Andrey Mikhailov (IAA) for identifying this
    issue.

28. A bug was fixed in handling the '$schedule' and the '$tmp'
    parameters in the 'skedf.ctl' control file.  These parameters
    specify the schedule directory and the temporary directory.  If
    these parameters were missing their trailing '/', DRUDG did the
    wrong thing.  For example, if the '$schedule' parameter was
    '/usr2/sched', and DRUDG were run on the schedule 'test.skd', then
    DRUDG would look for schedule file '/usr2/schedtest.skd', instead
    of '/usr2/sched/test.skd'.  DRUDG has been modified to supply the
    missing '/'.

			   C. Known FS Bugs

The following is a summary list of known bugs.  They are described in
more detail after the list.

1. Do not run "fmset" for extended periods.
2. "odd" and "even" head types not supported for Mark IV & VLBA4.
3. "odd"/"even" head types not supported for VLBA style tapeforms.
4. CHEKR does not check the status of the Mark IV formatter or Mark 5
   recorder.
5. Extraneous errors when tape is stopped by low tape sensor.
6. "Comm=" command in logex extracts only the first command.
7. S2 error scheme clumsy.
8. No extra spaces allowed in "ibad.ctl" file.
9. ONOFF and FIVPT programs hang.
10. FS SNAP command pages don't list tape drive suffix numbers.
11. LBA rack TPI detector is not usable.

A more detailed discussion of these bugs follows.

1. Do not run "fmset" for extended periods.  For stations that have
   VLBA, Mark IV back-ends and/or an S2 recorder, the "fmset" program
   should not be run for extended periods of time.  The "fmset"
   program should be used only to set or briefly verify that the
   formatter time is correct.  Do not leave "fmset" running after
   completing either of these tasks, especially during an experiment.

   The "fmset" program dominates the Field System when it is running
   and this is likely to interfere with the running of an experiment
   or other activities.  The only way to detect the time from the VLBA
   formatter with greater precision than one second it to wait for the
   seconds response from the formatter to change.  This requires the
   FS to communicate with the formatter almost continuously.  A
   similar problem exists for the S2 recorder.  This problem is less
   severe for the Mark IV formatter, but extended use of "fmset" in
   this case should be avoided as well.  In a future revision, this
   will be made more robust so that there will probably be less danger
   if "fmset" is left running.  However, even in the future "fmset"
   should only be left running for as short a time as possible.  A
   reminder about this is included in the "fmset" menu.

2. "odd"/"even" head types not supported for Mark IV & VLBA4.  The
   Mark IV and VLBA4 rack version of the "form" command and the Mark
   IV and VLBA4 recorder versions of the "repro" and "parity" commands
   do not support the "odd" and "even" parameters for the read and
   write head types and reproduce electronics in the "head.ctl"
   control file.  This means that automatic substitution of odd or
   even head in passes that use only even or odd heads respectively
   does not occur.  The only correct settings for the read and write
   head parameters and reproduce electronics is "all".  This will be
   fixed in a future revision.  Please let Ed know if you are missing
   some tracks and need to work around this limitation.

3. "odd"/"even" head types not supported for VLBA style tapeforms.
   For any mode recorded with VLBA style tapeform (14 index
   positions), the only correct setting of the read and write head
   types on the "head.ctl" is "all".  This will be fixed in a future
   revision.  Please let Ed know if you are missing some tracks and
   need to work around this limitation.

4. CHEKR does not check the status of the Mark IV formatter or Mark 5
   recorder.  Now that most communication problems with the Mark IV
   formatter have been solved, this will be possible and will be done
   in the future.  CHEKR support will be implemented for Mark 5 despite
   communication problems, they will have to be ignored unless they
   extend beyond a certain amount of time.

5. Extraneous errors when tape is stopped by low tape sensor.  When a
   tape drive has been commanded to move the tape and then stops
   because it hit the low tape sensor (or when S2 recorders hit the
   BOT or EOT), "CHEKR" will complain periodically that the tape drive
   is not in the correct state.  In principle the FS should be smarter
   about this.  However, if the tape is managed correctly by the
   schedule this error message should never occur.  If it does, then
   it it an indication that there is either a problem with: (1) the
   schedule, (2) the check procedures, (3) the recorder, or (4) the
   tape is too short.  If any of these cases apply they should be
   corrected.  It is more likely that this error message will occur
   when the tape is being controlled manually.  In this case, issuing
   an "ET" command will convince the FS that the tape drive should be
   stopped and the error message will cease.

6. "Comm=" command in logex extracts only the first command.  The
   "comm=" command in "logex" extracts only the first command
   commanded and displayed.  This problem was noted by Giuseppe
   Maccaferri (Medicina).

7. S2 error scheme clumsy.  The error and status response number
   reporting scheme for S2 recorders is clumsy.  FS errors that have
   mnemonic "rl" are mostly error responses from the recorder or the
   RCL interface library that is used to communicate with the
   recorder.  If the numeric part of an "rl" error is greater than
   -130, then it is the error code returned by the recorder.  If the
   numeric part is less than -130, but greater than -300, then add 130
   to the value, the absolute value of the result is the error
   response code from the RCL library.  For values less than or equal
   to -300, a FS error has been detected.  Status response codes are
   all reported with mnemonic "rz" and the numeric value is the
   negative of the status response code.  In all cases an appropriate
   error or status message is displayed.  These messages are retained
   in the log.

8. No extra spaces allowed in "ibad.ctl" file.  The format of the
   "ibad.ctl" must not contain any leading or embedded spaces.  In
   systems that use the LLP AT-GPIB driver (pre-FS Linux 4), if either
   the option "no_untalk/unlisten_after" is misspelled or an incorrect
   device name is supplied, the driver will cause a segmentation
   violation when it is initialized and the FS will terminate.
   Unfortunately there is no way to prevent this problem in a general
   way; it reflects a limitation in the driver.

9. ONOFF and FIVPT programs hang.  The ONOFF and FIVPT programs have
   been known to "hang" mysteriously.  This seems to be caused by some
   problem with the "go" mechanism that is used to restart the program
   when it pauses to allow a SNAP procedure, such as CALON or CALOFF
   to execute.  The "go" that is used to restart the program fails for
   some reason.  This has been exceedingly difficult to debug because
   it is intermittent and fairly rare.  There is however a good work
   around for it.  The CALON and CALOFF procedures are called by
   procedures CALONFP and CALOFFFP for FIVPT and CALONNF and CALOFFNF
   for ONOFF.  FIVPT or ONOFF may hang during (or actually just after)
   the execution of one these procedures that FIVPT and ONOFF will
   typically hang.  If this happens, you will have to terminate the FS
   to recover.  You can prevent it from happening again (for this
   procedure) by adding the lines:

    !+1s
    sy=go fivpt &

  to the end of CALONFP or CALOFFFP.  For CALONNF and CALOFFNF, please
  add:

    !+1s
    sy=go onoff &

  If you see other situations where FIVPT or ONOFF hang, please let Ed
  know.

10. FS SNAP command pages don't list tape drive suffix numbers.  The
    FS SNAP manual pages and the help pages available through the
    "help=" command do not reflect when multiple versions are
    available with different suffixes depending on the number of drive
    specified in the control files.  For example, there is only a
    "tape" page, no "tape1" or "tape2" page.  However, the help
    facility will display the version of the command with no suffix
    when an available command with a suffix is used.  For example, if
    two drives are defined, then "help=tape1" and "help=tape2" will
    work, but "help=tape" will not and vice-versa if only one drive is
    defined.

11. LBA rack TPI detector is not usable.  The Australian LBA Data
    Acquisition System currently lacks a functional total power
    detector though support has been included.  To allow approximate
    system temperature calibration, all the setup commands and the TPI
    detectors of the modules of a co-existing Mark IV rack are
    currently also available when the rack type is specified to be
    LBA4.

III. Installation

If you are installing FS9 for the first time with this version, please
follow the installation instructions in Section 4.5 of the FS9
"Computer Reference" manual.  In this case you should also get a copy
of the current FS9 "Control Files and Field System Initialization"
manual.

The following instructions are for upgrading from 9.9.2.  Please
follow all the steps.  Special instructions for upgrading from version
both older and newer than 9.9.2 are included in the next few
paragraphs.

If you are upgrading from 9.10.0, you should skip steps: (note 13A
changed in 9.10.3, 13B is new in 9.10.1, and 13C-13E are new in
9.10.4), 14, 15, 16A, 16C, (note 16B is new 9.10.1, 16D is new in
9.10.2, and 16E is new in 9.10.4), 17A (note 17B-17D are new in 9.10.3
and 17E is new in 9.10.4).

If you are upgrading from 9.10.1, you should skip steps: 13B (note 13A
changed in 9.10.3, and 13C-13E are new in 9.10.4), 14, 15, 16A-16C,
(note 16D is new 9.10.2 and 16E is new in 9.10.4), 17A (note 17B-17D
are new in 9.10.3 and 17E is new in 9.10.4).

If you are upgrading from 9.10.2, you should skip steps: (note 13A
changed in 9.10.3, and 13C-13E are new in 9.10.4), 14, 15, 16A-16D
(note 16E is new in 9.10.4), and 17A (note 17B-17D are new in 9.10.3
and 17E is new in 9.10.4).

If you are upgrading from 9.10.3, you should skip steps: 13A, 13B
(note 13C-13E are new in 9.10.4), 14, 15, 16A-16D (note 16E is new
since 9.10.3), 17A-17D, (note 17E is new in 9.10.4), 18, and 19.

If you are updating from a version older than 9.9.2, a list of
"critical updates" is given below.  These are updates that must be
applied sequentially.  Please start with the next update with a later
version number than you have and apply it and the following listed
versions before upgrading to 9.10.4.  You can find the latest versions
of installation notes for these FS versions in the "/usr2/fs/misc"
directory.  The list of critical updates is:

  9.4.0
  9.5.3
  9.5.12
  9.6.9
  9.7.7
  9.9.2

If you have a version older than 9.4.0, please contact Ed
(Ed.Himwich@nasa.gov).

For reference purposes the naming convention for the default station
libraries for different equipment configurations is listed here.  The
files are found in /usr2/fs/st.default/proc.  They can be referred to
and compared to what you have in "/usr2/proc/station.prc".  For a new
installation (or re-installs), you can copy the default version for
your equipment to "/usr2/proc" renaming it to "station.prc" in the
process, e.g.:

  cd /usr2/proc
  cp -i /usr2/fs/st.default/proc/3station.prc station.prc
  chmod a+rw station.prc

The "-i" option will prompt before overwriting an existing
"station.prc".  The table of correspondence between equipment types
and default library names is given next.

        Equipment      Prefix letters  Station Library
        Rack/Drive1/Drive2

        K42/K42            k42         k42station.prc
        K42K3/VLBA         k42k3v      k42k3vstation.prc
        K42MK4/VLBA        k42mk4v     k42mk4vstation.prc
        K42MK4/VLBAB/VLBAB k42mk4vb    k42mk4vstation2.prc
	K42/K5             k42k5       k42k5station.prc
        LBA/S2             ls2         ls2station.prc
        LBA4/S2            l4s2        l4s2station.prc
        Mk3/Mk3A           3           3station.prc
        Mk4/Mk4            4           4station.prc
        Mk4/Mk5A           45          45station.prc
        Mk4/VLBA4          4v4         4v4station.prc
        Mk5/Mk5B           5           5station.prc
        NONE/S2            s2          s2station.prc
        VLBA/S2            vs2         vs2station.prc
        VLBA/VLBA          v           vstation.prc
        VLBA/VLBA2         v2          v2station.prc
        VLBA/VLBA/VLBA     v           vstation2.prc
        VLBA4/VLBA4        v4          v4station.prc
        VLBA4/MK5A         v45         v45station.prc
        VLBA4/VLBA42       v42         v42station.prc
        VLBA5/Mk5B         v5          v5station.prc

If your equipment type is missing, please let Ed (Ed.Himwich@nasa.gov)
know so that it will be added.

You can use cut-and-paste to reduce the amount of typing involved in
the installation.  This reduces the chances of missing required spaces
and other easily missed characters (like ".") in the commands.  The
basic idea is to have two different terminals open, either two
different VT text terminals (Control-Alt-F*, where * is 1-6) on the FS
computer you are upgrading or two different xterm terminals either on
the local X display or remotely logged in.  You can then switch back
and forth between the terminals, reading the instructions as you
scroll through them (with "more" or "less") on one terminal and
entering commands on the other.  You can cut-and-paste complicated
commands from the terminal with the instructions to the terminal where
you are entering commands as needed.  For VT text terminals you can
log in and out to change users as needed on the terminal where you are
executing commands.  With xterms, you can use "ssh" or "su" to
'switch' to users as needed on the terminal where you are entering
commands. For example, you can change to being 'prog' by executing:

 ssh -X prog@localhost

or

 su - prog

Please don't forget to log back out when you need to change users
again or you may develop a series of 'nested' logins.  The steps that
require rebooting will of course completely log out all of your
terminals; you will need to re-login again from scratch to continue.
At the end of the update, it is recommended that you login as "oper"
on the local X display for the final testing.  Please also note that
in order to paste into the X display login shell window for "oper" and
"prog", you typically must use Shift-Insert.  If you have any
questions about how to cut-and-paste please contact Ed
(Ed.Himwich@nasa.gov).

(0) Before you begin the upgrade make sure you have a current back-up
    of your system in case something goes wrong.  If you are use FS
    Linux 5 (FSL5_, we recommend you use the tar based back-up that is
    part of the rotating disk back-up scheme.  A draft document that
    describes this method is available in the docs sub-directory on
    the FS FTP servers as backups2.pdf.  If you have an older FS Linux
    distribution, please use the disk-to-disk back scheme described in
    Section 5.8 of the FS9 "Computer Reference" manual.  If you have
    an FSL6 (sarge) or FSL7 (etch) system configured to run a RAID,
    please see /usr2/fs/misc/RAID.txt section APPLYING AN UPDATE for
    backup directions for applying an update.  If you are running one
    of the FSL distributions and do not have documentation on how to
    make a back-up, please contact Ed.  If you have SCSI disks,
    Section 5.7 of the FS9 "Computer Reference" manual has a
    discussion of drive ID numbers if you are unsure about these.

    Normally you should choose to install the update on your primary
    disk after having made and verified your back-up.  Once the
    installation is complete, has been tested, and used for a little
    while, you can copy over your back-up with the upgraded primary.
    If the upgrade fails, you should restore the back-up to the
    primary for operations.  You can then try to make the upgrade
    again when it is convenient.  In a desperate situation, you can
    use the back-up for operations.  You may choose to install the FS
    on your back-up disk for testing and then later copy the back-up
    onto the primary once you are satisfied with the new version.  In
    any event, please be sure to make a fresh back-up before
    continuing with the installation.

(1) Please be sure that you have at least 40 MB of free space (use the
    "df" UNIX command to check free space) on your "/usr2" partition
    before starting the upgrade.  This would probably only be an issue
    for stations with 200 MB disks.  If you are tight on space, you
    may want to delete old log files and old versions of the FS
    (except your most recent one if you can avoid it of course).
    Since you should have backed-up your system, you can even delete
    the "*.[oas]" and executable files of your old versions with no
    risk.  You might want to keep the source of the previous versions
    around for reference if you have room.  You can eliminate the
    non-source files by "cd"-ing to each of the old FS directories in
    turn as "prog" and doing a "make rmdoto rmexe".  If you have any
    questions about how to do this, please contact Ed.

(2) Log-in as prog.

(3) Place a copy of the fs-9.10.4 archive in your "/tmp" directory.
    For example you might do the following:

      cd /tmp
      ftp atri.gsfc.nasa.gov
      (enter your FS FTP account name at the prompt)
      (enter your FS FTP password at the prompt)
      binary
      cd dist
      get fs-9.10.4.tgz
      quit

    The FS FTP area is also available via http://kurp-www.hut.fi/fs/.

    If you need to transfer the archive using DOS floppies, please see
    the section "V. Transferring The Update Archive By DOS Floppy"
    below.

(4) Log-out as prog and log-in as root.

(5) Extract the source from the archive:

      cd /
      tar -xzpf /tmp/fs-9.10.4.tgz

(6) Set the link for the new FS version:

      cd /usr2
      ln -sfn fs-9.10.4 fs

(7) It is recommended that your local files operations (control, proc,
    log, and sched directories) have the default ownership
    ("oper.rtx") and permissions ('rw-rw-rw').  To force this, please
    execute the script:

      /usr2/fs/misc/fix_perm

    Answer "y" to the prompt if you wish to proceed.  It is good idea
    to do this, unless you have purposely changed the ownerships and
    permissions to some other values.  If you don't want to restore
    the defaults , answer "n".  That is the last chance to abort the
    execution of the script.

(8) VERY IMPORTANT: Log-out as root, and log-in prog.

(9) Make the FS:

      cd /usr2/fs
      make

(10) Recompile your station software.  This is necessary to pick-up
     changes to common blocks, shared memory, and library routines.

     To recompile and reload your station software, the following
     steps should work if you have the "standard" configuration for
     station software:

       cd /usr2/st
       make rmdoto rmexe all

(11) Reboot the computer.  This is important for re-initializing
     shared memory.

(12) Log in as oper

(13) Modify your control files.  Two changes are needed: (A) Update
     the skedf.ctl "label_size" command for Dymo, and (B) update
     "matad.ctl" for Mark 5B Sampler Modules.

     (A) The new version of the skedf.ctl "label_size" command for
         Dymo is:

           label_size  1.    4.0     1     1     0.0   0.0    Dymo Larger Printing

         Note that the first two numbers, the size have been changed
         to more completely fill the label.  If you need the older
         smaller size an example is included in the default
         /usr2/fs/misc/st.default/control/skedf.ctl file.  Please note
         that the sizes are not continuously adjustable.  These are
         the two sizes that are known to work. Note also that the
         first "0.0" on the line used to be "11.0".

         Please change the label_size command in your skedf.ctl to
         agree with this regardless of whether you have it commented
         out or not.  If you have it commented out, it is still useful
         to fix it because it will help prevent future confusion if
         you ever get a Dymo printer.  Please add the line (commented
         out) if you don't have a Dymo label_size line now.  You can
         look at the default file
         /usr2/fs/st.default/control/skedf.ctl as an example.

     (B) Please add the line "5B=5B" to your "matad.ctl" file (even if
         you do not have a Mark 5B Sampler Module), if it isn't
         already there.  The commands:

           cd /usr2/control
           grep 5B=5B /usr2/fs/st.default/control/matad.ctl >>matad.ctl

        should handle this.  You can look at
        "/usr2/fs/st.default/control/matad.ctl" for an example.

     (C) Rename your "logpl.ctl" control file to "logpl1.ctl" (for use
         with the old version of "logpl", now called "logpl1"):

           cd /usr2/control
           mv logpl.ctl logpl1.ctl

     (D) Install the new "logpl.ctl" control file for the new version
         of "logpl".  You can do this in one of two ways.  The first
         option is to install the new default file using:

           cd /usr2/control
           cp /usr2/fs/st.default/control/logpl.ctl .
           chmod a+rw logpl.ctl

         The second option is appropriate if you have extensively
         customized the old "logpl1.ctl" (formerly "logpl.ctl") file
         and wish to retain the customizations.  The control file for
         the new "logpl" is backward compatible with the old one.  You
         can make a copy of the old file using:

           cd /usr2/control
           cp -a logpl1.ctl logpl.ctl

(14) Update your systests v/chk1024.snp and .prc files.  If you have
     not made any local modifications to these files ("diff" to the
     old default ones in /usr2/fs-9.9.2/systests to check), you can
     just copy the new ones into your /usr2/sched and /usr2/proc
     directories.  Please note that v/chk1025 will is not appropriate
     for and will not work with Mark5 or VLBA5 racks.  For Mark III/IV
     racks use the commands (note the dot "." at the end of the "cp
     ..."  commands):

       cd /usr2/sched
       cp -a /usr2/fs/systests/chk1024.snp .
       chmod a+rw chk1024.snp

       cd /usr2/proc
       cp -a /usr2/fs/systests/chk1024.prc .
       chmod a+rw chk1024.prc

     For VLBA/4 racks use the commands (note the dot "." at the end of
     the "cp ..."  commands):

       cd /usr2/sched
       cp -a /usr2/fs/systests/vchk1024.snp .
       chmod a+rw vchk1024.snp

       cd /usr2/proc
       cp -a /usr2/fs/systests/vchk1024.prc .
       chmod a+rw vchk1024.prc

     If you have modified your local copies of these files from the
     default and want to preserve the changes, you can use a "diff"
     comparison of your local copies to the old default versions in
     /usr2/fs-9.9.2/systests to guide your editing of the new ones.

(15) If you have a vsi4 board (Mark 5B Sampler Module), you should
     modify or replace your systests.prc file, as appropriate to
     support this.  Please follow the directions in
     /usr2/fs/systests/systests.txt to complete this step.

(16) Modify your other procedure files.  Four changes are needed: (A)
     rename "checkmk5a" to "checkmk5", (B) update the contents of
     "checkmk5", (C) change "greplog" to be case insensitive, and (D)
     update the contents of "ready_disk".

     (A) You should used PFMED to make this change in your "station"
         procedure library:

           pfmed
           pf,station
           rn,checkmk5a,checkmk5
           ::

         Please see /usr2/fs/st.default/proc/newmk5ak5.prc for an
         example.

         For stations that use multiple hardware configurations:
            
           If you have different versions of the "station" library for
           different equipment configurations, you should be sure to
           update all versions that are used in configurations with
           the Mark 5 recorder.
 
     (B) Use PFMED to edit the "checkmk5" procedure in your "station"
         procedure library. Change the contents to:

            scan_check
            mk5=get_stats?
            mk5=status?

         Please see /usr2/fs/st.default/proc/newmk5ak5.prc for an
         example.

         For stations that use multiple hardware configurations:
            
           If you have different versions of the "station" library for
           different equipment configurations, you should be sure to
           update all versions that are used in configurations with
           the Mark 5 recorder.
 
     (C) Edit the "greplog" procedure in your station.prc library
         using PFMED.  Change the line:

           sy=xterm -name greplog -e sh -c 'grep $ /usr2/log/`lognm`.log|less' &

         to:
 
           sy=xterm -name greplog -e sh -c 'grep -i $ /usr2/log/`lognm`.log|less' &

         The only changed needed is to add the "-i" between "grep" and
         "$".

         For stations that use multiple hardware configurations:
            
           If you have different versions of the "station" library for
           different equipment configurations, you should be sure to
           update all "greplog" versions.

     (D) Use PFMED to edit the "ready_disk" procedure in your
         "station" procedure library.  If you have a Mark 5A, add the
         following commands at the end the procedure:

            mk5=DTS_id?
            mk5=OS_rev1?
            mk5=OS_rev2?
            mk5=SS_rev1?
            mk5=SS_rev2?
            mk5=status?

         If you have a Mark 5B, add the following commands at the end
         the procedure:

            mk5=DTS_id?
            mk5=OS_rev?
            mk5=SS_rev?
            mk5=status?

	  If your station is involved in eVLBI operations that make
	  use of the "in2net" command, also add the following command
	  at the end of the procedure:

            mk5=net_protocol=tcp:4194304:2097152;
 
          Please see /usr2/fs/st.default/proc/m5.prc for an example.

          For stations that use multiple hardware configurations:
            
            If you have different versions of the "station" library
            for different equipment configurations, you should be sure
            to update all versions that are used in configurations
            with the Mark 5 recorder.

     (E) If you have a Mark IV decoder and have not already done so,
         please add the "pcsample" procedure to your "midob"
         procedure.  This is only for stations with Mark IV
         decoders. All other stations should skip this step.

         The following instructions are copied from a separate
         announcement asking stations to make this change. If you have
         already made these changes, please skip this step.

           The installation of the Pcal recording procedure requires
           three steps.  The first is to add a

             decode4=bocf_period 128

           as the first command in the "pcsample" procedure in the
           "systests" library.  If you have other copies of
           "pcsample", this change should be made to all in order to
           make sure the Pcal data is always recorded with the same
           reliable set-up.  The second step is to copy the updated
           "pcsample" procedure to your "station" library.  The third
           is to add the "pcsample" procedure to "midob".

           Please note these caveats:

             (a) Example steps are given below for how to make these
                 changes.  They should work as shown for typical
                 stations.  Please note though that stations with Mark
                 5B sampler modules must be using the version of
                 "pcsample" with the "vsi4" command for selecting the
                 phase-cal channels sent to the decoder.

             (b) Stations that use more than one "station" procedure
                 library, should make the changes to the version(s) of
                 "station" that is used for geodesy experiments.

             (c) If you already have a version of "pcsample" in your
                 "station" library, you can of course use that one or
                 use a version with a different name for the one that
                 you will be called by "midob".

             (d) Please test the version(s) of "midob" you modify to
                 make sure it runs without error after you make the
                 changes.

           The steps for the installation in outline form are:

             Run pfmed, then:

               pf,systests
               vi,pcsample

                (add the next line as shown, with no spaces before it:

                  decode4=bocf_period 128

                as the first line in the file, and save the file; you
                can add the line use the "O" (capital "O") command
                with the cursor on the first line of the file and then
                entering the text, after entering the text, press ESC
                to end input and then ":wq" to save the file and quit
                vi)

              pf,station
              st,pcsample::systests,pcsample
              vi,midob

                (add the next line as shown, with no spaces before it:

                  pcsample

                and save the file, you can add the line at the start
                of "midob" if you want your normal "midob" output to
                be what is visible on the screen during the
                observation or you can just add it at the end; you can
                insert the line at the start of "midob" and save the
                file using the method described above for inserting
                the "decode4=..."  command in "pcsample"; to insert it
                later in "midob" use the same method, except move the
                cursor to the line you want to place the "pcsample"
                line AFTER and use the "o" (lowercase "o") command
                before entering the text)

           Please test the resulting "midob". If the results are not
           satisfactory, please comment out the "pcsample" call in
           "midob" until the problem is resolved.

(17) Update the ~/.fvwm2rc files.  Please note changes made to these
     files will not be utilized until the the window manager is
     restarted, either explicitly or by logging out and then back in
     again.

     If you have not modified your .fvwm2rc files from the previous
     default you can just overwrite the ~oper/.fvwm2rc and
     ~prog/.fvw2rc files with copies of the new default file,
     /usr2/fs/st.default/oper/.fvwm2rc.

     If you have modified your copies of the file, the steps below
     describe the edits that are needed to bring them up to date.
     There are four changes: (A) adjust the focus and window raising
     policies, (B) prevent "lock" keys from being used as modifiers,
     (C) fix the focus rotate short-cuts, (D) add "monpcal" focus
     policy, and (E) creates the short-cuts for "monpcal".  Step (F)
     is to make these changes for prog.  You can use the default file,
     /usr2/fs/st.default/oper/.fvwm2rc as a guide in making these
     changes.

     (A) Add the lines:

           Style "monit*" NeverFocus
           Style "xconsole" NeverFocus
           Style "Field System Prompt*" StaysOnTop

         as the last Style commands in ~oper/.fvwm2rc.  (You may also
         want add additional "NeverFocus" lines for other display only
         windows you may use, e.g., "monan".)  If you have the
         standard .fvwm2rc file, these lines are insert right after
         line:

           Style "*"          Color black/khaki

         which is line 252.  For .fvwm2rc files that have only been
         minimally modified, the same line should still be close to
         line 252 and the new lines should be added after this line,
         wherever it is.

     (B) Add the line:

           IgnoreModifiers L2

         after the line:

           Style "Field System Prompt*" StaysOnTop

         in ~oper/.fvwm2rc as described in step 17A above.  This change
         fixes the problem with CapsLock and NumLock interferring with
         keyboard shortcuts and ClickToFocus without disabling this
         keys.

     (C) Update the key board short-cuts for Ctrl-Shift-Esc and
         Shift-Esc in ~oper/.fvwm2rc. The old lines look like:

           Key Escape      A       C       Prev Focus
           Key Escape      A       SC      Next Focus

         and should be modified to look like:

           Key Escape      A       C       Prev (AcceptsFocus) Focus
           Key Escape      A       SC      Next (AcceptsFocus) Focus

         The easiest way to identify this lines may be to diff your
         current .fvwm2rc file (or the previous default) against the
         new default:

           cd
           diff .fvwm2rc /usr2/fs/st.default/oper

         and note the differences that are related to just these two
         specific keyboard short-cuts.
 
     (D) Add the following line:

           Style "monpcal" NeverFocus

         after the corresponding line for "monit*" described in step
         17A above.

     (E) Add the short-cuts and menu options for monpcal. After the line:

+              "Monit: Mark 5 C-S-5" Exec exec xterm -name monit5 -e monit5

         add the line:

+              "Monit: PCal C-S-6" Exec exec monpcal

         After the line:

Key 5 A CS Exec exec xterm -name monit5 -e monit5

         add the line:

Key 6 A CS Exec exec monpcal

         Please note you can compare use the default file as a
         reference.

     (F) Please log in as "prog" and make the same changes to prog's
         ~/.fvwm2rc file.

(18) Update the ~/.xsession files. There are two changes: (A) to
     suggested command to improve the audibility of the bell and (B)
     to cause ScrollLock to be ignored.  Step (C) is make these
     changes for prog.

     (A) If you would like to change the sound of your bell to make FS
         errors more audible, you may be able to make a significant
         change by adding an "xset b ..." command to your .xsession
         file.  Please see the default file
         "/usr2/fs/st.default/oper/.xsession", which includes a
         suggested "xset b ..." command as a comment.  You can include
         this command, uncommented, in your ~oper/.xsession to change
         the bell behavior.  There will be no effect until you log out
         and log back in again.  However, you can manually try "xset b
         ..." commands from regular shell prompts in xterm windows on
         the X display using various parameter values to see their
         effect.  Other parameter values may work better for you.
         Please see "man xset" for more information on the parameters
         of the "xset" command.  Press Control-G to sound the bell.

     (B) Add the line:

           xmodmap -e "clear Mod5"

         to ~oper/.xsession before the line:

           fvwm &

         This change fixes the problem with ScrollLock interferring
         with keyboard shortcuts and ClickToFocus. Actually, it
         completely disables this key.  Please see the default file
         "/usr2/fs/st.default/oper/.xsession" for an example.

     (C) Please log in as "prog" and make the same change to prog's
         ~/.xsession file.

(19) Update your version of the "print2dymo" script if you have one.
     If, for example, you currently have your print2dymo script in
     ~oper/bin, then first compare your old script (or better, the old
     default) to the new default script:

       cd ~/bin
       diff print2dymo /usr2/fs/misc/print2dymo

     noting any differences between it and the new default. Several
     things changed in the new version, but you should particularly
     note what your current Dymo printer name is, then copy the new
     default over your existing script:

       cp -a /usr2/fs/misc/print2dymo .

     the edit it so that only "Perl" command appropriate for your
     Linux distribution, FSL5, FSL6, or FSL7 is uncommented (the FSL5
     command is uncommented by default, but will need to be commented
     out if you have FSL6 or FSL7).  Finally adjust which "lpr"
     command appropriate for your system is uncommented, using your
     Dymo printer name.
 
(20) If you have a Mark IV Decoder and want to use the new "monpcal"
     utility to display the Phase Cal Amplitude and Phase during
     experiments, you will need to install the "python-tk" package if
     it is not already installed.  Instructions for installing it for
     FSL5 or later are included here.  It should already be installed
     in FSL7.  For FSL4 and earlier distributions and non-FSL
     distributions please contact Ed (Ed.Himwich@nasa.gov) for more
     information.

     To install "python-tk" for FSL5 or later systems, first please
     make sure that your "/etc/apt/sources.list" file does not refer
     to "stable", but instead to whatever distribution your system is
     based on: "woody" (FSL5), "sarge" (FSL6), "etch" (FSL7), or other
     as appropriate.  Please also refer to the use of the "archive"
     server in "sources.list" file as described in the instructions
     for installing "pgperl" in the installation section for
     "/usr2/fs/systests/systests.txt".  Those instructions are
     relevant for the installation of "python-tk" as well.  Once the
     "sources.list" file contents have been verified, as "root", enter:

       apt-get update
       apt-get install python-tk
       apt-get clean

(20) Test the FS as "oper". Generally speaking a fairly thorough test
     is to run a test experiment: start with DRUDG-ing a schedule,
     making listings, and any other pre-experiment preparation you
     normally do, then execute part of schedule, and perform any
     normal post-experiment plotting and clean-up that you do.  If you
     use tape, you should test a section that includes a tape change
     and a parity check in each direction.  The idea here is to verify
     that everything works as you expect for normal operations.  In
     particular for this upgrade you should test that Mark 5
     operations work as expected.

(21) Consider when to update your back-ups.  You certainly should not
     update them until you have performed the tests described above.
     It would be prudent to wait until you have successfully run an
     experiment or two and preferably received word that the
     experiment(s) produced good data.  The chances of needing your
     back-up before you update it is fairly small.  If something does
     happen, you can copy the pre-FS update back-up it to the (now
     bad) FS updated disk.  You can then either run the recopied disk
     or apply the FS update again.  Handling this will be a lot safer
     if you have a third disk.

IV. Transferring The Update Archive By DOS Floppy

In order to assist sites that need to transfer the FS archive by DOS
floppy, "split" files of the fs-9.10.4.tgz archive have been placed in
the /fs/dist directory on atri.gsfc.nasa.gov.  These files are small
enough to each fit on 1.44 MB 3.5" floppy.  The files are:

fs9104tg.aa
fs9104tg.ab
fs9104tg.ac

If you need to use DOS floppies to get files to the FS computer,
please copy these files to some directory such as /tmp on the FS
computer and then execute the command:

cat fs9104tg.* >fs-9.10.4.tgz

This will create an exact image of the original fs-9.10.4.tgz archive
on your computer.  Please be sure to use binary transfer when getting
the files from atri.
